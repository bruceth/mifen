(this.webpackJsonpmi=this.webpackJsonpmi||[]).push([[1],[,,,,,,,function(e,t,n){"use strict";var r=n(13);n.d(t,"PageItems",(function(){return r.b})),n.d(t,"env",(function(){return r.f})),n.d(t,"left0",(function(){return r.h}));var a=n(21);n.d(t,"centerApi",(function(){return a.e})),n.d(t,"userApi",(function(){return a.n}));var i=n(14);n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"IconText")&&n.d(t,"IconText",(function(){return i.IconText})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"NavView")&&n.d(t,"NavView",(function(){return i.NavView})),n.o(i,"Page")&&n.d(t,"Page",(function(){return i.Page})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return i.TabCaptionComponent})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"nav")&&n.d(t,"nav",(function(){return i.nav})),n.o(i,"setRes")&&n.d(t,"setRes",(function(){return i.setRes})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start}));n(178);var c=n(69);n.o(c,"CAppBase")&&n.d(t,"CAppBase",(function(){return c.CAppBase})),n.o(c,"CBase")&&n.d(t,"CBase",(function(){return c.CBase})),n.o(c,"CSub")&&n.d(t,"CSub",(function(){return c.CSub})),n.o(c,"Controller")&&n.d(t,"Controller",(function(){return c.Controller})),n.o(c,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return c.DropdownActions})),n.o(c,"EasyTime")&&n.d(t,"EasyTime",(function(){return c.EasyTime})),n.o(c,"Edit")&&n.d(t,"Edit",(function(){return c.Edit})),n.o(c,"FA")&&n.d(t,"FA",(function(){return c.FA})),n.o(c,"Form")&&n.d(t,"Form",(function(){return c.Form})),n.o(c,"IconText")&&n.d(t,"IconText",(function(){return c.IconText})),n.o(c,"Image")&&n.d(t,"Image",(function(){return c.Image})),n.o(c,"LMR")&&n.d(t,"LMR",(function(){return c.LMR})),n.o(c,"List")&&n.d(t,"List",(function(){return c.List})),n.o(c,"NavView")&&n.d(t,"NavView",(function(){return c.NavView})),n.o(c,"Page")&&n.d(t,"Page",(function(){return c.Page})),n.o(c,"PropGrid")&&n.d(t,"PropGrid",(function(){return c.PropGrid})),n.o(c,"SearchBox")&&n.d(t,"SearchBox",(function(){return c.SearchBox})),n.o(c,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return c.TabCaptionComponent})),n.o(c,"UserView")&&n.d(t,"UserView",(function(){return c.UserView})),n.o(c,"VPage")&&n.d(t,"VPage",(function(){return c.VPage})),n.o(c,"View")&&n.d(t,"View",(function(){return c.View})),n.o(c,"nav")&&n.d(t,"nav",(function(){return c.nav})),n.o(c,"setRes")&&n.d(t,"setRes",(function(){return c.setRes})),n.o(c,"start")&&n.d(t,"start",(function(){return c.start}));var s=n(173);n.d(t,"CAppBase",(function(){return s.a})),n.d(t,"CBase",(function(){return s.b})),n.d(t,"CSub",(function(){return s.c})),n.d(t,"start",(function(){return s.d}));var o=n(31);n.d(t,"Controller",(function(){return o.a})),n.d(t,"VPage",(function(){return o.b})),n.d(t,"View",(function(){return o.c}));var u=n(37);n.d(t,"setRes",(function(){return u.f}));var l=n(144);n.o(l,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return l.DropdownActions})),n.o(l,"EasyTime")&&n.d(t,"EasyTime",(function(){return l.EasyTime})),n.o(l,"Edit")&&n.d(t,"Edit",(function(){return l.Edit})),n.o(l,"FA")&&n.d(t,"FA",(function(){return l.FA})),n.o(l,"Form")&&n.d(t,"Form",(function(){return l.Form})),n.o(l,"IconText")&&n.d(t,"IconText",(function(){return l.IconText})),n.o(l,"Image")&&n.d(t,"Image",(function(){return l.Image})),n.o(l,"LMR")&&n.d(t,"LMR",(function(){return l.LMR})),n.o(l,"List")&&n.d(t,"List",(function(){return l.List})),n.o(l,"NavView")&&n.d(t,"NavView",(function(){return l.NavView})),n.o(l,"Page")&&n.d(t,"Page",(function(){return l.Page})),n.o(l,"PropGrid")&&n.d(t,"PropGrid",(function(){return l.PropGrid})),n.o(l,"SearchBox")&&n.d(t,"SearchBox",(function(){return l.SearchBox})),n.o(l,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return l.TabCaptionComponent})),n.o(l,"UserView")&&n.d(t,"UserView",(function(){return l.UserView})),n.o(l,"nav")&&n.d(t,"nav",(function(){return l.nav}))},,,,,,function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s.a})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"i",(function(){return m.b})),n.d(t,"e",(function(){return m.a}));function r(e,t){if(void 0===e)return"";var n=e.toString(),r=t-n.length;return r<=0?n:"00000000000000".substr(0,r)+n}n(55),n(44);var a=n(91),i=(n(1),n(2),n(10),n(3)),c=n(4),s=(n(8),n(63),n(67)),o=function(){function e(){Object(i.a)(this,e),this.user=s.a.localDb.child("user"),this.guest=s.a.localDb.child("guest"),this.unit=s.a.localDb.child("unit"),this._user=void 0,this._guest=void 0,this._unit=void 0}return Object(c.a)(e,[{key:"readToMemory",value:function(){this._user=this.user.get(),this._guest=this.guest.get(),this._unit=this.unit.get()}},{key:"saveToLocalStorage",value:function(){this.user.set(this._user),this.guest.set(this._guest),this.unit.set(this._unit)}},{key:"logoutClear",value:function(){[this.user,this.unit].forEach((function(e){return e.remove()}))}}]),e}();function u(e,t){if(e&&t){var n=Object.keys(e);t=t.toLowerCase();for(var r=0,a=n;r<a.length;r++){var i=a[r];if(i.toLowerCase()===t)return e[i]}}}n(92);function l(e){return e.split(/[-._]/).map((function(e){return p(e)})).join("")}function h(e){var t=e.split(/[-._]/),n=t.length;t[0]=function(e){if(!e)return"";var t=e.charCodeAt(0);if(t>=v&&t<=b)return String.fromCharCode(t+32)+e.substr(1);return e}(t[0]);for(var r=1;r<n;r++)t[1]=p(t[1]);return t.join("")}var d="a".charCodeAt(0),f="z".charCodeAt(0);function p(e){if(!e)return"";var t=e.charCodeAt(0);return t>=d&&t<=f?String.fromCharCode(t-32)+e.substr(1):e}var v="A".charCodeAt(0),b="Z".charCodeAt(0);var m=n(82)},function(e,t,n){"use strict";n(94);var r=n(18);n.d(t,"NavView",(function(){return r.a})),n.d(t,"nav",(function(){return r.b}));var a=n(128);n.d(t,"Page",(function(){return a.a})),n.d(t,"TabCaptionComponent",(function(){return a.b}));var i=n(129);n.o(i,"Ax")&&n.d(t,"Ax",(function(){return i.Ax})),n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"IconText")&&n.d(t,"IconText",(function(){return i.IconText})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"setRes")&&n.d(t,"setRes",(function(){return i.setRes})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start}));var c=n(169);n.d(t,"Form",(function(){return c.a}));var s=n(170);n.d(t,"Edit",(function(){return s.a}));n(65);var o=n(50);n.d(t,"Image",(function(){return o.a}));n(97),n(82);var u=n(174);n.d(t,"List",(function(){return u.a}));var l=n(134);n.d(t,"DropdownActions",(function(){return l.a}));var h=n(135);n.d(t,"EasyTime",(function(){return h.a}));var d=n(175);n.d(t,"PropGrid",(function(){return d.a}));var f=n(61);n.d(t,"FA",(function(){return f.a})),n.d(t,"IconText",(function(){return f.b})),n.d(t,"LMR",(function(){return f.c}));n(136);var p=n(137);n.d(t,"SearchBox",(function(){return p.a}));var v=n(138);n.d(t,"UserView",(function(){return v.a}));var b=n(139);n.d(t,"Ax",(function(){return b.a}));n(140),n(68)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=n(4),i=(n(9),n(0)),c=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"numberToFixString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":!0===isNaN(e)?"-":e.toFixed(t)}},{key:"number",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":!0===isNaN(e)?"-":e.toFixed(t)}},{key:"numberToMarketValue",value:function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}},{key:"numberToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e?"":!0===isNaN(e)?"-":e.toPrecision(t)}},{key:"numberToPrecision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return void 0===e?void 0:Number.parseFloat(e.toPrecision(t))}},{key:"percentToFixString",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(2)+"%"}},{key:"percent0",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(0)+"%"}},{key:"percent1",value:function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}},{key:"warningTypeString",value:function(e){switch(e){case"gt":return"\u5927\u4e8e";case"lt":return"\u5c0f\u4e8e";default:return e}}},{key:"predictCutRatio",value:function(e){return 2*e-e*e}},{key:"evaluatePricePrice",value:function(e,t,n,r){var a=1+e,i=a*a,c=i*a;return(t/a+n/i+r/c+r/e/c)/2}},{key:"calculateV",value:function(e,t,n){if(void 0!==n&&!isNaN(n)){var r=0;return void 0!==e&&(e>.25&&(e=.25),r+=100*e),void 0!==t&&(r+=100*t),r/n}}},{key:"calculateVN",value:function(e,t,n,r){if(void 0!==r&&!isNaN(r)&&void 0!==t&&!isNaN(t)){var a=0;return void 0!==e&&t>0&&(e>.25&&(e=.24+Math.pow(100*(e-.24),.6667)/100),a+=(e=(e=1+e)*e*e-1)*t*100),void 0===n||isNaN(n)||(a+=100*n),a/r}}},{key:"calculateVS",value:function(e,t,n){if(void 0!==n&&!isNaN(n))return void 0===e||isNaN(e)?void 0===t||isNaN(t)?void 0:100*t/n:void 0===t||isNaN(t)?100*e/n:100*(t+e)/n}},{key:"calculateZZ3",value:function(e){var t=[void 0,void 0,void 0,void 0];if(void 0===e)return t;if(e.length<5)return t;for(var n=function(e,t){if(!(t<=0||e<=0))return e/t-1},r=0;r<4;++r)t[r]=n(e[r+1],e[r]);return t}},{key:"MonthnoFromDay",value:function(e){return 12*(Math.floor(e/1e4)-1995)+(Math.floor(e%1e4/100)-1)}},{key:"SeasonnoFromDay",value:function(e){var t=Math.floor(e/1e4),n=Math.floor(e%1e4/100)-1;return 4*(t-1995)+Math.floor(n/3)}},{key:"SeasonnoFromDayForBonus",value:function(e){var t=Math.floor(e/1e4),n=Math.floor(e%1e4/100)-1;return n<4?n=0:n<7?n=3:n<10&&(n=6),4*(t-1995)+Math.floor(n/3)}},{key:"SeasonnoFromYearMonth",value:function(e,t){return 4*(e-1995)+Math.floor((t-1)/3)}},{key:"SeasonnoToYearMonth",value:function(e){return 100*(Math.floor(e/4)+1995)+3*(Math.floor(e%4)+1)}},{key:"GetSeasonnoYearMonth",value:function(e){return{year:Math.floor(e/4)+1995,month:3*(Math.floor(e%4)+1)}}},{key:"SeasonnoToBeginEnd",value:function(e){var t=1e4*(1995+Math.floor(e/4)),n=e%4;return 0===n?{begin:t+101,end:t+331}:1===n?{begin:t+401,end:t+630}:2===n?{begin:t+701,end:t+930}:{begin:t+1001,end:t+1231}}},{key:"CalculateValueAvg",value:function(e){var t={avg20:void 0,avg50:void 0,avg100:void 0,avg:void 0},n=e.length,r=function(t){var r=t;if((0===t||r>n)&&(r=n),r>=10){for(var a=0,i=3;i<r;++i)a+=e[i].v;return a/(r-3)}};return t.avg20=r(20),t.avg50=r(50),t.avg100=r(100),t.avg=r(0),t}}]),e}();c.caption=function(e){return Object(i.jsx)("span",{className:"text-muted small",children:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return M}));var r,a=n(10),i=n(12),c=n(1),s=n.n(c),o=n(2),u=n(3),l=n(4),h=n(15),d=n(5),f=n(6),p=n(9),v=n(8),b=n(19),m=n.n(b),j=n(26),y=n(39),O=n(49),k=function(e,t){Object(y.i)(e,t),O.a.setCenterToken(t)},x=n(21),g=n(0),w=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).reApi=Object(o.a)(s.a.mark((function t(){var n,r,a,i,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.clearError(),n=e.props,r=n.channel,a=n.url,i=n.options,c=n.resolve,o=n.reject,t.next=4,Object(x.j)(r,a,i,c,o);case 4:case"end":return t.stop()}}),t)}))),e.close=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.clearError();case 1:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.error,r=t.url;if("object"===typeof n){var a=[];for(var i in n)a.push(Object(g.jsxs)("li",{children:[Object(g.jsx)("label",{children:i}),Object(g.jsx)("div",{style:{wordWrap:"break-word"},children:n[i]})]},i));e=Object(g.jsx)("ul",{children:a})}else e=Object(g.jsx)("div",{children:n});return Object(g.jsx)("div",{className:"tv-page",children:Object(g.jsx)("article",{children:Object(g.jsxs)("main",{className:"va-error p-3",children:[Object(g.jsx)("div",{children:"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"}),Object(g.jsx)("div",{children:"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"}),Object(g.jsxs)("div",{style:{wordWrap:"break-word"},children:["url: ",r]}),e,Object(g.jsxs)("div",{className:"p-3 text-center",children:[Object(g.jsx)("button",{className:"btn btn-primary mr-3",type:"button",onClick:this.close,children:"\u5173\u95ed"}),Object(g.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:this.reApi,children:"\u91cd\u8bd5"})]})]})})})}}]),n}(p.Component),I=function(e){var t=e.message;return Object(g.jsx)(j.a,{header:"\u7cfb\u7edf\u63d0\u9192",children:Object(g.jsx)("div",{className:"px-3",children:t})})},C=n(13),S=n(59),N=n(65),A=n(94),_=(n(127),n(216),n(217),n(218),n(61)),D=n(79),P=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).timerHandler=void 0,r.reload=function(){clearInterval(r.timerHandler),M.reload()};var a=e.seconds;return void 0===a?Object(D.a)(r):(r.state={seconds:a},a<=0?Object(D.a)(r):(r.timerHandler=setInterval((function(){var e=r.state.seconds;--e<=0?r.reload():r.setState({seconds:e})}),1e3),r))}return Object(l.a)(n,[{key:"render",value:function(){var e,t;return this.state.seconds>0?(e="\u7a0b\u5e8f\u5347\u7ea7\u4e2d...",t=this.state.seconds+"\u79d2\u949f\u4e4b\u540e\u81ea\u52a8\u91cd\u542f\u52a8"):(e="\u7a0b\u5e8f\u9700\u8981\u5347\u7ea7",t="\u8bf7\u70b9\u51fb\u4e0b\u9762\u6309\u94ae\u91cd\u542f"),Object(g.jsx)(j.a,{header:!1,children:Object(g.jsxs)("div",{className:"text-center p-5",children:[Object(g.jsxs)("div",{className:"text-info py-5",children:[Object(g.jsx)("span",{className:"text-danger",children:e}),Object(g.jsx)("br",{}),t,Object(g.jsx)("br",{}),Object(g.jsx)("span",{className:"small text-muted",children:this.props.message})]}),Object(g.jsx)("button",{className:"btn btn-danger",onClick:this.reload,children:"\u7acb\u523b\u91cd\u542f"})]})})}}]),n}(p.Component),T=function(e){return Object(g.jsx)(j.a,{header:"\u5347\u7ea7\u8f6f\u4ef6",back:"close",children:Object(g.jsxs)("div",{className:"py-5 px-3 my-5 mx-2 border bg-white rounded",children:[Object(g.jsx)("div",{className:"text-center text-info",children:"\u5347\u7ea7\u5c06\u6e05\u9664\u6240\u6709\u672c\u673a\u7f13\u51b2\u533a\u5185\u5bb9\uff0c\u5e76\u4ece\u670d\u52a1\u5668\u91cd\u65b0\u5b89\u88c5\u7a0b\u5e8f\uff01"}),Object(g.jsx)("div",{className:"text-center mt-5",children:Object(g.jsx)("button",{className:"btn btn-danger mr-3",onClick:function(){return e.confirm(!0)},children:"\u786e\u8ba4\u5347\u7ea7"})})]})})},R=n(68),E=[],F=1,V=["IE"],L=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).stack=void 0,r.waitCount=0,r.waitTimeHandler=void 0,r.upgradeUq=function(){M.start()},r.isHistoryBack=!1,r.navBack=function(){var e=Date.now();r.isHistoryBack=!0,r.back(!0),r.isHistoryBack=!1,console.log("///\\\\ ".concat(Date.now()-e,"ms backbutton pressed - nav level: ").concat(r.stack.length))},r.back=Object(o.a)(s.a.mark((function e(){var t,n,a,i,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(c.length>0&&void 0!==c[0])||c[0],n=r.stack,0!==(a=n.length)){e.next=5;break}return e.abrupt("return");case 5:if(1!==a){e.next=8;break}return window.self!==window.top&&window.top.postMessage({type:"pop-app"},"*"),e.abrupt("return");case 8:if(i=n[a-1],!0!==t||!i.confirmClose){e.next=17;break}return e.next=12,i.confirmClose();case 12:if(e.t0=e.sent,!0!==e.t0){e.next=15;break}r.pop();case 15:e.next=18;break;case 17:r.pop();case 18:case"end":return e.stop()}}),e)}))),r.clearError=function(){r.setState({fetchError:void 0})},r.stack=[];var a=C.f.browser,i=V.findIndex((function(e){return e===a}))>=0;return r.state={notSupportedBrowser:i,stack:r.stack,wait:0,fetchError:void 0},M.set(Object(h.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.notSupportedBrowser){e.next=2;break}return e.abrupt("return");case 2:return window.addEventListener("popstate",this.navBack),e.next=5,M.init();case 5:return e.next=7,M.start();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"level",get:function(){return this.stack.length}},{key:"startWait",value:function(){var e=this;0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=C.f.setTimeout("NavView.startWait",(function(){e.waitTimeHandler=void 0,e.setState({wait:2})}),1e3)),++this.waitCount,this.setState({fetchError:void 0})}},{key:"endWait",value:function(){var e=this;C.f.setTimeout(void 0,(function(){--e.waitCount,0===e.waitCount&&(void 0!==e.waitTimeHandler&&(C.f.clearTimeout(e.waitTimeHandler),e.waitTimeHandler=void 0),e.setState({wait:0}))}),100)}},{key:"onError",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=t.error)){e.next=14;break}if(!0!==n.unauthorized){e.next=6;break}return e.next=5,M.showLogin(void 0);case 5:return e.abrupt("return");case 6:e.t0=n.type,e.next="unauthorized"===e.t0?9:"sheet-processing"===e.t0?12:14;break;case 9:return e.next=11,M.showLogin(void 0);case 11:return e.abrupt("return");case 12:return M.push(Object(g.jsx)(I,{message:"\u5355\u636e\u6b63\u5728\u5904\u7406\u4e2d\u3002\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01"})),e.abrupt("return");case 14:this.setState({fetchError:t});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.show(Object(g.jsx)(j.a,{header:!1,children:Object(g.jsxs)("div",{children:["UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",Object(g.jsx)("br",{}),Object(g.jsxs)("small",{className:"text-muted",children:[t," ver-",n]}),Object(g.jsx)("button",{className:"btn btn-primary",onClick:this.upgradeUq,children:"\u5347\u7ea7"})]})}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){return this.clear(),this.push(e,t)}},{key:"push",value:function(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);var n=F++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n}},{key:"replace",value:function(e,t){var n=void 0,r=this.stack;r.length>0&&(n=r.pop());var a=F++;return this.stack.push({key:a,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),a}},{key:"ceaseTop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack.length-1,n=0;n<e&&!(t<0);n++,t--){var r=this.stack[t];r.ceased=!0}}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack,n=t.length;if(!(e<=0||n<=1)){n<e&&(e=n);for(var r=0,a=0;a<e&&0!==t.length;a++)this.popAndDispose(),++r;r>=n&&r--,this.refresh(),this.isHistoryBack}}},{key:"popTo",value:function(e){if(void 0!==e&&void 0!==this.stack.find((function(t){return t.key===e})))for(;this.stack.length>0;){var t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}}},{key:"topKey",value:function(){var e=this.stack.length;if(0!==e)return this.stack[e-1].key}},{key:"removeCeased",value:function(){for(;;){var e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;var t=this.stack.pop().disposer;this.dispose(t)}this.refresh()}},{key:"popAndDispose",value:function(){this.removeCeased();var e=this.stack.pop();if(void 0!==e){var t=e.disposer;return this.dispose(t),this.removeCeased(),e}}},{key:"dispose",value:function(e){void 0!==e&&(void 0===this.stack.find((function(t){return t.disposer===e}))&&e())}},{key:"clear",value:function(){for(this.stack.length;this.stack.length>0;)this.popAndDispose()}},{key:"regConfirmClose",value:function(e){var t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)}},{key:"confirmBox",value:function(e){return window.confirm(e)}},{key:"render",value:function(){var e=this.state,t=e.notSupportedBrowser,n=e.wait,r=e.fetchError;if(!0===t)return Object(g.jsxs)("div",{className:"p-3 text-danger",children:[C.f.browser," not supported !"]});var a=this.state.stack,c=a.length-1,s=null,o=null;switch(n){case 1:s=Object(g.jsx)("div",{className:"va-wait va-wait1"});break;case 2:s=Object(g.jsx)("div",{className:"va-wait va-wait2",children:Object(g.jsx)(N.a,{})})}r&&(o=Object(g.jsx)(w,Object(i.a)({clearError:this.clearError},r)),++c);var u=!0===M.testing&&Object(g.jsx)("span",{className:"cursor-pointer position-fixed",style:{top:0,left:"0.2rem",zIndex:90001},children:Object(g.jsx)(_.a,{className:"text-warning",name:"info-circle"})});return Object(g.jsxs)(g.Fragment,{children:[a.map((function(e,t){var n=e.key,r=e.view;return Object(g.jsx)("div",{style:t<c?{visibility:"hidden",position:"absolute"}:void 0,children:r},n)})),s,o,u]})}},{key:"refresh",value:function(){this.setState({stack:this.stack})}}]),n}(p.Component),M=new(function(){function e(){var t=this;Object(u.a)(this,e),this.navView=void 0,this.wsHost=void 0,this.local=new C.a,this.navigo=void 0,this.navSettings=void 0,this.user=null,this.testing=void 0,this.language=void 0,this.culture=void 0,this.resUrl=void 0,this.hashParam=void 0,this.centerHost=void 0,this.arrs=["/test","/test/"],this.windowOnError=function(e,t,n,r,a){console.error("windowOnError"),console.error(a)},this.windowOnUnhandledRejection=function(e){console.error("windowOnUnhandledRejection"),console.error(e.reason)},this.windowOnClick=function(e){console.error("windowOnClick")},this.windowOnMouseMove=function(e){console.log("navigator.userAgent: "+navigator.userAgent),console.log("mouse move (%s, %s)",e.x,e.y)},this.windowOnScroll=function(e){console.log("scroll event")},this.forceDevelopment=void 0,this.reloadUser=function(){var e=t.local.user.get(),n=M.user;(e||n)&&(null===e||void 0===e?void 0:e.id)!==(null===n||void 0===n?void 0:n.id)&&(e?M.logined(e):M.logout())},this.navLogin=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.showLogin(function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.history.back());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navLogout=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.showLogout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.history.back());case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navRegister=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.showRegister();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navForget=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.showForget();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navPageRoutes=void 0,this.doneSysRoutes=!1,this.sysRoutes={"/login":this.navLogin,"/logout":this.navLogout,"/register":this.navRegister,"/forget":this.navForget},this.isWebNav=!1,this.backIcon=Object(g.jsx)("i",{className:"fa fa-angle-left"}),this.closeIcon=Object(g.jsx)("i",{className:"fa fa-close"}),this.pageWebNav=void 0,this.onChangeLogin=void 0,this.showPrivacyPage=function(){var e=t.getPrivacyContent();e?t.privacyPage(e):M.push(Object(g.jsx)(j.a,{header:"\u9690\u79c1\u653f\u7b56",children:Object(g.jsx)("div",{className:"p-3",children:"AppConfig \u4e2d\u6ca1\u6709\u5b9a\u4e49 privacy\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u5b57\u7b26\u4e32\uff0c\u6216\u8005url\u3002markdown\u683c\u5f0f"})}))},this.privacyPage=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={__html:t},M.push(Object(g.jsx)(j.a,{header:"\u9690\u79c1\u653f\u7b56",children:Object(g.jsx)("div",{className:"p-3",dangerouslySetInnerHTML:n})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createLogin=R.a,this.login=void 0,this.reload=Object(o.a)(s.a.mark((function e(){var t,n,r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Promise((function(e,t){setTimeout(e,100)})),!("serviceWorker"in navigator)){e.next=6;break}return e.next=4,Promise.race([t,navigator.serviceWorker.ready]);case 4:(n=e.sent)&&n.unregister();case 6:window.document.location.reload(),(r=window.plus)&&((a=r.webview)?a.reload&&a.reload(!0):(i=r.webView)&&i.reload&&i.reload(!0));case 9:case"end":return e.stop()}}),e)}))),this.resetAll=function(){t.push(Object(g.jsx)(T,{confirm:function(e){!0===e?(t.showReloadPage("\u5f7b\u5e95\u5347\u7ea7"),localStorage.clear()):t.pop()}}))},Object(v.o)(this,{user:v.p});var n=S.b.lang,r=S.b.district;this.language=n,this.culture=r,this.testing=!1}return Object(l.a)(e,[{key:"guest",get:function(){var e=this.local.guest;if(void 0===e)return 0;var t=e.get();return void 0===t?0:t.guest}},{key:"set",value:function(e){this.navView=e}},{key:"onReceive",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.i.dispatch(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUnitJson",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.unitJsonPath(),e.next=4,fetch(t,{});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.unit);case 11:return e.prev=11,e.t0=e.catch(0),this.local.unit.remove(),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPredefinedUnitName",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("unit"))){e.next=3;break}return e.abrupt("return",t.innerText);case 3:if(t=document.getElementById("unit.json")){e.next=8;break}return e.next=7,this.loadUnitJson();case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,n=t.innerHTML,r=JSON.parse(n),e.abrupt("return",r.unit);case 14:return e.prev=14,e.t0=e.catch(8),e.next=18,this.loadUnitJson();case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadPredefinedUnit",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"24",e.abrupt("return",Number("24"));case 3:if(void 0===(n=this.local.unit.get())){e.next=16;break}if(!0===C.f.isDevelopment){e.next=7;break}return e.abrupt("return",n.id);case 7:return e.next=9,this.getPredefinedUnitName();case 9:if(void 0!==(t=e.sent)){e.next=12;break}return e.abrupt("return");case 12:if(n.name!==t){e.next=14;break}return e.abrupt("return",n.id);case 14:e.next=21;break;case 16:return e.next=18,this.getPredefinedUnitName();case 18:if(void 0!==(t=e.sent)){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,x.f.unitFromName(t);case 23:return void 0!==(r=e.sent)&&this.local.unit.set({id:r,name:t}),e.abrupt("return",r);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(e){this.navSettings=e;var t=e.htmlTitle;t&&(document.title=t);var n=document.getElementsByTagName("html")[0];if(n)null===n||void 0===n||n.getAttribute("data-version")}},{key:"oem",get:function(){return this.navSettings&&this.navSettings.oem}},{key:"unitJsonPath",value:function(){var e=document.location,t=e.origin,n=e.pathname;n=n.toLowerCase();var r,i=Object(a.a)(this.arrs);try{for(i.s();!(r=i.n()).done;){var c=r.value;if(!0===n.endsWith(c)){n=n.substr(0,n.length-c.length);break}}}catch(s){i.e(s)}finally{i.f()}return!0!==n.endsWith("/")&&!0!==n.endsWith("\\")||(n=n.substr(0,n.length-1)),t+n+"/unit.json"}},{key:"init",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.testing=C.f.testing,!0===this.forceDevelopment&&(C.f.isDevelopment=!0),e.next=4,x.g.start(this.testing);case 4:if(t=x.g.url,n=x.g.ws,r=x.g.resHost,this.centerHost=t,this.resUrl=Object(x.k)(r),this.wsHost=n,Object(x.m)(t),void 0!==(a=this.local.guest.get())){e.next=14;break}return e.next=13,x.f.guest();case 13:a=e.sent;case 14:if(a){e.next=17;break}throw Error("guest can not be undefined");case 17:M.setGuest(a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,a,i,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.onerror=this.windowOnError,window.onunhandledrejection=this.windowOnUnhandledRejection,window.onfocus=this.reloadUser,!0===C.f.isMobile&&(document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1}),M.clear(),this.startWait(),void 0!==(t=this.local.user.get())){e.next=30;break}if(!(n=this.navView.props.userPassword)){e.next=20;break}return e.next=13,n();case 13:if(!(r=e.sent)){e.next=20;break}return a=r.user,i=r.password,e.next=18,x.n.login({user:a,pwd:i,guest:M.guest});case 18:c=e.sent,t=c;case 20:if(void 0!==t){e.next=30;break}if(void 0===(o=this.navView.props.notLogined)){e.next=27;break}return e.next=25,o();case 25:e.next=29;break;case 27:return e.next=29,M.showLogin(void 0);case 29:return e.abrupt("return");case 30:return e.next=32,M.logined(t);case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(0),console.error(e.t0);case 38:return e.prev=38,this.endWait(),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[0,34,38,41]])})));return function(){return e.apply(this,arguments)}}()},{key:"resolveRoute",value:function(){void 0!==this.navigo&&this.navigo.resolve()}},{key:"on",value:function(){return void 0===this.navigo&&(this.navigo=new A.a,!0!==this.isWebNav&&this.navigo.historyAPIUpdateMethod("replaceState")),this.navigo.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"navigateToLogin",value:function(){M.navigate("/login")}},{key:"openSysPage",value:function(e){var t=this.sysRoutes[e];return void 0!==t&&(t(void 0),!0)}},{key:"routeFromNavPage",value:function(e){var t=this;return function(n,r){e&&(t.isWebNav&&M.clear(),e(n))}}},{key:"onNavRoute",value:function(e){this.on(this.routeFromNavPage(e))}},{key:"onNavRoutes",value:function(e){!1===this.doneSysRoutes&&(this.doneSysRoutes=!0,this.internalOnNavRoutes(this.sysRoutes)),this.internalOnNavRoutes(e)}},{key:"internalOnNavRoutes",value:function(e){if(e){this.navPageRoutes=m.a.merge(this.navPageRoutes,e);var t={};for(var n in e){var r=e[n];t[n]=this.routeFromNavPage(r)}this.on(t)}}},{key:"setIsWebNav",value:function(){this.isWebNav=!0,this.backIcon=Object(g.jsx)("i",{className:"fa fa-arrow-left"}),this.closeIcon=Object(g.jsx)("i",{className:"fa fa-close"})}},{key:"navigate",value:function(e,t){if(this.navigo)return!0===this.testing&&(e+="#test"),this.navigo.navigate(e,t);alert('Is not in webnav state, cannot navigate to url "'+e+'"')}},{key:"go",value:function(e,t,n){void 0!==this.navigo?this.navigate(t,n):e()}},{key:"showAppView",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.navView.props.onLogined)){e.next=4;break}return M.push(Object(g.jsx)("div",{children:"NavView has no prop onLogined"})),e.abrupt("return");case 4:return M.clear(),e.next=7,n(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuest",value:function(e){this.local.guest.set(e),k(0,e.token)}},{key:"saveLocalUser",value:function(){this.local.user.set(this.user)}},{key:"setUqRoles",value:function(e,t){this.user.roles||(this.user.roles={}),this.user.roles[e]=t,this.local.user.set(this.user)}},{key:"loadMe",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.n.me();case 2:t=e.sent,this.user.icon=t.icon,this.user.nick=t.nick;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalLogined",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(x.h)(),this.user=t,this.saveLocalUser(),k(t.id,t.token),M.clear(),e.next=7,null===(a=this.onChangeLogin)||void 0===a?void 0:a.call(this,this.user);case 7:if(void 0===n){e.next=12;break}return e.next=10,n(t);case 10:e.next=18;break;case 12:if(!0!==this.isWebNav){e.next=16;break}this.navigate("/index"),e.next=18;break;case 16:return e.next=18,this.showAppView(r);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"logined",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalLogined(t,n,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"userLogined",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalLogined(t,n,!0);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loginTop",value:function(e){return this.navSettings&&this.navSettings.loginTop||e}},{key:"privacyEntry",value:function(){if(this.getPrivacyContent())return Object(g.jsx)("div",{className:"text-center",children:Object(g.jsx)("button",{className:"btn btn-sm btn-link",onClick:this.showPrivacyPage,children:Object(g.jsx)("small",{className:"text-muted",children:"\u9690\u79c1\u653f\u7b56"})})})}},{key:"getPrivacyContent",value:function(){if(this.navSettings)return this.navSettings.privacy}},{key:"setCreateLogin",value:function(e){this.createLogin=e}},{key:"getLogin",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.login){e.next=2;break}return e.abrupt("return",this.login);case 2:return e.next=4,this.createLogin();case 4:return e.abrupt("return",this.login=e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showLogin",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showLogin(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLogout",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showLogout(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showRegister",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(R.c)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showForget",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(R.b)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.local.logoutClear(),this.user=void 0,Object(x.h)(),r=this.local.guest.get(),Object(x.l)(0,r&&r.token),this.clear(),void 0!==t){e.next=11;break}return e.next=9,M.start();case 9:e.next=13;break;case 11:return e.next=13,t();case 13:null===(n=this.onChangeLogin)||void 0===n||n.call(this,void 0);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showChangePassword();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"level",get:function(){return this.navView.level}},{key:"startWait",value:function(){var e;null===(e=this.navView)||void 0===e||e.startWait()}},{key:"endWait",value:function(){var e;null===(e=this.navView)||void 0===e||e.endWait()}},{key:"onError",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navView.onError(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navView.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){this.navView.show(e,t)}},{key:"push",value:function(e,t){this.navView.push(e,t)}},{key:"replace",value:function(e,t){this.navView.replace(e,t)}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.navView.pop(e)}},{key:"topKey",value:function(){return this.navView.topKey()}},{key:"popTo",value:function(e){this.navView.popTo(e)}},{key:"clear",value:function(){var e;null===(e=this.navView)||void 0===e||e.clear()}},{key:"navBack",value:function(){this.navView.navBack()}},{key:"ceaseTop",value:function(e){this.navView.ceaseTop(e)}},{key:"removeCeased",value:function(){this.navView.removeCeased()}},{key:"back",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],e.next=3,this.navView.back(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"regConfirmClose",value:function(e){this.navView.regConfirmClose(e)}},{key:"confirmBox",value:function(e){return this.navView.confirmBox(e)}},{key:"logs",get:function(){return E}},{key:"log",value:function(e){E.push(e)}},{key:"logMark",value:function(){var e=new Date;r=e.getTime(),E.push("log-mark: "+e.toTimeString())}},{key:"logStep",value:function(e){E.push(e+": "+((new Date).getTime()-r))}},{key:"showReloadPage",value:function(e){this.push(Object(g.jsx)(P,{message:e,seconds:-1}))}},{key:"checkVersion",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,a,i,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.location.href,t+=(t.indexOf("?")>=0?"&":"?")+"_t_t_="+(new Date).getTime(),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.text();case 7:return r=e.sent,a=new DOMParser,i=a.parseFromString(r,"text/html"),c=i.getElementsByTagName("html"),o=c[0].getAttribute("data-version"),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}())},,,function(e,t,n){"use strict";n.d(t,"j",(function(){return r.b})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"h",(function(){return d.h})),n.d(t,"d",(function(){return d.d})),n.d(t,"c",(function(){return d.c})),n.d(t,"m",(function(){return d.j})),n.d(t,"l",(function(){return d.i})),n.d(t,"b",(function(){return d.b})),n.d(t,"n",(function(){return d.l})),n.d(t,"k",(function(){return v.b})),n.d(t,"g",(function(){return v.a})),n.d(t,"i",(function(){return b.a})),n.d(t,"e",(function(){return m}));n(49);var r=n(74),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(5),l=n(6),h=n(55),d=n(39),f=new(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"guest",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("",{});case 2:t=e.sent,e.t0=typeof t,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(h.a)(t));case 8:return n=Object(h.a)(t.token),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unitFromName",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return n=e.sent,e.abrupt("return",n&&n.unit);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a))("tv/guest/",void 0),p=function(){function e(t,n){Object(s.a)(this,e),this._params=void 0,this.method="POST",this.waiting=void 0,this._params=t,this.waiting=n}return Object(o.a)(e,[{key:"params",get:function(){return this._params}},{key:"buildParams",value:function(){return this.params}},{key:"headers",get:function(){}}]),e}(),v=(n(45),n(56)),b=n(93),m=new(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"userAppUnits",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/user-name-nick-icon-from-id",{userId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromKey",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-from-key",{key:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a))("tv/",void 0)},function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(27),a=n.n(r),i=n(13),c="\x1b[41m%s\x1b[0m",s=0;function o(e,t,n,r){h("".concat(e.uqTsSrcPath,"/").concat(t,".").concat(n),r)}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ts",i=e.uqTsSrcPath,o="".concat(i,"/").concat(t,".").concat(r,".txt"),u="".concat(i,"/").concat(t,".").concat(r);a.a.existsSync(o)||a.a.existsSync(u)&&a.a.renameSync(u,o),a.a.writeFileSync(u,n),s=Date.now(),console.log(c,"".concat(u," is built"))}function l(e,t){a.a.writeFileSync(e,t),s=Date.now(),console.log(c,"".concat(e," is built"))}function h(e,t){!0!==a.a.existsSync(e)&&l(e,t)}function d(){return"//=== UqApp builder created on ".concat(new Date," ===//")}function f(e){return Object(i.d)(e)}function p(e){var t,n,r=e.config;if(r){var a=r.dev,c=r.name,s=r.alias,o=a.name;t=a.alias||o,n=s||c}else{t=e.uqOwner,n=e.uqName}return{devName:Object(i.d)(t),uqName:Object(i.d)(n)}}},,,function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p}));var r=n(7),a=n(0);function i(e,t,n){var r,i,c="px-2 px-sm-3 mb-1 text-right ",s=c+"c5";if(!0===isNaN(t))r="-";else switch(n){case"p0":r=void 0===(i=t)||isNaN(i)?"":(100*i).toFixed(0)+"%";break;case"p1":r=function(e){return void 0===e||isNaN(e)?"":(100*e).toFixed(1)+"%"}(t);break;case"n1":r=f(t,1);break;case"n2":r=f(t,2);break;case"yi":r=function(e){return void 0===e||isNaN(e)?"":Math.round(e/1e4).toString()}(t),s="px-2 px-sm-3 mb-1 text-right c5"}return Object(a.jsxs)("div",{className:s,children:[Object(a.jsx)("span",{className:"text-muted small",children:e}),Object(a.jsx)("br",{}),r]},e)}function c(e){var t=e.name,n=e.no,r=e.$market;return Object(a.jsxs)(a.Fragment,{children:[r&&Object(a.jsxs)(a.Fragment,{children:[r.el,"\xa0"]}),Object(a.jsx)("span",{className:"text-primary",children:t}),"\xa0",Object(a.jsx)("span",{className:"text-info",children:n}),"\xa0"]})}var s=Object(a.jsx)("small",{children:"%"});function o(e,t,n,s){for(var o=t.roe,u=t.price,l=t.dvRate,h=t.miRate,d=t.volumn,p=t.ttm,v=t.inc1,b=t.inc2,m=t.inc3,j=t.inc4,y=t.preInc,O=t.smoothness,k=[0,0,0,0],x=2;x<=O;x++)k[x-2]=1;var g=Object(a.jsxs)("div",{className:"cursor-pointer align-self-center flex-grow-1",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[e&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("small",{className:"mr-2 text-danger",children:e}),"\xa0"]}),c(t),Object(a.jsx)("div",{className:"bg-light px-3 small d-block d-sm-inline-block",children:k.map((function(e,t){return 1===e?Object(a.jsx)(r.FA,{name:"star-o",className:"small px-1 "+(1===e?"text-warning":"text-muted")},t):null}))})]}),w=[["TTM",p,"n1"],["\u5e74\u606f\u7387",l/100,"p1"],["\u4ef7\u683c",u,"n2"],["ROE",o,"n1"],["\u5747\u589e",y/100,"p0"],["\u73b0\u589e",j/100,"p0"],["\u589e 1",m/100,"p0"],["\u589e 2",b/100,"p0"],["\u589e 3",v/100,"p0"],["\u5e02\u503c",d*u,"yi"]];return Object(a.jsxs)("div",{className:"d-block border-top",children:[Object(a.jsxs)("div",{className:"d-flex px-2 py-1 bg-light",children:[g,s]}),Object(a.jsxs)("div",{className:"d-flex flex-wrap p-1",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(a.jsxs)("div",{className:"px-2 px-sm-3 mb-1 text-right c5",children:[Object(a.jsx)("span",{className:"small",children:"\u7c73\u606f\u7387"}),Object(a.jsx)("br",{}),f(h,1)]}),w.map((function(e){return i(e[0],e[1],e[2])}))]})]})}function u(e){return e.toLocaleString(void 0,l)}var l={minimumFractionDigits:0,maximumFractionDigits:0},h={minimumFractionDigits:1,maximumFractionDigits:1},d={minimumFractionDigits:2,maximumFractionDigits:2};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e||null===e?"-":e.toFixed(t)}n(17);function p(e,t,n){return Object(a.jsx)("span",{className:"",children:n(e,t)})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,a=n(3),i=n(4),c=n(5),s=n(6),o=n(9),u=n(11),l=n(95),h=n(96),d=n(58),f=n(18),p=n(0),v=Object(u.a)(r=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).tabsView=void 0;var i=e.tabsProps;return i&&(r.tabsView=new h.b(i)),r}return Object(i.a)(n,[{key:"renderHeader",value:function(e){var t=this.props,n=t.back,r=t.header,a=t.right,i=t.headerClassName,c=t.afterBack,s=t.logout;if(!1!==r){var o=!1,u={back:n,center:r,right:a,logout:s,className:i,afterBack:c};if(void 0!==e){o=!0;var h=e.renderPageHeader;if(h)return h(u)}else o=!1;return Object(l.a)(u,o)}}},{key:"renderFooter",value:function(e){var t=this.props.footer;if(t){var n=Object(p.jsx)("footer",{children:t});return e?n:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{className:"tv-page-footer",children:n}),n]})}}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){if(this.tabsView)return o.createElement(this.tabsView.content);var e,t=this.props,n=t.onScroll,r=t.onScrollTop,a=t.onScrollBottom,i=t.children,c=t.className,s=t.webNav;e=s||f.b.pageWebNav;var u=Object(p.jsxs)(p.Fragment,{children:[this.renderHeader(e),Object(p.jsx)("main",{children:i}),this.renderFooter(e)]});return e?Object(p.jsx)(d.b,{onScroll:n,onScrollTop:r,onScrollBottom:a,className:c,webNav:e,children:u}):Object(p.jsx)(d.a,{onScroll:n,onScrollTop:r,onScrollBottom:a,className:c,children:u})}}]),n}(o.Component))||r},,function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return w}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(7),h=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,!0)).pageLoader=void 0,r.pageLoader=e,r}return Object(s.a)(n,[{key:"loadResults",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageLoader(n,r);case 2:return i=e.sent,e.abrupt("return",{$page:i});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(l.PageItems),d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,!0)).pageLoader=void 0,r.pageLoader=e,r}return Object(s.a)(n,[{key:"loadResults",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,c=t.field,s=t.far,o=t.near,e.next=3,this.pageLoader(i,c,s,o,n,r);case 3:return u=e.sent,e.abrupt("return",{$page:u});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){}}]),n}(l.PageItems),f=n(10),p=function(){function e(){Object(c.a)(this,e),this.firstNear=void 0,this.far=void 0,this.near=void 0,this.type=void 0}return Object(s.a)(e,[{key:"canNext",get:function(){return this.near<this.firstNear}},{key:"canPrev",get:function(){return!0}},{key:"getDayValues",value:function(e){var t,n=this.getDayArray(),r=[],a=0,i=e[a++],c=Object(f.a)(n);try{for(c.s();!(t=c.n()).done;){var s=t.value;if(i){var o=i,u=o.t,l=o.v,h=new Date(u);if(h.setMinutes(h.getMinutes()+h.getTimezoneOffset()),h.getTime()===s.getTime()){r.push(l),i=e[a++];continue}}r.push(0)}}catch(d){c.e(d)}finally{c.f()}return r}}],[{key:"create",value:function(e){var t;switch(e){case"day":t=new v;break;case"week":t=new j;break;case"month":t=new y;break;case"year":t=new O}return t}}]),e}(),v=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n),(e=t.call(this)).date=void 0,e._labels=[],e.type="day",e.date=new Date,e.date.setHours(0,0,0,0),e.far=e.date.getTime(),e.firstNear=e.near=e.far+864e5;for(var r=0;r<24;r++)e._labels.push(r+":00");return e}return Object(s.a)(n,[{key:"prev",value:function(){this.far-=864e5,this.near-=864e5}},{key:"next",value:function(){this.far+=864e5,this.near+=864e5}},{key:"title",get:function(){return this.date.toLocaleDateString()}},{key:"labels",get:function(){return this._labels}},{key:"getDayArray",value:function(){return[this.date]}}]),n}(p),b=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],m=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"],j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n),(e=t.call(this)).firstDay=void 0,e.lastDay=void 0,e._labels=void 0,e.type="week",e.firstDay=new Date,e.firstDay.setHours(0,0,0,0);var r=e.firstDay.getDay()||7;switch(1!==r&&e.firstDay.setHours(-24*(r-1)),e.far=e.firstDay.getTime(),e.firstNear=e.near=e.far+6048e5,e.lastDay=new Date,e.lastDay.setDate(e.firstDay.getDate()+7),l.env.lang){default:case"en":e._labels=b;break;case"zh":e._labels=m}return e}return Object(s.a)(n,[{key:"prev",value:function(){this.firstDay.setDate(this.firstDay.getDate()-7),this.lastDay.setDate(this.lastDay.getDate()-7),this.far-=6048e5,this.near-=6048e5}},{key:"next",value:function(){this.firstDay.setDate(this.firstDay.getDate()+7),this.lastDay.setDate(this.lastDay.getDate()+7),this.far+=6048e5,this.near+=6048e5}},{key:"title",get:function(){return this.firstDay.toLocaleDateString()}},{key:"labels",get:function(){return this._labels}},{key:"getDayArray",value:function(){for(var e=new Date(this.firstDay),t=[this.firstDay];e.setDate(e.getDate()+1),!(e>=this.lastDay);)t.push(new Date(e));return t}}]),n}(p),y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n),(e=t.call(this)).firstDay=void 0,e.lastDay=void 0,e._labels=void 0,e.type="month";var r=new Date;return e.initFromDate(r),e.firstNear=e.near,e}return Object(s.a)(n,[{key:"initFromDate",value:function(e){var t=e.getFullYear(),n=e.getMonth();this.firstDay=new Date(t,n,1),this.lastDay=new Date(t,n+1,0),this.far=this.firstDay.getTime(),this.near=new Date(t,n+1,1).getTime(),this._labels=[];for(var r=this.lastDay.getDate(),a=1;a<=r;a++)this._labels.push(String(a))}},{key:"prev",value:function(){var e=new Date(this.firstDay.setMonth(this.firstDay.getMonth()-1));this.initFromDate(e)}},{key:"next",value:function(){var e=new Date(this.firstDay.setMonth(this.firstDay.getMonth()+1));this.initFromDate(e)}},{key:"title",get:function(){return this.firstDay.toLocaleDateString()}},{key:"labels",get:function(){return this._labels}},{key:"getDayArray",value:function(){for(var e=new Date(this.firstDay),t=[this.firstDay];e.setDate(e.getDate()+1),!(e>=this.lastDay);)t.push(new Date(e));return t}}]),n}(p),O=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n),(e=t.call(this)).firstDay=void 0,e.lastDay=void 0,e._labels=[],e.type="year";var r=new Date;e.initFromDate(r),e.firstNear=e.near;for(var a=0;a<=12;a++)e._labels.push(String(a));return e}return Object(s.a)(n,[{key:"initFromDate",value:function(e){var t=e.getFullYear();this.firstDay=new Date(t,0,1),this.lastDay=new Date(t,1,0),this.far=this.firstDay.getTime(),this.near=new Date(t,1,1).getTime()}},{key:"prev",value:function(){var e=new Date(this.firstDay.setMonth(this.firstDay.getMonth()-1));this.initFromDate(e)}},{key:"next",value:function(){var e=new Date(this.firstDay.setMonth(this.firstDay.getMonth()+1));this.initFromDate(e)}},{key:"title",get:function(){return this.firstDay.toLocaleDateString()}},{key:"labels",get:function(){return this._labels}},{key:"getDayArray",value:function(){for(var e=new Date(this.firstDay),t=[this.firstDay];e.setDate(e.getDate()+1),!(e>=this.lastDay);)t.push(new Date(e));return t}}]),n}(p),k=n(0);function x(e){return Object(k.jsx)("button",{className:"btn btn-sm btn-success mr-2",onClick:e,children:Object(k.jsx)(l.FA,{name:"plus"})})}function g(e,t){return Object(k.jsx)(k.Fragment,{children:JSON.stringify(e)})}function w(e){return Object(k.jsx)("div",{className:"px-3 py-2",children:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return y}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(7),h=n(28),d=n(0),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,{})).listPageProps=void 0,r.listPageProps=e,r}return Object(s.a)(n,[{key:"render",value:function(){return this.renderPage()}},{key:"renderPage",value:function(){var e=this,t=this.listPageProps,n=t.pageItems,r=t.itemClick,a=t.renderItem,i=t.renderItemContainer,c=t.key,s=t.header,o=t.footer,u=t.right,h=t.top,f=t.bottom,p=t.back,v=t.className,b=t.headerClassName;s||(s=!1);var m={render:function(e,t){return i(a(e,t))},onClick:r,key:c};return Object(d.jsxs)(l.Page,{header:s,right:u,footer:o,onScroll:function(t){return e.onPageScroll(t)},onScrollTop:function(t){return e.onPageScrollTop(t)},onScrollBottom:function(t){return e.onPageScrollBottom(t)},back:p,headerClassName:b,className:v,afterBack:function(){return e.afterBack()},children:[h,Object(d.jsx)(l.List,{items:n,item:m}),f]})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}}]),n}(l.Page),p=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).midList=void 0,r.selectedItem=void 0,r.listPageProps=void 0,r.setRes(e.res),r.midList=e,r}return Object(s.a)(n,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.midList.init();case 2:t=this.midList.pageItems,n={header:this.header,pageItems:t,key:this.midList.key,itemClick:function(e){return r.onItemClick(e)},right:this.renderRight(),renderItem:function(e,t){return r.renderItem(e,t)},renderItemContainer:function(e){return r.renderItemContainer(e)}},t.first(this.firstParam),this.listPageProps=n;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:t=new f(this.listPageProps),this.openPage(t.render(),(function(){return n.returnCall(n.selectedItem)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"firstParam",get:function(){}},{key:"header",get:function(){var e;return null!==(e=this.midList.header)&&void 0!==e?e:"List"}},{key:"renderItemContainer",value:function(e){return Object(h.f)(e)}},{key:"onItemClick",value:function(e){this.midList.onItemClick(e)}},{key:"renderRight",value:function(){var e=this.midList,t=e.renderRight,n=e.onRightClick;return n?(null!==t&&void 0!==t?t:h.d)(n):null}},{key:"renderItem",value:function(e,t){var n;return(null!==(n=this.midList.renderItem)&&void 0!==n?n:h.e)(e,t)}}]),n}(l.Controller),v=n(12),b=n(8),m=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this,e,r)).pageItems=void 0,a.key=void 0,a.onRightClick=void 0,a.renderItem=void 0,a.onItemClick=void 0,a.renderRight=void 0,a.header=void 0,a.renderTop=void 0,a.renderBottom=void 0,a.pageItems=a.createPageItems(),a}return Object(s.a)(n,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(41).Mid),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).key=function(e){return e.id},e}return Object(s.a)(n,[{key:"listPageItems",get:function(){return this.pageItems}},{key:"createPageItems",value:function(){var e=this;return new y((function(t,n){return e.loadPageItems(t,n)}))}}]),n}(m),y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"itemId",value:function(e){return e.id}},{key:"newItem",value:function(e,t){return Object(v.a)(Object(v.a)({},t),{},{id:e})}},{key:"update",value:function(e){var t=this,n=e.id,r=this._items.find((function(e){return t.itemId(e)===n}));if(void 0===r){var a=this.newItem(n,e);this._items.unshift(a)}else Object(b.r)((function(){Object.assign(r,e)}))}}]),n}(h.b)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return O}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(19),u=n.n(o),l=n(14),h=n(37),d=n(13),f=n(21),p=n(0),v=function(){function e(){var t=this;Object(c.a)(this,e),this.res={},this.t=function(e){return t.internalT(e)||e},this.icon=void 0,this.label=void 0,this.isDev=d.f.isDevelopment,this.pageWebNav=void 0,this.receiveHandlerId=void 0,this.dispose=function(){f.i.unregisterReceiveHandler(t.receiveHandlerId),t.onDispose()},this.onMessageReceive=function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onMessage(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resolve_$=void 0,this.topPageKey=void 0}return Object(s.a)(e,[{key:"user",get:function(){return l.nav.user}},{key:"isLogined",get:function(){var e=l.nav.user;return!!e&&e.id>0}},{key:"beforeInit",value:function(){}},{key:"afterInit",value:function(){}},{key:"init",value:function(){this.beforeInit(),this.pageWebNav=this.getPageWebNav(),this.afterInit()}},{key:"internalT",value:function(e){var t,n;return null!==(t=null===(n=this.res)||void 0===n?void 0:n[e])&&void 0!==t?t:Object(h.g)(e)}},{key:"webNav",get:function(){}},{key:"getWebNav",value:function(){return this.webNav}},{key:"getPageWebNav",value:function(){}},{key:"isWebNav",get:function(){return l.nav.isWebNav}},{key:"navigate",value:function(e){l.nav.navigate(e)}},{key:"setRes",value:function(e){if(void 0!==e){var t=h.d.$lang,n=h.d.$district;if(u.a.merge(this.res,e),void 0!==t){var r=e[t];if(void 0!==r){u.a.merge(this.res,r);var a=r[n];void 0!==a&&u.a.merge(this.res,a)}}}}},{key:"getRes",value:function(){return this.res}},{key:"onDispose",value:function(){}},{key:"timeZone",get:function(){return d.f.timeZone}},{key:"isMe",value:function(e){if(null===e)return!1;var t=this.user.id;switch(typeof e){default:return!1;case"string":return Number(e)===t;case"number":return e===t;case"object":return e.id===t}}},{key:"openVPage",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t(this),e.next=3,i.open(n,r);case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"replaceVPage",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t(this),e.next=3,i.replaceOpen(n,r);case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"renderView",value:function(e,t){return new e(this).render(t)}},{key:"event",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onEvent(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEvent",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"msg",value:function(e){alert(e)}},{key:"errorPage",value:function(e,t){this.openPage(Object(p.jsx)(l.Page,{header:"App error!",children:Object(p.jsx)("pre",{children:"string"===typeof t?t:t.message})}))}},{key:"onMessage",value:function(e){}},{key:"beforeStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"registerReceiveHandler",value:function(){this.receiveHandlerId=f.i.registerReceiveHandler(this.onMessageReceive)}},{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerReceiveHandler(),e.next=3,this.beforeStart();case 3:if(!1!==e.sent){e.next=6;break}return e.abrupt("return");case 6:for(n=c.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=c[i];return e.next=9,this.internalStart.apply(this,[t].concat(r));case 9:return e.next=11,this.afterStart();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isCalling",get:function(){return void 0!==this._resolve_$}},{key:"call",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,s=this,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=o[c];return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(n,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s._resolve_$.push(n),e.next=3,s.start.apply(s,[t].concat(r));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vCall",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(i,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._resolve_$.push(i),e.next=3,new t(r).open(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){if(void 0!==this._resolve_$){var t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}}},{key:"openPage",value:function(e,t){var n;void 0!==t&&(n=function(){t(void 0)}),l.nav.push(e,n)}},{key:"replacePage",value:function(e,t){l.nav.replace(e,t)}},{key:"backPage",value:function(){l.nav.back()}},{key:"closePage",value:function(e){l.nav.pop(e)}},{key:"ceasePage",value:function(e){l.nav.ceaseTop(e)}},{key:"go",value:function(e,t,n){l.nav.go(e,t,n)}},{key:"removeCeased",value:function(){l.nav.removeCeased()}},{key:"regConfirmClose",value:function(e){l.nav.regConfirmClose(e)}},{key:"startAction",value:function(){this.topPageKey=l.nav.topKey()}},{key:"TopKey",get:function(){return this.topPageKey}},{key:"SetTopKey",value:function(e){this.topPageKey=e}},{key:"popToTopPage",value:function(){l.nav.popTo(this.topPageKey)}},{key:"confirm",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(r,c){var s,o,u,h,d,f,v,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.caption,o=t.message,u=t.ok,h=t.yes,d=t.no,f=t.classNames,v=function(e){n.closePage(),r(e)},b=[],void 0!==u&&b.push(Object(p.jsx)("button",{className:"btn btn-primary mr-3",onClick:function(){return v("ok")},children:u},"ok")),void 0!==h&&b.push(Object(p.jsx)("button",{className:"btn btn-success mr-3",onClick:function(){return v("yes")},children:h},"yes")),void 0!==d&&b.push(Object(p.jsx)("button",{className:"btn btn-outline-danger mr-3",onClick:function(){return v("no")},children:d},"no")),n.openPage(Object(p.jsx)(l.Page,{header:s||"\u8bf7\u786e\u8ba4",back:"close",children:Object(p.jsxs)("div",{className:f||"rounded bg-white m-5 p-3 border",children:[Object(p.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:o}),Object(p.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-center",children:b})]})})),l.nav.regConfirmClose(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(void 0),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=n(9),m=function(){function e(t){Object(c.a)(this,e),this.controller=void 0,this.res=void 0,this.x=void 0,this.t=void 0,this.controller=t,this.t=t.t}return Object(s.a)(e,[{key:"isDev",get:function(){return d.f.isDevelopment}},{key:"isWebNav",get:function(){return this.controller.isWebNav}},{key:"navigate",value:function(e){this.controller.navigate(e)}},{key:"isMe",value:function(e){return this.controller.isMe(e)}},{key:"renderVm",value:function(e,t){return new e(this.controller).render(t)}},{key:"openVPage",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this.controller).open(n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"event",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.event(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"go",value:function(e,t,n){this.controller.go(e,t,n)}},{key:"vCall",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.vCall(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){this.controller.returnCall(e)}},{key:"renderUser",value:function(e,t,n){var r=function(e){var r=e.name,a=e.nick,i=e.icon;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.Image,{src:i,className:t||"w-1c h-1c mr-2"}),Object(p.jsx)("span",{className:n,children:a||r})]})};return Object(p.jsx)(l.UserView,{user:e,render:r})}},{key:"renderUserText",value:function(e){return Object(p.jsx)(l.UserView,{user:e,render:function(e){var t=e.name,n=e.nick;return Object(p.jsx)(p.Fragment,{children:n||t})}})}},{key:"renderMe",value:function(e,t){var n=this.controller.user;if(n)return this.renderUser(n.id,e,t)}},{key:"openPage",value:function(e,t,n){var r=typeof t;"object"===r||"undefined"===r?this.controller.openPage(b.createElement(e,t),n):this.controller.openPage(Object(p.jsxs)(l.Page,{header:"param type error",children:["View.openPage param must be object, but here is ",r]}),n)}},{key:"replacePage",value:function(e,t){this.controller.replacePage(b.createElement(e,t))}},{key:"openPageElement",value:function(e,t){this.controller.openPage(e,t)}},{key:"replacePageElement",value:function(e,t){this.controller.replacePage(e,t)}},{key:"backPage",value:function(){this.controller.backPage()}},{key:"closePage",value:function(e){this.controller.closePage(e)}},{key:"ceasePage",value:function(e){this.controller.ceasePage(e)}},{key:"removeCeased",value:function(){this.controller.removeCeased()}},{key:"regConfirmClose",value:function(e){this.controller.regConfirmClose(e)}},{key:"popToTopPage",value:function(){this.controller.popToTopPage()}}]),e}(),j=n(5),y=n(6),O=function(e){Object(j.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).retOnClosePage=void 0,e}return Object(s.a)(n,[{key:"open",value:function(e,t){var n,r=this;this.init(e),void 0!==t&&(n=function(){return t(r.retOnClosePage)}),this.openPageElement(this.renderPage(),n)}},{key:"replaceOpen",value:function(e,t){var n,r=this;this.init(e),void 0!==t&&(n=function(){return t(r.retOnClosePage)}),this.replacePageElement(this.renderPage(),n)}},{key:"render",value:function(e){return this.init(e),this.renderPage()}},{key:"init",value:function(e){}},{key:"header",value:function(){return null}},{key:"right",value:function(){return null}},{key:"content",value:function(){return null}},{key:"footer",value:function(){return null}},{key:"logout",value:function(){return!1}},{key:"renderPage",value:function(){var e=this,t=this.header();t||(t=!1);var n=this.logout();return Object(p.jsx)(l.Page,{header:t,right:this.right(),footer:this.footer(),onScroll:function(t){return e.onPageScroll(t)},onScrollTop:function(t){return e.onPageScrollTop(t)},onScrollBottom:function(t){return e.onPageScrollBottom(t)},back:this.back,headerClassName:this.headerClassName,className:this.className,afterBack:function(){return e.afterBack()},tabsProps:this.tabsProps,logout:n,webNav:this.controller.pageWebNav,children:this.content()})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}},{key:"back",get:function(){return"back"}},{key:"headerClassName",get:function(){return null}},{key:"className",get:function(){return null}},{key:"tabsProps",get:function(){return null}}]),n}(m);n(15),n(8),n(11)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(1),a=n.n(r),i=n(2),c=n(10),s=n(3),o=n(4),u=n(13),l="\n",h="\\ntbfvr",d=h.charCodeAt(0),f=h.charCodeAt(1),p=h.charCodeAt(2),v=h.charCodeAt(3),b=h.charCodeAt(4),m=h.charCodeAt(5),j=h.charCodeAt(6),y="\n\t\b\f\v\r",O=y.charCodeAt(0),k=y.charCodeAt(1),x=y.charCodeAt(2),g=y.charCodeAt(3),w=y.charCodeAt(4),I=y.charCodeAt(5),C=function(){function e(t,n,r){Object(s.a)(this,e),this.jName=void 0,this.schema=void 0,this.ver=0,this.sys=void 0,this.uq=void 0,this.name=void 0,this.typeId=void 0,this.cache=void 0,this.uqApi=void 0,this.fields=void 0,this.arrFields=void 0,this.returns=void 0,this.face=void 0,this.fieldMaps={},this.uq=t,this.name=n,this.typeId=r,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}return Object(o.a)(e,[{key:"sName",get:function(){return this.jName||this.name}},{key:"fieldMap",value:function(e){void 0===e&&(e="$");var t=this.fieldMaps[e];if(void 0===t){var n;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){var r=this.arrFields.find((function(t){return t.name===e}));void 0!==r&&(n=r.fields)}else if(void 0!==this.returns){var a=this.returns.find((function(t){return t.name===e}));void 0!==a&&(n=a.fields)}if(void 0===n)return{};t={};var i,s=Object(c.a)(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;t[o.name]=o}}catch(u){s.e(u)}finally{s.f()}this.fieldMaps[e]=t}return t}},{key:"loadSchema",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.schema){e.next=2;break}return e.abrupt("return");case 2:if(t=this.cache.get()){e.next=7;break}return e.next=6,this.uq.loadEntitySchema(this.name);case 6:t=e.sent;case 7:return this.buildSchema(t),e.next=10,this.loadValues();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildSchema",value:function(e){this.setSchema(e),this.buildFieldsTuid()}},{key:"loadValues",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"clearSchema",value:function(){this.schema=void 0}},{key:"setSchema",value:function(e){if(void 0!==e){var t=e.name,n=e.version;this.ver=n||0,this.setJName(t),this.cache.set(e),this.schema=e,this.buildFieldsTuid()}}},{key:"setJName",value:function(e){e!==this.name&&(this.jName=e)}},{key:"buildFieldsTuid",value:function(){var e=this.schema,t=e.fields,n=e.arrs,r=e.returns;this.fields=t,this.uq.buildFieldTuid(t),this.arrFields=n,this.uq.buildArrFieldsTuid(n,t),this.returns=r,this.uq.buildArrFieldsTuid(r,t)}},{key:"schemaStringify",value:function(){return JSON.stringify(this.schema,(function(e,t){if("_tuid"!==e)return t}),4)}},{key:"tuidFromName",value:function(e,t){if(void 0!==this.schema){var n=this.schema,r=n.fields,a=n.arrs,i=this.uq,c=e.toLowerCase();if(void 0===t)return u(c,r);if(void 0!==a){var s=t.toLowerCase(),o=a.find((function(e){return e.name===s}));if(void 0!==o)return u(c,o.fields)}}function u(e,t){if(void 0!==t){var n=t.find((function(t){return t.name===e}));if(void 0!==n)return i.getTuid(n.tuid)}}}},{key:"buildParams",value:function(e){var t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);var r=this.arrFields;if(void 0!==r){var a,i=Object(c.a)(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=s.name,u=s.fields;if(void 0!==e[o]){var l=[];t[o]=l;var h,d=Object(c.a)(e);try{for(d.s();!(h=d.n()).done;){var f=h.value,p={};this.buildFieldsParams(p,u,f),l.push(p)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){i.e(v)}finally{i.f()}}return t}},{key:"buildFieldsParams",value:function(e,t,n){var r,a=Object(c.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=i.name,o=i.type,u=n[s],l=void 0;switch(o){case"datetime":l=this.buildDateTimeParam(u);break;case"date":l=u instanceof Date?"".concat(u.getFullYear(),"-").concat(u.getMonth()+1,"-").concat(u.getDate()):u;break;default:switch(typeof u){default:l=u;break;case"object":if(u instanceof Date){l=u;break}var h=i._tuid;l=void 0===h?u.id:h.getIdFromObj(u)}}e[s]=l}}catch(d){a.e(d)}finally{a.f()}}},{key:"buildDateTimeParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)}},{key:"buildDateParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return"";case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}var n=t.toISOString(),r=n.indexOf("T");return r>0?n.substr(0,r):n}},{key:"pack",value:function(e){var t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);var r=this.arrFields;if(void 0!==r){var a,i=Object(c.a)(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=s.name,l=s.fields,h=Object(u.g)(e,o);this.packArr(t,l,h)}}catch(d){i.e(d)}finally{i.f()}}return t.join("")}},{key:"escape",value:function(e,t){var n=e[t.name];switch(t.type){case"datetime":return this.buildDateTimeParam(n);default:switch(typeof n){default:return n;case"object":var r=t._tuid;return void 0===r?n.id:r.getIdFromObj(n);case"string":for(var a=n.length,i="",c=0,s=0;s<a;s++){var o=void 0;switch(n.charCodeAt(s)){default:continue;case d:o="\\\\";break;case k:o="\\t";break;case O:o="\\n";break;case g:o="\\f";break;case w:o="\\v";break;case x:o="\\b";break;case I:o="\\r"}i+=n.substring(c,s)+o,c=s+1}return i+n.substring(c);case"undefined":return""}}}},{key:"packRow",value:function(e,t,n){var r=t.length;if(0!==r){var a="";a+=this.escape(n,t[0]);for(var i=1;i<r;i++){var c=t[i];a+="\t"+this.escape(n,c)}e.push(a+l)}}},{key:"packArr",value:function(e,t,n){if(void 0!==n)if(0===n.length)e.push(l);else{var r,a=Object(c.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.packRow(e,t,i)}}catch(s){a.e(s)}finally{a.f()}}else e.push(l);e.push(l)}},{key:"cacheFieldsInValue",value:function(e,t){var n,r=Object(c.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.name,s=a._tuid;if(void 0!==s){var o=e[i];e[i]=s.boxId(o)}}}catch(u){r.e(u)}finally{r.f()}}},{key:"unpackTuidIdsOfFields",value:function(e,t){if(void 0===t)return e;var n,r=[],a=Object(c.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i)for(var s=i.length,o=0;o<s;){if(10===i.charCodeAt(o)){++o;break}var u={};o=this.unpackRow(u,t,i,o),r.push(u)}}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"unpackSheet",value:function(e){var t={},n=this.fields,r=0;void 0!==n&&(r=this.unpackRow(t,n,e,r));var a=this.arrFields;if(void 0!==a){var i,s=Object(c.a)(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;r=this.unpackArr(t,o,e,r)}}catch(u){s.e(u)}finally{s.f()}}return t}},{key:"unpackReturns",value:function(e,t){var n={},r=0,a=t||this.returns;if(void 0!==a){var i,s=Object(c.a)(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;r=this.unpackArr(n,o,e,r)}}catch(u){s.e(u)}finally{s.f()}}return n}},{key:"unpackRow",value:function(e,t,n,r){for(var a=0,i=0,c=r,s=0,o=n.length,u=t.length;r<o;r++)if(a=i,9===(i=n.charCodeAt(r))){var l=t[s],h=l.name;if(8!==a){if(r>c){var d=n.substring(c,r);e[h]=this.to(e,d,l)}}else e[h]=null;if(c=r+1,++s>=u)return(r=n.indexOf("\n",c))>=0?++r:r=o,r}else if(10===i){var f=t[s],p=f.name;if(8!==a){if(r>c){var v=n.substring(c,r);e[p]=this.to(e,v,f)}}else e[p]=null;return++s,++r}var b=t[s],m=b.name;if(8!==a){var j=n.substring(c);e[m]=this.to(e,j,b)}return o}},{key:"to",value:function(e,t,n){switch(n.type){default:return t;case"text":case"char":return this.reverseNT(t);case"datetime":case"time":case"timestamp":var r=Number(t);return!0===isNaN(r)?new Date(t):new Date(1e3*r);case"date":var a=t.split("-");return new Date(Number(a[0]),Number(a[1])-1,Number(a[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":case"float":case"double":return Number(t);case"id":var i=Number(t),c=n._tuid;return void 0===c?i:c.boxId(i)}}},{key:"reverseNT",value:function(e){if(void 0!==e&&null!==e){for(var t=e.length,n="",r=0,a=0;a<t;a++){if(e.charCodeAt(a)===d){if(a===t-1)break;var i=void 0;switch(e.charCodeAt(a+1)){default:continue;case d:i="\\";break;case f:i="\n";break;case p:i="\t";break;case v:i="\b";break;case b:i="\f";break;case m:i="\v";break;case j:i="\r"}n+=e.substring(r,a)+i,r=a+2,++a}}return n+=e.substring(r,t)}}},{key:"unpackArr",value:function(e,t,n,r){for(var a=r,i=[],c=n.length,s=t.name,o=t.fields;r<c;){var u=n.charCodeAt(r);if(10===u){if(r===a){if(10!==(u=n.charCodeAt(r)))throw new Error("upackArr: arr\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f10\uff0c\u5219\u5fc5\u987b\u7d27\u8ddf\u4e00\u4e2a10\uff0c\u8868\u793a\u6574\u4e2aarr\u7684\u7ed3\u675f");++r}++r;break}var l={};i.push(l),r=this.unpackRow(l,o,n,r)}return e[s]=i,r}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),i=n(12),c=n(10),s=n(2),o=n(3),u=n(4),l=n(5),h=n(6),d=function(e){Object(l.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this)).uq=void 0,n.props=void 0,n.uq=e.uq,n.props=e,n}return Object(u.a)(r,[{key:"buildItemSchema",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,o,u,l,h,d,f,p,v,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.ID,s=[],o=r.ui.fieldArr,u=Object(c.a)(o),e.prev=4,u.s();case 6:if((l=u.n()).done){e.next=24;break}h=l.value,d=h.type,f=h.isKey,p=f,v=Object(i.a)(Object(i.a)({},h),{},{required:p}),e.t0=d,e.next=14;break;case 14:return s.push(v),e.abrupt("break",16);case 16:if(!(b=v.ID)){e.next=22;break}return e.next=20,Promise.resolve().then(n.bind(null,76));case 20:m=e.sent,this.setIDUi(v,m.createPickId(this.uq,b),b.render);case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),u.e(e.t1);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return s.push({name:"submit",type:"submit"}),e.abrupt("return",s);case 34:case"end":return e.stop()}}),e,this,[[4,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildUISchema",value:function(e){var t=e.ID.ui.fields,n=Object(i.a)({},t);return n.submit={label:"\u63d0\u4ea4",className:"btn btn-primary",widget:"button"},{items:n}}},{key:"buildGridProps",value:function(e){var t,n=[],r=e.ui,a=e.t,s=e.schema.exFields,o=r.fieldArr,u=Object(c.a)(o);try{var l=function(){var e=t.value;if(!s.find((function(t){return t.field===e.name})))return"continue";var r=Object(i.a)(Object(i.a)({},e),{},{label:a(e.label)});n.push(r)};for(u.s();!(t=u.n()).done;)l()}catch(h){u.e(h)}finally{u.f()}return n}},{key:"setIDUi",value:function(e,t,n){if("id"===e.type){var r=e;r.widget="id",r.pickId=t,r.Templet=n}else alert("".concat(e.name," is not id UI"))}},{key:"setNO",value:function(e,t){if(t&&"string"===t.type){var n=t;n.readOnly=!0,n.defaultValue=e}}}]),r}(n(7).Controller)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(10),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=(n(9),n(18)),l=n(8),h=n(50),d=n(0),f=function(){function e(t,n,r,a,i){Object(s.a)(this,e),this.edit=void 0,this.name=void 0,this._itemSchema=void 0,this._uiItem=void 0,this.value=void 0,this.label=void 0,this.newValue=void 0,this.error=null,this.isChanged=!1,Object(l.o)(this,{error:l.p,isChanged:l.p}),this.edit=t,this._itemSchema=n,this._uiItem=r,this.value=i;var c=n.name;this.name=c,this.label=a}return Object(o.a)(e,[{key:"itemSchema",get:function(){return this._itemSchema}},{key:"uiItem",get:function(){return this._uiItem}},{key:"editInRow",get:function(){return!1}},{key:"init",value:function(){}},{key:"start",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalStart();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"end",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalEnd();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e,t,n,r=this,a=this._itemSchema,i=a.name,c=a.type,s=this._uiItem;if(void 0===s)t=i;else{t=s.label,n=s.labelHide;var o=s.Templet;if(void 0!==o)"function"===typeof o?void 0!==this.value&&(e=o(this.value)):e={templet:o};else if(void 0!==this.value)switch(s.widget){case"radio":case"select":var u=s.list;e=Object(d.jsx)("b",{children:u.find((function(e){return e.value===r.value})).title});break;case"id":e=Object(d.jsxs)("b",{children:["no templet for ",i,"=",this.value]})}}if(void 0===e)switch(c){default:e=this.value?Object(d.jsx)("b",{children:this.value}):Object(d.jsxs)("small",{className:"text-muted",children:["[",!0===n?t:"\u65e0","]"]});break;case"image":e=Object(d.jsx)(h.a,{className:"w-4c h-4c",src:this.value})}return e}},{key:"internalEnd",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.b.pop();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyValue",value:function(){if(void 0!==this.uiItem){var e=this.uiItem.rules;if(void 0!==e){var t=this.newValue;if(Array.isArray(e)){var n,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var i=c(n.value);if(void 0!==i){this.error=i;break}}}catch(s){a.e(s)}finally{a.f()}}else this.error=c(e)}}function c(e,n){var r=e(t);if(void 0!==r)return"object"!==typeof r?r:JSON.stringify(r)}}}]),e}()},,function(e,t,n){"use strict";n.d(t,"d",(function(){return r.b})),n.d(t,"c",(function(){return r.a})),n.d(t,"f",(function(){return r.d})),n.d(t,"e",(function(){return r.c})),n.d(t,"g",(function(){return r.e})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(59),a={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}},i={_:{none:"[none]"},zh:{_:{none:"[\u65e0]"}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(c.a)(this,n),(a=t.call(this,r,i)).tries=void 0,a._entity=void 0,a.tries=0,a._entity=e,a}return Object(s.a)(n,[{key:"entity",get:function(){return this._entity}},{key:"request",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.loadSchema();case 2:return e.next=4,this.innerRequest();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.uqApi.xcall(this);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerRequest",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerCall();case 2:if(t=e.sent,n=t.$uq,r=t.$modify,i=t.res,this.entity.uq.pullModify(r),void 0!==n){e.next=8;break}return c=this.xresult(i),e.abrupt("return",c);case 8:return e.next=10,this.retry(n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xresult",value:function(e){return e}},{key:"headers",get:function(){var e=this.entity,t=e.ver,n=e.uq.uqVersion;return{uq:"".concat(n),en:"".concat(t)}}},{key:"retry",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(++this.tries,!(this.tries>5)){e.next=3;break}throw new Error("can not get right uq response schema, 5 tries");case 3:return this.rebuildSchema(t),e.next=6,this.innerRequest();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rebuildSchema",value:function(e){var t=e.uq,n=e.entity;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)}}]),n}(n(21).a),h=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"entity",get:function(){return this._entity}}]),n}(l),d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query/".concat(this.entity.name)}},{key:"xresult",value:function(e){return this.entity.unpackReturns(e)}},{key:"buildParams",value:function(){return this.entity.buildParams(this.params)}}]),n}(l),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"params",get:function(){return this._params}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query-page/".concat(this.entity.name)}},{key:"buildParams",value:function(){var e,t=this.params,n=t.pageStart,r=t.pageSize,a=t.params;return(e=void 0===a?{key:""}:this.entity.buildParams(a)).$pageStart=n,e.$pageSize=r,e}},{key:"xresult",value:function(e){return this.entity.unpackReturns(e)}}]),n}(l)},function(e,t,n){"use strict";n.d(t,"h",(function(){return C})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return _})),n.d(t,"j",(function(){return D})),n.d(t,"g",(function(){return R})),n.d(t,"i",(function(){return F})),n.d(t,"a",(function(){return V})),n.d(t,"e",(function(){return M})),n.d(t,"k",(function(){return B})),n.d(t,"f",(function(){return q})),n.d(t,"b",(function(){return U})),n.d(t,"l",(function(){return H}));var r=n(10),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(5),l=n(6),h=n(19),d=n.n(h),f=n(45),p=n(18),v=n(13),b=["POST","PUT"],m=function(){function e(t,n,r){var a=this;Object(s.a)(this,e),this.timeout=void 0,this.ui=void 0,this.hostUrl=void 0,this.apiToken=void 0,this.startWait=function(e){!0===e&&void 0!==a.ui&&a.ui.startWait()},this.endWait=function(e,t){void 0!==a.ui&&a.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.ui){e.next=3;break}return e.next=3,a.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=n,this.ui=r,this.timeout=!0===v.f.isDevelopment?5e5:5e4}return Object(o.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"xcall",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.buildOptions(),a=n.headers,c=n.path,s=n.method,void 0!==a)for(u in o=r.headers,a)o[u]=encodeURI(a[u]);return r.method=s,l=n.buildParams(),b.indexOf(s)>=0&&void 0!==l&&(r.body=JSON.stringify(l)),e.next=8,this.innerFetch(t+c,r,n.waiting);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"innerFetchResult",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerFetch(t,n,r);case 2:return a=e.sent,e.abrupt("return",a.res);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,u,l,h,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:void 0,a=d.length>2?d[2]:void 0,!n){e.next=26;break}if(!((c=Object.keys(n)).length>0)){e.next=26;break}s="?",o=Object(r.a)(c),e.prev=7,o.s();case 9:if((u=o.n()).done){e.next=18;break}if(l=u.value,void 0!==n[l]){e.next=14;break}return e.abrupt("continue",16);case 14:t+=s+l+"="+n[l],s="&";case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),o.e(e.t0);case 23:return e.prev=23,o.f(),e.finish(23);case 26:return(h=this.buildOptions()).method="GET",e.next=30,this.innerFetchResult(t,h,a);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="POST",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="PUT",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="DELETE",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,n,r,a,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a,s){var o,u,l,h,d,f,b,m,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e,t){switch(typeof e){case"string":void 0!==t&&(e+=" "+t);break;case"object":for(var r={ex:t},i=0,c=Object.keys(e);i<c.length;i++){var l=c[i];r[l]=e[l]}e=r}return{channel:o,url:u,options:n,resolve:a,reject:s,error:e}},o=this,this.startWait(r),u=t,e.prev=4,console.log("%s-%s %s",n.method,u,n.body||""),h=Date.now(),d=v.f.setTimeout(void 0,(function(){o.endWait(t+" timeout endWait: "+(Date.now()-h)+"ms",s)}),this.timeout),e.next=10,fetch(encodeURI(u),n);case 10:if(!1!==(f=e.sent).ok){e.next=17;break}throw v.f.clearTimeout(d),console.log("ok false endWait"),o.endWait(),console.log("call error %s",f.statusText),f.statusText;case 17:if(!((b=f.headers.get("content-type"))&&b.indexOf("json")>=0)){e.next=22;break}return e.abrupt("return",f.json().then(function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.f.clearTimeout(d),o.endWait(),!0!==t.ok){e.next=5;break}return"object"!==typeof t||Array.isArray(t),e.abrupt("return",a(t));case 5:if(void 0!==(n=t.error)){e.next=11;break}return e.next=9,o.showError(l("not valid tonva json"));case 9:e.next=14;break;case 11:return e.next=13,o.showError(l(n,"retJson.error"));case 13:s(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.showError(l(t,"catch res.json()"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return e.next=24,f.text();case 24:m=e.sent,v.f.clearTimeout(d),console.log("text endWait"),o.endWait(),a(m);case 29:e.next=40;break;case 31:if(e.prev=31,e.t0=e.catch(4),this.endWait(t,s),"string"!==typeof e.t0){e.next=39;break}if(!0!==(j=e.t0.toLowerCase()).startsWith("unauthorized")&&!0!==j.startsWith("$roles")){e.next=39;break}return p.b.logout(),e.abrupt("return");case 39:console.error("fecth error (no nav.showError): "+t);case 40:case 41:case"end":return e.stop()}}),e,this,[[4,31]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}())},{key:"callFetch",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method=n,a.body=r,e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(t,a,!0,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){return{headers:this.buildHeaders(),method:void 0,body:void 0}}},{key:"buildHeaders",value:function(){var e=p.b.language,t=p.b.culture,n={"Content-Type":"application/json;charset=UTF-8"},r=e;return t&&(r+="-"+t),n["Accept-Language"]=r,this.apiToken&&(n.Authorization=this.apiToken),n}}]),e}(),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"innerFetch",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.hostUrl+t,void 0!==this.apiToken||!Object(f.d)()){e.next=5;break}return e.next=4,Object(f.a)(a,n.method,n.body);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(a,n,r,t,c);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(m),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"innerFetch",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.hostUrl+t,e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(t,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(a,n,r,t,c);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(m),O=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"startWait",value:function(){p.b.startWait()}},{key:"endWait",value:function(){p.b.endWait()}},{key:"showError",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.b.endWait(),e.next=3,p.b.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),k=n(74),x=n(56),g=n(55),w={},I={};function C(){w={},I={},N={},Object(f.e)()}var S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,e,i)).uqOwner=void 0,c.uqName=void 0,c.uq=void 0,a&&(c.uqOwner=r,c.uqName=a,c.uq=r+"/"+a),c.showWaiting=i,c}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(this.uq,this.uqOwner,this.uqName);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHttpChannel",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,s,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=w,n=new O):t=I,void 0===(a=t[this.uq])){e.next=7;break}if(!1!==Array.isArray(a)){e.next=5;break}return e.abrupt("return",a);case 5:e.next=8;break;case 7:a=t[this.uq]=[];case 8:return s=a,e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(c,u){var l,h,d,p,v,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.push({resolve:c,reject:u}),1===s.length){e.next=3;break}return e.abrupt("return");case 3:if(l=Object(f.c)(o.uq)){e.next=8;break}return e.next=7,o.init();case 7:l=Object(f.c)(o.uq);case 8:d=(h=l).url,p=h.token,o.token=p,a=new y(d,p,n),t[o.uq]=a,v=Object(r.a)(s);try{for(v.s();!(b=v.n()).done;)b.value.resolve(a)}catch(i){v.e(i)}finally{v.f()}case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEntities",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("entities");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoles",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("get-roles");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:n=t.split("|"),a=[],c=Object(r.a)(n),e.prev=8,c.s();case 10:if((s=c.n()).done){e.next=18;break}if(o=(o=s.value).trim()){e.next=15;break}return e.abrupt("continue",16);case 15:a.push(o);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:if(0!==a.length){e.next=28;break}return e.abrupt("return",null);case 28:return e.abrupt("return",a);case 29:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRoleUsers",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("get-all-role-users");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserRoles",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("set-user-roles",{theUser:t,roles:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUserRoles",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("delete-user-roles",{theUser:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"allSchemas",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("all-schemas");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"schema",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("schema/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queueModify",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("queue-modify",{start:t,page:n,entities:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(k.a),N={};var A,_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,"tv/",void 0,void 0,!0)).unitId=void 0,r.unitId=e,r}return Object(o.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=N[this.unitId])){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,this.buildChannel();case 5:return e.abrupt("return",N[this.unitId]=e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildChannel",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O,n=new U("tv/",void 0),e.next=4,n.unitxUq(this.unitId);case 4:return r=e.sent,a=r.token,c=r.db,s=r.url,o=r.urlTest,u=x.a.getUrlOrTest(c,s,o),this.token=a,e.abrupt("return",new y(u,a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(S);function D(e){console.log("setCenterUrl %s",e),A=e,T=void 0,P=void 0}var P,T,R=void 0,E=0;function F(e,t){E=e,R=t,T=void 0,P=void 0}var V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0===this.showWaiting||void 0===this.showWaiting?void 0!==P?P:P=new j(A,R,new O):void 0!==T?T:T=new j(A,R));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(k.a),L="uqTokens",M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).localMap=v.f.localDb.map(L),e}return Object(o.a)(n,[{key:"uq",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,o,u,l,h,f,p,v,b,m,j,y,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uqOwner,r=t.uqName,a=n+"/"+r,c=this.localMap.child(a),e.prev=3,void 0!==(s=c.get())&&(u=(o=s).unit,l=o.user,u===t.unit&&l===E||(c.remove(),s=void 0)),h=Math.floor(Date.now()/1e3),void 0===s){e.next=11;break}if(p=(f=s).tick,!(void 0!==(v=f.value)&&h-p<86400)){e.next=11;break}return e.abrupt("return",d.a.clone(v));case 11:return(b=d.a.clone(t)).testing=x.a.testing,e.next=15,this.get("uq-token",b);case 15:if(void 0!==(m=e.sent)){e.next=20;break}throw j=t.unit,y=t.uqOwner,O=t.uqName,"center get app-uq(unit=".concat(j,", '").concat(y,"/").concat(O,"') - not exists or no unit-service");case 20:return s={unit:t.unit,user:E,tick:h,value:m},c.set(s),e.abrupt("return",d.a.clone(m));case 25:throw e.prev=25,e.t0=e.catch(3),c.remove(),e.t0;case 29:case"end":return e.stop()}}),e,this,[[3,25]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"clearLocal",value:function(){v.f.localDb.removeItem(L)}}]),n}(V),B=new M("tv/tie/",void 0),q=new(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"directCall",value:function(e,t,n){return this.call(e,t,n)}}]),n}(V))("",void 0),U=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"appUqs",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-uqs",{appOwner:t,appName:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uqs",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/pure-uqs",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitxUq",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/unitx-uq",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/change-password",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(V),H=new(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"login",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/login",t);case 2:n=e.sent,e.t0=typeof n,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(g.b)(n));case 8:return r=n.token,a=Object(g.b)(r),c=n.nick,s=n.icon,c&&(a.nick=c),s&&(a.icon=s),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendVerify",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/set-verify",{account:t,type:n,oem:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"checkVerify",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/check-verify",{account:t,verify:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isExists",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/is-exists",{account:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/reset-password",{account:t,password:n,verify:r,type:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"userSetProp",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/user-set-prop",{prop:t,value:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"me",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/me");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"user",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromKey",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-from-key",{key:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(V))("tv/",void 0)},function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return k}));var r=n(12),a=n(10),i=n(1),c=n.n(i),s=n(2),o=n(3),u=n(4),l=n(5),h=n(6),d=n(7),f=n(0),p=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(s.a)(c.a.mark((function t(n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setDisabled(n,!0),t.next=3,e.controller.submit(n,r);case 3:r.setDisabled(n,!1);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(e){var t=this.controller,n=t.schema,r=t.uiSchema;return Object(f.jsx)(d.Form,{fieldLabelSize:2,formData:e,schema:n,uiSchema:r,onButtonClick:this.onSubmit})}}]),n}(d.View),v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this)).ui=void 0,r.schema=void 0,r.uiSchema=void 0,r.label=void 0,r.submitCaption=void 0,r.onSubmit=void 0;var a=e.label,i=e.fieldArr,c=e.fields,s=e.submitCaption,u=e.t;return r.t=u,r.schema=r.buildItemSchema(i),r.uiSchema=r.buildUISchema(c),r.label=u(a),r.submitCaption=u(s),r}return Object(u.a)(n,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setNO",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"no",r=this.schema.find((function(e){return e.name===n}))){e.next=4;break}return e.abrupt("return");case 4:if("string"===r.type){e.next=6;break}return e.abrupt("return");case 6:return a=r,e.next=9,t.NO();case 9:i=e.sent,a.readOnly=!0,a.defaultValue=i,(s=this.uiSchema.items[n])&&(s.readOnly=!0,s.defaultValue=i);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this.onSubmit)||void 0===r?void 0:r.call(this,t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildItemSchema",value:function(e){var t,n=[],i=Object(a.a)(e);try{for(i.s();!(t=i.n()).done;){var c=t.value,s=(c.type,c.isKey),o=Object(r.a)(Object(r.a)({},c),{},{required:s});n.push(o)}}catch(u){i.e(u)}finally{i.f()}return n.push({name:"submit",type:"submit"}),n}},{key:"buildUISchema",value:function(e){var t,n=Object(r.a)({},e),a={label:null!==(t=this.submitCaption)&&void 0!==t?t:"\u63d0\u4ea4",className:"btn btn-primary",widget:"button"};for(var i in n.submit=a,e){var c=e[i];if("id"===c.type)if(void 0===c.pickId){var s=c;s.widget="number",s.placeholder="ID number, only on debugging"}}return{items:n}}},{key:"renderForm",value:function(e){return new p(this).render(e)}}]),n}(d.Controller),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){return this.controller.label}},{key:"back",get:function(){return"close"}},{key:"content",value:function(){return Object(f.jsx)("div",{className:"p-3",children:this.controller.renderForm(this.controller.item)})}}]),n}(d.VPage),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r){var a;return Object(o.a)(this,n),(a=t.call(this,e)).item=void 0,a.item=r,a}return Object(u.a)(n,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(b);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(v),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"afterBack",value:function(){this.controller.close()}}]),n}(b),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(j);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.returnCall(null)}},{key:"submit",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.item?{}:this.item,Object.assign(n,t),this.returnCall(n),this.closePage();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m),O=n(76),k=function(){function e(t,n,a){var i=this;Object(o.a)(this,e),this.label=void 0,this.fieldArr=void 0,this.fields=void 0,this.submitCaption=void 0,this.t=void 0,this.t=null!==a&&void 0!==a?a:function(e){return e};var c=t.label,s=t.fieldArr,u=t.fields;this.label=c,this.fieldArr=[],this.fields={};var l=function(e){var t=u[e],a=null===n||void 0===n?void 0:n[e],c=s.findIndex((function(e){return e===t})),o=void 0;if(a){var l,h=i.t(null!==(l=a.label)&&void 0!==l?l:t.label);o=Object(r.a)(Object(r.a)(Object(r.a)({},t),a),{},{label:h});var d=t.ID;if(d){var f=o;f.widget="id",f.pickId=Object(O.createPickId)(d.uq.proxy,d),f.Templet=d.render}}else{var p=i.t(t.label);o=Object(r.a)(Object(r.a)({},t),{},{label:p})}i.fields[e]=o,i.fieldArr[c]=o};for(var h in u)l(h)}return Object(u.a)(e,[{key:"setIDUi",value:function(e,t,n){var r=this.fields[e];if(void 0!==r)if("id"===r.type){var a=r;a.widget="id",a.pickId=t,a.Templet=n}else alert("".concat(e," is not id UI"));else alert("".concat(e," not defined in UI"))}},{key:"setNO",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"no",r=this.fields[n]){e.next=4;break}return e.abrupt("return");case 4:if("string"===r.type){e.next=6;break}return e.abrupt("return");case 6:return(a=r).readOnly=!0,e.next=10,t.NO();case 10:i=e.sent,a.defaultValue=i;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideField",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=function(){var t=c[i],n=e.fieldArr.findIndex((function(e){return e.name===t}));n>=0&&e.fieldArr.splice(n,1)},i=0,c=n;i<c.length;i++)a()}},{key:"setFieldChanged",value:function(e,t){var n=this.fields[e];n&&(n.onChanged=t)}},{key:"setFieldChanging",value:function(e,t){var n=this.fields[e];n&&(n.onChanging=t)}}]),e}()},function(e,t,n){"use strict";var r=n(83);n.d(t,"Mid",(function(){return r.a}));var a=n(150);n.o(a,"CID")&&n.d(t,"CID",(function(){return a.CID})),n.o(a,"CRoles")&&n.d(t,"CRoles",(function(){return a.CRoles})),n.o(a,"MidIXID")&&n.d(t,"MidIXID",(function(){return a.MidIXID}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return O}));var r=n(24),a=n(23),i=n(20),c=n(1),s=n.n(c),o=n(2),u=n(3),l=n(4),h=n(5),d=n(6),f=n(19),p=n.n(f),v=n(8),b=n(13),m=n(33),j=n(38),y=(b.b,function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pageStart=void 0,e.pageSize=void 0,e.params=void 0,e.more=void 0,e.startField=void 0,e.list=void 0,e.returns=void 0,e.isPaged=void 0,e}return Object(l.a)(n,[{key:"typeName",get:function(){return"query"}},{key:"setSchema",value:function(e){Object(a.a)(Object(i.a)(n.prototype),"setSchema",this).call(this,e);var t=e.returns;this.returns=t,this.isPaged=t&&void 0!==t.find((function(e){return"$page"===e.name}))}},{key:"resetPage",value:function(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0}},{key:"hasMore",get:function(){return this.more}},{key:"loadPage",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,a,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.pageSize){e.next=2;break}throw new Error("call resetPage(size:number, params:any) first");case 2:if(void 0===this.pageStart){e.next=10;break}e.t0=this.startField.type,e.next="date"===e.t0||"time"===e.t0||"datetime"===e.t0?8:6;break;case 6:return t=this.pageStart,e.abrupt("break",10);case 8:return t=this.pageStart.getTime(),e.abrupt("break",10);case 10:return e.next=12,this.page(this.params,t,this.pageSize+1);case 12:n=e.sent,a=n.$page,this.list=v.p.array([],{deep:!1}),void 0!==a&&(a.length>this.pageSize?(this.more=!0,a.pop(),c=this.returns.find((function(e){return"$page"===e.name})),this.startField=c.fields[0],this.pageStart=a[a.length-1][this.startField.name]):this.more=!1,(i=this.list).push.apply(i,Object(r.a)(a)));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pageCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new j.c(this,e,t)}},{key:"page",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n,r){var a,i,c,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(o.length>3&&void 0!==o[3])||o[3],i={pageStart:n,pageSize:r,params:t},e.next=4,this.pageCaller(i,a).request();case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"queryCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new j.d(this,e,t)}},{key:"query",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.queryCaller(t,n).request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.query(t,n);case 3:r=e.sent,e.t0=s.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.table(t,n);case 3:if(!((r=e.sent).length>0)){e.next=6;break}return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.obj(t,n);case 3:r=e.sent,e.t0=s.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(m.a)),O=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return n}(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(){for(var e=r.length,t="",n=0;n<8;n++)t+=r.charAt(Math.floor(Math.random()*e));return t}},function(e,t,n){"use strict";n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return A}));var r=n(1),a=n.n(r),i=n(2),c=n(19),s=n.n(c),o=n(14),u=n(44),l=n(39),h=n(49),d=n(56),f=n(13),p={};function v(){for(var e in p)p[e]=void 0;l.e.clearLocal()}function b(){return window.self!==window.parent}function m(e){var t=e.data,n=e.source;Object(h.b)(n),function(e){var t=document.getElementById(e);void 0!==t&&(t.hidden=!0)}(t.hash);var r=s.a.clone(o.nav.user);r.type="init-sub-win",n.postMessage(r,"*")}function j(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initSubWin: set nav.user",t),n=o.nav.user=t,Object(l.i)(n.id,n.token),e.next=5,o.nav.showAppView();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,o,u,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=f.f.unit)||console.error("no unit defined in unit.json or in index.html, or not logined in",r),i=n.split("/"),c={unit:r,uqOwner:i[0],uqName:i[1],appOwner:i[2],appName:i[3]},console.log("uqTokenApi.uq onReceiveAppApiMessage",c),e.next=7,l.k.uq(c);case 7:return s=e.sent,o=s.db,u=s.url,h=s.token,e.abrupt("return",{name:n,db:o,url:u,token:h});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.apiName,r=t.db,i=t.url,c=t.urlTest,s=t.token,void 0!==(o=w[n])){e.next=4;break}throw new Error("error app api return");case 4:u=d.a.getUrlOrTest(r,i,c),console.log("onAppApiReturn(message:any): url="+i+", real="+u),o.resolve({name:n,db:r,url:u,token:s});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.addEventListener("message",function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data){e.next=3;break}return e.abrupt("return");case 3:e.t0=r.type,e.next="sub-frame-started"===e.t0?6:"ws"===e.t0?8:"init-sub-win"===e.t0?11:"pop-app"===e.t0?14:"center-api"===e.t0?17:"center-api-return"===e.t0?20:"app-api"===e.t0?22:"app-api-return"===e.t0?27:32;break;case 6:return m(t),e.abrupt("break",36);case 8:return e.next=10,o.nav.onReceive(r.msg);case 10:return e.abrupt("break",36);case 11:return e.next=13,j(r);case 13:return e.abrupt("break",36);case 14:return window.console.log("///\\\\\\ pop-app"),o.nav.navBack(),e.abrupt("break",36);case 17:return e.next=19,D(t.source,r);case 19:return e.abrupt("break",36);case 20:return T(r),e.abrupt("break",36);case 22:return e.next=24,O(r.hash,r.apiName);case 24:return i=e.sent,t.source.postMessage({type:"app-api-return",apiName:r.apiName,db:i.db,url:i.url,token:i.token},"*"),e.abrupt("break",36);case 27:return console.log("app-api-return: %s",JSON.stringify(r)),console.log("await onAppApiReturn(message);"),e.next=31,x(r);case 31:return e.abrupt("break",36);case 32:if(!0!==(null===(n=r.source)||void 0===n?void 0:n.startsWith("react-devtools"))){e.next=34;break}return e.abrupt("break",36);case 34:return window.console.log("message: %s",JSON.stringify(r)),e.abrupt("break",36);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var w={};function I(e,t,n){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(a.a.mark((function e(t,n,r){var c,s,o,u,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b()){e.next=12;break}return c=f.f.unit,e.next=4,l.k.uq({unit:c,uqOwner:n,uqName:r});case 4:return void 0===(s=e.sent).token&&(s.token=l.g),o=s.db,u=s.url,h=s.urlTest,v=d.a.getUrlOrTest(o,u,h),console.log("realUrl: %s",v),s.url=v,p[t]=s,e.abrupt("return",s);case 12:if(void 0===w[t]){e.next=15;break}return e.abrupt("return");case 15:return e.abrupt("return",new Promise((function(e,n){w[t]={resolve:function(){var n=Object(i.a)(a.a.mark((function n(r){var i,c,s,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r;case 2:i=n.sent,c=i.db,s=i.url,o=i.token,p[t]={name:t,db:c,url:s,token:o},w[t]=void 0,e();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:t},"*")})));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return p[e]}var N={};function A(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bridgeCenterApi: url=%s, method=%s",t,n),e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(i,c){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(u.a)(),void 0!==N[s]){e.next=5;break}return N[s]={id:s,resolve:i,reject:c},e.abrupt("break",7);case 5:e.next=0;break;case 7:(window.opener||window.parent).postMessage({type:"center-api",callId:s,url:t,method:n,body:r},"*");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.callId,i=n.url,c=n.method,s=n.body,e.next=3,l.f.directCall(i,c,s);case 3:o=e.sent,t.postMessage({type:"center-api-return",callId:r,result:o},"*");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=e.callId,n=e.result,r=N[t];void 0!==r&&(N[t]=void 0,r.resolve(n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n(4),i=function(){function e(t){Object(r.a)(this,e),this.slope=void 0,this.intercept=void 0,this.y=void 0,this.slopeR=void 0,this.endY=void 0,this.r2=void 0,this.y=t,this.regress();var n=this.score();this.r2=n.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,n=0,r=0,a=0,i=0;i<e;++i)t+=i,n+=this.y[i],r+=i*i,a+=i*this.y[i];var c=e*a-t*n;this.slope=c/(e*r-t*t),this.intercept=1/e*n-this.slope*(1/e)*t;var s=this.slope>0?this.predict(e-2):this.predict(1);this.slopeR=s<.01?void 0:this.slope/s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),n=0;n<e;n++)t[n]=this.predict(n);for(var r=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var h=t[l];r+=h;var d=this.y[l];a+=d,s+=h*h,o+=d*d,u+=h*d;var f=d-h;0!==d&&(i+=f*f/d),c+=f*f}var p=(e*u-r*a)/Math.sqrt((e*s-r*r)*(e*o-a*a));return{r:p,r2:p*p,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.slope*e+this.intercept}},{key:"computeX",value:function(e){return(e-this.intercept)/this.slope}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return b}));var r,a=n(5),i=n(6),c=n(1),s=n.n(c),o=n(2),u=n(3),l=n(4),h=n(93);function d(e){void 0!==r&&r.postMessage({type:"ws",msg:e},"*")}function f(e){r=e}var p=function(){function e(){Object(u.a)(this,e),this.messageHub=h.a}return Object(l.a)(e,[{key:"receive",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messageHub.dispatch(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),v=1,b=(new(function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).wsBaseId="WsBridge seed "+v++,e}return n}(p)),function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).wsBaseId="WSChannel seed "+v++,a.wsHost=void 0,a.token=void 0,a.ws=void 0,a.wsHost=e,a.token=r,a}return Object(l.a)(n,[{key:"connect",value:function(){var e=this;if(void 0===this.ws){var t=this;return new Promise((function(r,a){var i=new WebSocket(e.wsHost,e.token||n.centerToken);console.log("connect webSocket %s",e.wsHost),i.onopen=function(n){console.log("webSocket connected %s",e.wsHost),t.ws=i,r()},i.onerror=function(e){a("webSocket can't open!")},i.onmessage=function(){var e=Object(o.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wsMessage(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onclose=function(e){t.ws=void 0,console.log("webSocket closed!")}}))}}},{key:"close",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)}},{key:"wsMessage",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("websocket message: %s",t.data),d(n=JSON.parse(t.data)),e.next=6,this.receive(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ws msg error: ",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendWs",value:function(e){var t=this;this.connect().then((function(){t.ws.send(e)}))}}],[{key:"setCenterToken",value:function(e){n.centerToken=e}}]),n}(p));b.centerToken=void 0},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(9);var r=n(16),a=n.n(r),i=n(18),c=n(0);function s(e){var t,n=e.className,r=e.style,s=e.src,o=e.altImage;if(s){if(0!==s.indexOf("."))return!0===s.startsWith(":")&&(s=i.b.resUrl+s.substr(1)),Object(c.jsx)("img",{src:s,className:n,alt:"img",style:r,onError:function(e){e.currentTarget.src=o||"https://tv.jkchemical.com/imgs/0001.png"}});t=s.substr(1)}else t="file-o";return Object(c.jsx)("span",{className:a()(n,"image-none"),style:r,children:Object(c.jsx)("i",{className:"fa fa-"+t})})}},function(e,t,n){"use strict";n.r(t),n.d(t,"CIDSelect",(function(){return d})),n.d(t,"MidIDSelectList",(function(){return f})),n.d(t,"CIXSelect",(function(){return b})),n.d(t,"MidIXSelectList",(function(){return m})),n.d(t,"createPickId",(function(){return j})),n.d(t,"CIDSelectInPickId",(function(){return y}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(29),h=n(0);var d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).midIDSelectList=void 0,r.setRes(e.res),r.midIDSelectList=e,r}return Object(s.a)(n,[{key:"createMidList",value:function(){return new f(this.midIDSelectList.uq,this.midIDSelectList.ID)}},{key:"onItemClick",value:function(e){}},{key:"renderRight",value:function(){return null}},{key:"renderItem",value:function(e,t){var n=this,r=this.midIDSelectList,a=r.renderItem,i=r.ID;return function(e,t,n){return Object(h.jsxs)("label",{className:"mx-3 my-2 d-flex mb-0",children:[Object(h.jsx)("input",{type:"checkbox",onChange:e,className:"mr-3",defaultChecked:n}),t]})}((function(t){var r=n.midIDSelectList.onSelectChange;null===r||void 0===r||r(e,t.currentTarget.checked)}),(null!==a&&void 0!==a?a:i.render)(e,t),1===e.$in)}}]),n}(l.a),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this,e)).ID=void 0,a.onSelectChange=void 0,a.key=function(e){return e.id},a.ID=r,a}return Object(s.a)(n,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ID.loadSchema();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPageItems",value:function(){var e=this;return new l.b((function(t,n){return e.loadPageItems(t,n)}))}},{key:"loadPageItems",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.ID({IDX:this.ID,id:void 0,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(l.d),p=n(23),v=n(20),b=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(d),m=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e,r,a,i){var s;return Object(c.a)(this,n),(s=t.call(this,e,r)).IX=void 0,s.id=void 0,s.key=function(e){return e.id},s.IX=a,s.id=i,s}return Object(s.a)(n,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(Object(v.a)(n.prototype),"init",this).call(this);case 2:return e.next=4,this.IX.loadSchema();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPageItems",value:function(){var e=this;return new l.b((function(t,n){return e.loadPageItems(t,n)}))}},{key:"loadPageItems",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.IDinIX({ID:this.ID,IX:this.IX,id:this.id,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(f);function j(e,t){function n(){return(n=Object(i.a)(a.a.mark((function n(r,i,c){var s,o,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=new f(e,t),o=new y(s),n.next=4,o.call();case 4:return u=n.sent,n.abrupt("return",u);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(e,t,r){return n.apply(this,arguments)}}var y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSelectChange=function(e,t){r.selectedItem=e,r.closePage()},e.onSelectChange=r.onSelectChange,r}return n}(d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(1),a=n.n(r),i=n(12),c=n(2),s=n(3),o=n(4),u=n(15),l=n(5),h=n(6),d=n(7),f=n(53),p=n(54),v=n(34),b=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){return Object(b.jsx)("div",{className:"px-3 py-2",children:e.controller.props.ID.render(t)})},e}return Object(o.a)(n,[{key:"header",value:function(){var e=this.controller.props,t=e.listHeader,n=e.header;if(t)return t;if(n)switch(typeof n){default:return n;case"string":return n+" "+this.t("list")}var r=this.controller.props.ID,a=r.t(r.sName);return"string"===typeof a?a+" "+this.t("list"):Object(b.jsxs)(b.Fragment,{children:[a," ",this.t("list")]})}},{key:"right",value:function(){var e=this.controller,t=e.props,n=e.onAddItem,r=t.renderRight;return null===r?null:void 0!==r?r():Object(b.jsx)("button",{className:"btn btn-sm btn-success mr-1",onClick:n,children:Object(b.jsx)(d.FA,{name:"plus"})})}},{key:"content",value:function(){var e=this.controller,t=e.props,n=e.onClickItem,r=t.renderItem;return Object(b.jsx)("div",{children:Object(b.jsx)(d.List,{items:this.controller.pageItems,item:{render:null!==r&&void 0!==r?r:this.renderItem,onClick:n}})})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageItems.more();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}}]),n}(d.VPage),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).pageItems=void 0,e.onAddItem=Object(c.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=e.props.onAddItem)){t.next=3;break}return t.abrupt("return");case 3:if(void 0===n){t.next=7;break}return t.next=6,n();case 6:return t.abrupt("return");case 7:return r=new f.a(Object(i.a)(Object(i.a)({},e.props),{},{renderRight:void 0,onItemChanged:e.onItemChanged})),t.next=10,r.start();case 10:case"end":return t.stop()}}),t)}))),e.onClickItem=function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,s,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(u.a)(e),c=r.props,null!==(s=c.onClickItem)){t.next=4;break}return t.abrupt("return");case 4:if(void 0===s){t.next=8;break}return t.next=7,s(n);case 7:return t.abrupt("return",t.sent);case 8:return o=new p.a(Object(i.a)(Object(i.a)({},c),{},{renderRight:void 0,onItemChanged:e.onItemChanged})),t.next=11,o.start(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onItemChanged=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageItems.update(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"beforeStart",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageItems=new y(this.uq,this.props.ID),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalStart",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageItems.first({});case 2:this.openVPage(m);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this,!0)).uq=void 0,a.ID=void 0,a.uq=e,a.ID=r,a}return Object(o.a)(n,[{key:"loadResults",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.ID({IDX:this.ID,id:void 0,page:{start:n,size:r}});case 2:return i=e.sent,e.abrupt("return",{$page:i});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=this._items.find((function(t){return t.id===e.id}));t?Object.assign(t,e):this._items.unshift(e)}}]),n}(d.PageItems)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(10),a=n(12),i=n(1),c=n.n(i),s=n(2),o=n(3),u=n(4),l=n(5),h=n(6),d=n(8),f=n(40),p=n(110),v=n(7),b=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){var e=this.controller.props.ID;return e.t(e.sName)}},{key:"content",value:function(){var e=this.controller,t=e.cFormView,n=e.item;return Object(b.jsx)("div",{className:"p-3",children:t.renderForm(n)})}}]),n}(v.VPage),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).cFormView=void 0,e.onSubmit=function(){var t=Object(s.a)(c.a.mark((function t(n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveID(r.data);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e._itemSchema=void 0,e._uiSchema=void 0,e}return Object(u.a)(n,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.ID,this.item=t,e.next=4,this.loadSchema();case 4:return e.next=6,this.buildItemSchema();case 6:return this._itemSchema=e.sent,this._uiSchema=this.buildUISchema(),this.createFormView(),e.next=11,this.cFormView.setNO(n);case 11:this.openVPage(m);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFormView",value:function(){var e=this.props,t=e.ID,n=e.fieldCustoms,r=new f.d(t.ui,n,t.t);this.cFormView=new f.c(r),this.cFormView.onSubmit=this.onSubmit}},{key:"saveID",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,o,u,l,h,f,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,i=r.ID,o=r.onItemChanged,u=r.saveItem,l=null===(n=this.item)||void 0===n?void 0:n.id,h=Object(a.a)(Object(a.a)({},t),{},{id:l}),u||(u=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={})[i.name]=[t],e.next=4,p.uq.Acts(n);case 4:if(r=e.sent,!(a=r[i.name])){e.next=9;break}return l=a[0],e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,u(h);case 6:if((f=e.sent)&&(h.id=f),!o){e.next=11;break}return e.next=11,o(h);case 11:Object(d.r)((function(){p.item?Object.assign(p.item,h):p.item=h}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildItemSchema",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,n,i,s,o,u,l,h,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.ID,n=[],i=t.ui.fieldArr,s=Object(r.a)(i),e.prev=4,s.s();case 6:if((o=s.n()).done){e.next=20;break}u=o.value,l=u.type,h=u.isKey,d=h,f=Object(a.a)(Object(a.a)({},u),{},{required:d}),e.t0=l,e.next=14;break;case 14:return n.push(f),e.abrupt("break",16);case 16:f.ID;case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(4),s.e(e.t1);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return n.push({name:"submit",type:"submit"}),e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,this,[[4,22,25,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildUISchema",value:function(){var e=this.props.ID,t={};this._uiSchema={items:t};var n=e.ui.fields;if(n){var a,i=Object(r.a)(this._itemSchema);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=c.name;Object.assign(c,n[s]),t[s]=c}}catch(o){i.e(o)}finally{i.f()}}return t.submit={label:"\u63d0\u4ea4",className:"btn btn-primary",widget:"button"},this._uiSchema}},{key:"loadSchema",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.ID.loadSchema();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"uiSchema",get:function(){return this._uiSchema}},{key:"setIDUi",value:function(e,t,n){if("id"===e.type){var r=e;r.widget="id",r.pickId=t,r.Templet=n}else alert("".concat(e.name," is not id UI"))}},{key:"setNO",value:function(e,t){if(t&&"string"===t.type){var n=t;n.readOnly=!0,n.defaultValue=e}}}]),n}(p.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(10),a=n(1),i=n.n(a),c=n(12),s=n(2),o=n(3),u=n(4),l=n(5),h=n(6),d=n(110),f=n(53),p=n(11),v=n(7),b=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){var e=this.controller.props.ID;return e.t(e.sName)}},{key:"right",value:function(){var e=this.controller,t=e.props,n=e.onEditItem,r=t.renderRight;return null===r?null:void 0!==r?r():Object(b.jsx)("button",{className:"btn btn-sm btn-info mr-1",onClick:n,children:Object(b.jsx)(v.FA,{name:"pencil"})})}},{key:"content",value:function(){var e=this,t=Object(p.a)((function(){var t=e.controller,n=t.item,r=t.gridProps;return Object(b.jsx)("div",{className:"py-3",children:Object(b.jsx)(v.PropGrid,{rows:r,values:n})})}));return Object(b.jsx)(t,{})}}]),n}(v.VPage),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a)))._props=void 0,e.onEditItem=Object(s.a)(i.a.mark((function t(){var n,r,a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.onEditItem,a=n.onItemChanged,null!==r){t.next=3;break}return t.abrupt("return");case 3:if(void 0===r){t.next=10;break}return t.next=6,r(e.item);case 6:e.item=t.sent,null===a||void 0===a||a(e.item),t.next=13;break;case 10:return o=new f.a(Object(c.a)(Object(c.a)({},e.props),{},{renderRight:void 0,onItemChanged:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===a||void 0===a||a(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),t.next=13,o.start(e.item);case 13:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"internalStart",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.item=t,e.next=3,this.props.ID.loadSchema();case 3:this.buildGridProps(),this.openVPage(m);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gridProps",get:function(){return void 0!==this._props?this._props:this._props=this.buildGridProps()}},{key:"buildGridProps",value:function(){var e,t=[],n=this.props.ID,a=n.ui,i=n.t,s=(n.schema,a.fieldArr),o=Object(r.a)(s);try{for(o.s();!(e=o.n()).done;){var u=e.value,l=Object(c.a)(Object(c.a)({},u),{},{label:i(u.label)});t.push(l)}}catch(h){o.e(h)}finally{o.f()}return t}}]),n}(d.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(126);function a(e){var t=Object(r.a)(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function i(e){return{id:0,guest:Object(r.a)(e).guest,token:e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(10),u=n(13),l="https://tv.jkchemical.com",h="localhost:3015",d={centerhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com",REACT_APP_UNIT:"24"}).REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com",REACT_APP_UNIT:"24"}).REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com",REACT_APP_UNIT:"24"}).REACT_APP_UQ_DEBUG_HOST||h,local:!1},unitxhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com",REACT_APP_UNIT:"24"}).REACT_APP_UQ_DEBUG_HOST||h,local:!1},"uq-build":{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com",REACT_APP_RES_HOST:"https://tv.jkchemical.com",REACT_APP_UNIT:"24"}).REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}},f=["https://","http://"];function p(e){return!0===function(e){var t,n=Object(o.a)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!0===e.startsWith(r))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}(e)?e.endsWith("/")?e:e+"/":"http://".concat(e,"/")}function v(e){return p(e)}function b(e){var t="https://";return!0===e.startsWith(t)?(!0===(e=e.substr(t.length)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://".concat(e,"/tv/")}function m(e){if(e)return p(e)+"res/"}var j={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}},y=new(function(){function e(){Object(c.a)(this,e),this.testing=void 0,this.url=void 0,this.ws=void 0,this.resHost=void 0}return Object(s.a)(e,[{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.testing=t,!0!==u.f.isDevelopment){e.next=5;break}return e.next=5,this.tryLocal();case 5:n=this.getCenterHost(),this.url=v(n),this.ws=b(n),this.resHost=this.getResHost();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"debugHostUrl",value:function(e){return"http://".concat(e,"/hello")}},{key:"tryLocal",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,o,u,l,h,f,p,v,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in t=[],n=[],r=function(e){var t=d[e].value;n.findIndex((function(e){return e===t}))<0&&n.push(t)},d)r(i);for(c=0,s=n;c<s.length;c++)o=s[c],u=this.debugHostUrl(o),t.push(k(u));return e.next=7,Promise.all(t);case 7:for(l=e.sent,h=n.length,f=0;f<h;f++)for(b in p=l[f],v=n[f],d)(m=d[b]).value===v&&(m.local=p);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCenterHost",value:function(){var e=d.centerhost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")||!0===u.f.isDevelopment&&!0===n?t:l}},{key:"getResHost",value:function(){var e=d.reshost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")||!0===u.f.isDevelopment&&!0===n?t:"https://tv.jkchemical.com"}},{key:"getUrlOrDebug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uqhost";if(!1===u.f.isDevelopment)return e;var n=d[t];if(void 0===n)return e;var r=n.value,a=n.local;return!1===a?e:"http://".concat(r,"/")}},{key:"getUrlOrTest",value:function(e,t,n){var r;return n?t||(t=n):(n=t)||console.error("no server set for "+e),!0===this.testing?("-"!==n&&(t=n),r="test"):r="prod",!1===(t=this.getUrlOrDebug(t)).endsWith("/")&&(t+="/"),"".concat(t,"uq/").concat(r,"/").concat(e,"/")}},{key:"localCheck",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}());function O(e){return new Promise((function(t,n){fetch(e,j).then((function(e){e.text().then(t).catch(n)})).catch(n);var r=new Error("Connection timed out");u.f.setTimeout("fetchLocalCheck",n,2e3,r)}))}function k(e){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(1),a=n.n(r),i=n(2),c=n(5),s=n(6),o=n(3),u=n(4),l=n(9),h=n.n(l),d=n(0),f=function(){function e(t){Object(o.a)(this,e),this.el=void 0,this.el=t}return Object(u.a)(e,[{key:"scrollToTop",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,0)}),20)}},{key:"scrollToBottom",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,e.el.scrollTop+e.el.offsetHeight)}),20)}}]),e}(),p=100,v=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).bottomTime=0,e.topTime=0,e.div=void 0,e.refDiv=function(t){t?(e.div=t,e.div.addEventListener("resize",e.onResize)):e.div&&e.div.removeEventListener("resize",e.onResize)},e.onResize=function(e){console.error("div resize")},e.onScroll=function(){var t=Object(i.a)(a.a.mark((function t(n){var r,i,c,s,o,u,l,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,i=r.onScroll,c=r.onScrollTop,s=r.onScrollBottom,i&&i(n),o=n.target,u=new f(o),o.scrollTop<30&&void 0!==c&&(l=(new Date).getTime())-e.topTime>p&&(e.topTime=l,c(u).then((function(e){if(!0===e){var t=o.scrollHeight,n=200;n>t&&(n=t),o.scrollTop=n}}))),o.scrollTop+o.offsetHeight>o.scrollHeight-30&&void 0!==s&&(h=(new Date).getTime())-e.bottomTime>p&&(e.bottomTime=h,s(u));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"eachChild",value:function(e,t){var n=this,r=e.props;if(void 0!==r){var a=r.children;void 0!==a&&h.a.Children.forEach(a,(function(e,r){var a=e._$scroll;a&&a(t),console.log(e.toString()),n.eachChild(e,t)}))}}}]),n}(h.a.Component),b=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style;return Object(d.jsx)("div",{ref:this.refDiv,className:"tv-page",onScroll:this.onScroll,style:n,children:Object(d.jsx)("article",{className:t,children:this.props.children})})}}]),n}(v),m=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.className,a=n.style,i=n.webNav,c=i.navHeader,s=i.navRawHeader,o=i.navFooter,u=i.navRawFooter;return s?e=s:c&&(e=Object(d.jsx)("header",{children:Object(d.jsx)("main",{children:c})})),u?t=u:o&&(t=Object(d.jsx)("footer",{children:Object(d.jsx)("main",{children:o})})),Object(d.jsxs)("div",{ref:this.refDiv,className:"tv-page-webnav",onScroll:this.onScroll,style:a,children:[e,Object(d.jsx)("article",{className:r,children:this.props.children}),t]})}}]),n}(v)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(19),a=n.n(r),i={lang:void 0,$lang:void 0,district:void 0,$district:void 0};function c(e){var t=i.lang,n=i.district,r={};if(void 0===e)return r;a.a.merge(r,e._);var c=e[t];if(void 0===c)return r;a.a.merge(r,c._);var s=c[n];if(void 0===s)return r;a.a.merge(r,s);var o=r.entity;if(void 0!==o)for(var u in o)o[u.toLowerCase()]=o[u];return r}!function(){var e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){var r=n.split("-");e=r[0],r.length>1&&(t=r[1].toUpperCase())}else e="zh",t="CN";!function(e,t){i.lang=e,i.$lang="$"+e,i.district=t,i.$district="$"+t}(e,t)}();var s={};function o(e,t){if(void 0!==t){var n=i.$lang,r=i.$district;if(a.a.merge(e,t),void 0!==n){var c=t[n];if(void 0!==c){a.a.merge(e,c);var s=c[r];void 0!==s&&a.a.merge(e,s)}}return function(t){return e[t]||t}}}function u(e){o(s,e)}function l(e){return s[e]||e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(33),h=n(38),d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"typeName",get:function(){return"action"}},{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(i.length>1&&void 0!==i[1])||i[1],n=new f(this,t),e.next=4,n.request();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReturns",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitConvert",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new v(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(l.a)),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"path",get:function(){return"action/"+this.entity.name}},{key:"buildParams",value:function(){return{data:this.entity.pack(this.params)}}}]),n}(h.a),p=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"path",get:function(){return"action/"+this.entity.name+"/returns"}},{key:"xresult",value:function(e){for(var t=this.entity.returns,n=t.length,r={},a=0;a<n;a++){r[t[a].name]=e[a]}return r}}]),n}(f),v=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"path",get:function(){return"action-convert/"+this.entity.name}},{key:"buildParams",value:function(){return{data:this.params}}}]),n}(f)},function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var r,a,i=n(3),c=n(4),s=n(5),o=n(6),u=n(9),l=n(11),h=n(16),d=n.n(h),f=(n(219),n(0)),p=(Object(l.a)(r=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.badge,a=t.size,i=t.color,c=t.badgeAlign,s=t.badgeVertical,o=t.children,u=d()(n,"va-badge",a&&"va-badge-"+a,"va-badge-"+(i||"secondary"),c&&"va-badg-"+c,s&&"va-badg-"+s);return r&&(e=Object(f.jsx)("b",{children:r})),Object(f.jsxs)("div",{className:u,children:[o,e]})}}]),n}(u.Component)),n(220),Object(l.a)(a=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n,r=this.props,a=r.className,i=r.left,c=r.children,s=r.right,o=r.onClick;return void 0!==i&&(e=Object(f.jsx)("header",{children:i})),void 0!==s&&(t=Object(f.jsx)("footer",{children:s})),void 0!==o&&(n="cursor-pointer"),Object(f.jsxs)("div",{className:d()("va-lmr",a,n),onClick:o,children:[e,Object(f.jsx)("div",{children:c}),t]})}}]),n}(u.Component))||a),v=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.className,r=e.size,a=e.spin,i=e.fixWidth,c=e.border,s=e.pull,o=e.pulse,u=e.rotate,l=e.flip,h=e.inverse,p=d()(n,"fa",t&&"fa-"+t,r&&"fa-"+r,i&&"fa-fw",c&&"fa-border",s&&"fa-pull-"+s,a&&"fa-spin",o&&"fa-pulse",u&&"fa-rotate-"+u,l&&"fa-flip-"+l,h&&"fa-inverse");return Object(f.jsx)("i",{className:p})}}]),n}(u.Component),b=(u.Component,function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.iconClass,r=e.text,a=e.textClass;return Object(f.jsxs)("div",{className:"py-2",children:[Object(f.jsx)(v,{className:n,name:t,fixWidth:!0}),Object(f.jsx)("span",{className:a,children:r})]})}}]),n}(u.Component))},function(e,t,n){"use strict";n(40);var r=n(41);n.o(r,"CID")&&n.d(t,"CID",(function(){return r.CID})),n.o(r,"CRoles")&&n.d(t,"CRoles",(function(){return r.CRoles})),n.o(r,"MidIXID")&&n.d(t,"MidIXID",(function(){return r.MidIXID}));n(28),n(34),n(53),n(54),n(52),n(108),n(180),n(107),n(181),n(172),n(177);var a=n(168);n.d(t,"CID",(function(){return a.a})),n.d(t,"CRoles",(function(){return a.b})),n.d(t,"MidIXID",(function(){return a.c}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(10),a=n(5),i=n(6),c=n(3),s=n(4),o=n(19),u=n.n(o),l=new(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeItem",value:function(e){localStorage.removeItem(e)}}]),e}()),h=function(){function e(t,n){Object(c.a)(this,e),this.local=void 0,this.key=void 0,this.local=t,this.key=n}return Object(s.a)(e,[{key:"get",value:function(){try{var e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(t){return void this.local.removeItem(this.key)}}},{key:"set",value:function(e){var t=JSON.stringify(e,(function(e,t){if("_tuid"!==e)return t}));this.local.setItem(this.key,t)}},{key:"remove",value:function(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)}},{key:"child",value:function(e){return this.local.child(e)}},{key:"arr",value:function(e){return this.local.arr(e)}},{key:"map",value:function(e){return this.local.map(e)}}]),e}(),d=function(){function e(t){Object(c.a)(this,e),this.caches=void 0,this.locals=void 0,this.name=void 0,this.name=t,this.caches={},this.locals={}}return Object(s.a)(e,[{key:"getItem",value:function(e){var t=this.keyForGet(e);if(void 0!==t)return l.getItem(t)}},{key:"setItem",value:function(e,t){var n=this.keyForSet(e);l.setItem(n,t)}},{key:"removeItem",value:function(e){var t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)}},{key:"arr",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new f(r)}return n}},{key:"map",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new p(r)}return n}},{key:"removeLocal",value:function(e){var t=e.name,n=this.keyForRemove(t);if(void 0!==n){var r=this.locals[t];void 0===r?r=new f(n):this.locals[t]=void 0,r.removeAll()}}},{key:"child",value:function(e){var t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new h(this,e)}}]),e}(),f=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).index=void 0;var a=l.getItem(r.name);return r.index=null===a?[]:a.split("\n").map((function(e){return Number(e)})),r}return Object(s.a)(n,[{key:"saveIndex",value:function(){l.setItem(this.name,this.index.join("\n"))}},{key:"keyForGet",value:function(e){if(!(u.a.indexOf(this.index,e)<0))return"".concat(this.name,".").concat(e)}},{key:"keyForSet",value:function(e){var t=u.a.indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"keyForRemove",value:function(e){var t=u.a.indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"removeAll",value:function(){var e,t=Object(r.a)(this.index);try{for(t.s();!(e=t.n()).done;){var n=e.value;l.removeItem("".concat(this.name,".").concat(n))}}catch(a){t.e(a)}finally{t.f()}l.removeItem(this.name),this.index.splice(0)}},{key:"item",value:function(e){return this.child(e)}}]),n}(d),p=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).index=void 0,r.max=void 0,r.max=0,r.index={};var a=l.getItem(r.name);null!==a&&a.split("\n").forEach((function(e){var t=e.indexOf("\t");if(!(t<0)){var n=e.substr(0,t),a=Number(e.substr(t+1));!0!==isNaN(a)&&(r.index[n]=a,a>r.max&&(r.max=a))}}));return r}return Object(s.a)(n,[{key:"saveIndex",value:function(){var e=[];for(var t in this.index){var n=this.index[t];void 0!==n&&e.push("".concat(t,"\t").concat(n))}l.setItem(this.name,e.join("\n"))}},{key:"keyForGet",value:function(e){var t=this.index[e];if(void 0!==t)return"".concat(this.name,".").concat(t)}},{key:"keyForSet",value:function(e){var t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),"".concat(this.name,".").concat(t)}},{key:"keyForRemove",value:function(e){var t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),"".concat(this.name,".").concat(t)}},{key:"removeAll",value:function(){for(var e in this.index)l.removeItem("".concat(this.name,".").concat(this.index[e])),this.index[e]=void 0;l.removeItem(this.name),this.max=0}},{key:"item",value:function(e){return this.child(e)}}]),n}(d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=(n(9),n(11)),u=n(0),l=function(e,t,n){return Object(u.jsxs)(u.Fragment,{children:[e,": ",h(t)]})};function h(e){var t="{";if(void 0===e)return"undefined";for(var n in e){var r=e[n];if(t+=n+": ",void 0===r)t+="undefined";else if(null===r)t+="null";else switch(typeof r){default:t+=r;break;case"function":t+="function";break;case"object":t+="{obj}"}t+=", "}return t+"}"}var d=function(){function e(t,n,r){Object(c.a)(this,e),this.id=void 0,this.tuid=void 0,this.ui=void 0,this.isUndefined=void 0,this.id=Number(t),this.tuid=n,this.ui=r,this.isUndefined=void 0===this.tuid}return Object(s.a)(e,[{key:"obj",get:function(){return this.tuid.valueFromId(this.id)}},{key:"equ",value:function(e){return void 0!==e&&null!==e&&("object"===typeof e?this.id===e.id:this.id===e)}},{key:"render",value:function(e,t){if(void 0!==this.id&&null!==this.id&&!0!==isNaN(this.id)){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):l(n,r);switch(typeof r){case"undefined":return Object(u.jsxs)("span",{className:"text-black-50",children:[n," undefined"]});case"number":return Object(u.jsxs)("span",{className:"text-light",children:[n," ",this.id]})}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var a=e(r);return void 0!==a?a:Object(u.jsxs)("span",{className:"text-danger",children:[n," ",this.id]})}return l(n,r)}}},{key:"boxName",get:function(){return this.tuid.name}},{key:"assure",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuid.assureBox(this.id);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Object(o.a)((function(e){var t=e.tuidValue,n=e.ui,r=e.x,a=e.nullUI;if(void 0===t)return void 0===a?Object(u.jsx)("small",{className:"text-muted",children:"[\u65e0]"}):a();if(null===t)return void 0===a?Object(u.jsx)(u.Fragment,{children:"[null]"}):a();var i=typeof t;switch(i){default:if(void 0===n)return Object(u.jsxs)(u.Fragment,{children:[i,"-",t]});var c=n(t,r);return void 0!==c?c:Object(u.jsx)(u.Fragment,{children:t});case"object":var s=function(e,t,n){var r,a=e;switch(typeof e){case"undefined":r=Object(u.jsx)(u.Fragment,{children:"boxId undefined"});break;case"number":r=Object(u.jsxs)(u.Fragment,{children:["id:",e]});break;default:if("function"!==typeof a.render){if(void 0!==t)return t(e,n);r=l(a.boxName,e)}}return void 0!==r?Object(u.jsx)("del",{className:"text-danger",children:r}):a.render(t,n)}(t,n,r);return void 0!==s?s:void 0===a?Object(u.jsx)(u.Fragment,{children:"id null"}):a();case"number":return Object(u.jsxs)(u.Fragment,{children:["id...",t]})}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(9);var r=n(0);function a(){return Object(r.jsx)("div",{className:"d-flex h-100 align-items-center justify-content-center",children:Object(r.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})})}},,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(92),a=n(63),i=function(){var t=function(){for(var e,t,n=/\+/g,a=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},c=window.location.search.substring(1),s={};;){var o=a.exec(c);if(!o)break;s[i(o[1])]=i(o[2])}var u,l,h=s.u||s.unit;if(h){var d=h.indexOf("-");if(d>=0){var f=h.charCodeAt(d+1),p="tT";e=f===p.charCodeAt(0)||f===p.charCodeAt(1),h=h.substr(0,d)}else e=!1;t="0"===h[0]?Number(h):Object(r.a)(h),!0===isNaN(t)&&(t=void 0)}else{var v;e=/(\btest\b)/i.test(document.location.href);var b=document.getElementById("unit");if(b)v=b.innerText;else if(b=document.getElementById("unit.json")){var m=b.innerHTML;if(m){var j=JSON.parse(m);v=null===j||void 0===j?void 0:j.unit}}v||(v="24"),v&&(t=Number.parseInt(v),!1===Number.isInteger(t)&&"\u767e\u7075\u5a01"===v&&(t=24)),t||(t=0)}var y=navigator.languages&&navigator.languages[0]||navigator.language;if(y){var O=y.split("-");u=O[0],O.length>1&&(l=O[1].toUpperCase())}else u="zh",l="CN";var k=-(new Date).getTimezoneOffset()/60,x=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent);return{unit:t,testing:e,params:s,lang:u,district:l,timeZone:k,isMobile:x}}(),n=t.unit,i=t.testing,s=t.params,o=t.lang,u=t.district,l=t.timeZone,h=t.isMobile;return{unit:n,testing:i,params:s,lang:o,district:u,timeZone:l,browser:c(),isDevelopment:!1,isMobile:h,localDb:new a.a(!0===i?"$$":"$"),setTimeout:function(t,n,r){for(var a,i=arguments.length,c=new Array(i>3?i-3:0),s=3;s<i;s++)c[s-3]=arguments[s];return(a=e).setTimeout.apply(a,[n,r].concat(c))},clearTimeout:function(t){e.clearTimeout(t)},setInterval:function(t,n){for(var r,a=arguments.length,i=new Array(a>2?a-2:0),c=2;c<a;c++)i[c-2]=arguments[c];return(r=e).setInterval.apply(r,[t,n].concat(i))},clearInterval:function(t){e.clearInterval(t)}}}();function c(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))>=0?"Opera":navigator.userAgent.indexOf("Chrome")>=0?"Chrome":navigator.userAgent.indexOf("Safari")>=0?"Safari":navigator.userAgent.indexOf("Firefox")>=0?"Firefox":navigator.userAgent.indexOf("MSIE")>=0||!0===!!document.documentMode?"IE":"Unknown"}}).call(this,n(80))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(1),a=n.n(r),i=n(2);function c(){return s.apply(this,arguments)}function s(){return(s=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,124));case 2:return t=e.sent,e.abrupt("return",new t.CLogin);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return u.apply(this,arguments)}function u(){return(u=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,206));case 2:t=e.sent,(new t.CRegister).start();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(0).then(n.bind(null,206));case 2:t=e.sent,(new t.CForget).start();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n(98),n(33),n(60),n(43),n(99);var r=n(70);n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"IconText")&&n.d(t,"IconText",(function(){return r.IconText})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"UQsMan")&&n.d(t,"UQsMan",(function(){return r.UQsMan})),n.o(r,"UserView")&&n.d(t,"UserView",(function(){return r.UserView})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"setRes")&&n.d(t,"setRes",(function(){return r.setRes})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start}));n(100),n(102),n(101),n(103);var a=n(75);n.d(t,"UQsMan",(function(){return a.a}));n(109),n(104),n(171),n(71)},function(e,t,n){"use strict";var r=n(141);n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"IconText")&&n.d(t,"IconText",(function(){return r.IconText})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"TuidImport")&&n.d(t,"TuidImport",(function(){return r.TuidImport})),n.o(r,"TuidInner")&&n.d(t,"TuidInner",(function(){return r.TuidInner})),n.o(r,"UQsMan")&&n.d(t,"UQsMan",(function(){return r.UQsMan})),n.o(r,"UserView")&&n.d(t,"UserView",(function(){return r.UserView})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"setRes")&&n.d(t,"setRes",(function(){return r.setRes})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start}));var a=n(179);n.d(t,"TuidImport",(function(){return a.a})),n.d(t,"TuidInner",(function(){return a.b}));var i=n(142);n.d(t,"TuidsCache",(function(){return i.a}));n(64)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(4),s=n(3),o=n(5),u=n(6),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).ui=void 0,e.render=void 0,e.t=void 0,e}return n}(n(33).a),h=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).create=void 0,e.update=void 0,e.owner=void 0,e}return Object(c.a)(n,[{key:"typeName",get:function(){return"id"}},{key:"NO",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.post("id-no",{ID:this.name});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l)),d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"typeName",get:function(){return"idx"}}]),n}(l)),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"typeName",get:function(){return"ix"}}]),n}(l))},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(3),c=n(4),s=n(2);function o(e,t,n,r,a){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(a.a.mark((function e(t,n,r,i,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch(n,r,!1,i,c);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){function e(t,n){Object(i.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=n}return Object(c.a)(e,[{key:"xcall",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.xcall(this.path,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return i=e.sent,e.next=5,i.callFetch(t,n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,e.next=3,this.getHttpChannel();case 3:return r=e.sent,e.next=6,r.get(this.path+t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.post(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.put(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.delete(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(5),a=n(6),i=n(1),c=n.n(i),s=n(24),o=n(10),u=n(2),l=n(3),h=n(4),d=n(13),f=n(21),p=n(98),v=n(14),b=function(){function e(t){Object(l.a)(this,e),this.uqMans=[],this.collection=void 0,this.tvs=void 0,this.tvs=t||{},this.buildTVs(),this.uqMans=[],this.collection={}}return Object(h.a)(e,[{key:"buildUqs",value:function(){var t=Object(u.a)(c.a.mark((function t(n,r,a){var i,u,l,h,f,p,v,b,m,j,y,O,k,x,g;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init(n);case 2:if(i=d.f.localDb.map("$app"),u=i.child("version"),l=u.get(),r!==l){h=Object(o.a)(this.uqMans);try{for(h.s();!(f=h.n()).done;)f.value.localMap.removeAll()}catch(c){h.e(c)}finally{h.f()}u.set(r)}return t.next=8,this.load();case 8:if(!((p=t.sent).length>0)){t.next=11;break}return t.abrupt("return",p);case 11:if(p.push.apply(p,Object(s.a)(this.setTuidImportsLocal())),!(p.length>0)){t.next=14;break}return t.abrupt("return",p);case 14:if(a){v=Object(o.a)(a);try{for(v.s();!(b=v.n()).done;)m=b.value,j=m.dev,y=m.name,O=m.alias,k=j.name,x=j.alias,g=(null!==x&&void 0!==x?x:k).toLowerCase()+"/"+(null!==O&&void 0!==O?O:y).toLowerCase(),this.collection[g].config=m}catch(c){v.e(c)}finally{v.f()}}e._uqs=this.buildUQs();case 16:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"buildTVs",value:function(){if(this.tvs)for(var e in this.tvs){var t=this.tvs[e];if(void 0!==t){var n=e.toLowerCase();if(n!==e)for(var r in this.tvs[n]=t,t){var a=t[r];if(void 0!==a){var i=r.toLowerCase();i!==r&&(t[i]=a)}}}}}},{key:"init",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,s,u,l,h,d,f,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(o.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=22;break}if(i=a.value,s=i.uqOwner,u=i.ownerAlias,l=i.uqName,h=i.uqAlias,d=s+"/"+l,!this.collection[d]){e.next=10;break}return e.abrupt("continue",20);case 10:f=new p.a(this,i,void 0,this.tvs[d]||this.tvs[l]),this.uqMans.push(f),v=d.toLowerCase(),this.collection[v]=f,h&&(l=h),u&&(s=u),v=(d=s+"/"+l).toLowerCase(),this.collection[v]=f,n.push(f.init());case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),r.e(e.t0);case 27:return e.prev=27,r.f(),e.finish(27);case 30:return e.next=32,Promise.all(n);case 32:case"end":return e.stop()}}),e,this,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r,a,i,s,u,l,h,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],r=Object(o.a)(this.uqMans);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(i.loadEntities())}catch(c){r.e(c)}finally{r.f()}return e.next=6,Promise.all(n);case 6:s=e.sent,u=Object(o.a)(s);try{for(u.s();!(l=u.n()).done;)h=l.value,void 0!==(d=h)&&t.push(d)}catch(c){u.e(c)}finally{u.f()}return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildUQs",value:function(){var e,t=this,n={},r=Object(o.a)(this.uqMans);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=a.getUqKey(),c=i.toLowerCase(),s=a.createProxy();n[i]=s,c!==i&&(n[c]=s)}}catch(u){r.e(u)}finally{r.f()}return new Proxy(n,{get:function(e,n,r){var a=e[n.toLowerCase()];if(void 0!==a)return a;console.error("error in uqs"),t.showReload("\u65b0\u589e uq ".concat(String(n)))}})}},{key:"getUqMans",value:function(){return this.uqMans}},{key:"showReload",value:function(e){var t,n=Object(o.a)(this.uqMans);try{for(n.s();!(t=n.n()).done;){t.value.localMap.removeAll()}}catch(r){n.e(r)}finally{n.f()}v.nav.showReloadPage(e)}},{key:"setTuidImportsLocal",value:function(){var e,t=[],n=Object(o.a)(this.uqMans);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,i=Object(o.a)(a.tuidArr);try{for(i.s();!(r=i.n()).done;){var c=r.value;if(!0===c.isImport){var s=this.setInner(c);s&&t.push(s)}}}catch(u){i.e(u)}finally{i.f()}}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"setInner",value:function(e){var t=e.from,n=t.owner+"/"+t.uq,r=this.collection[n];if(void 0===r)return"setInner(tuidImport: TuidImport): uq ".concat(n," is not loaded");var a=e.name,i=r.tuid(a);return void 0===i?"setInner(tuidImport: TuidImport): uq ".concat(n," has no Tuid ").concat(a):!0===i.isImport?"setInner(tuidImport: TuidImport): uq ".concat(n," Tuid ").concat(a," is import"):void e.setFrom(i)}}],[{key:"build",value:function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,i,s,o,u,l,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.app,a=n.uqs,i=n.tvs,s=n.version,!r){t.next=8;break}return u=r.dev,l=r.name,h=r.version,t.next=5,e.load("".concat(u.name,"/").concat(l),h,i);case 5:o=t.sent,t.next=15;break;case 8:if(!a){t.next=14;break}return t.next=11,e.loadUqs(a,s,i);case 11:o=t.sent,t.next=15;break;case 14:throw new Error("either uqs or app must be defined in AppConfig");case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"buildUQs",value:function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.uqs,a=n.tvs,i=n.version,!r){t.next=7;break}return t.next=4,e.loadUqs(r,i,a);case 4:s=t.sent,t.next=8;break;case 7:throw new Error("either uqs or app must be defined in AppConfig");case 8:return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=Object(u.a)(c.a.mark((function t(n,r,a){var i,s,u,l,h,d,f,p,v,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.value=new m(n,a),s=i.appOwner,u=i.appName,l=i.localData,(h=l.get())&&h.version===r){t.next=14;break}return t.next=7,j(s,u);case 7:if((h=t.sent).id){t.next=10;break}return t.abrupt("return",["".concat(s,"/").concat(u,"\u4e0d\u5b58\u5728\u3002\u8bf7\u4ed4\u7ec6\u68c0\u67e5app\u5168\u540d\u3002")]);case 10:h.version=r,l.set(h),d=Object(o.a)(h.uqs);try{for(d.s();!(f=d.n()).done;)f.value.newVersion=!0}catch(c){d.e(c)}finally{d.f()}case 14:return v=(p=h).id,b=p.uqs,i.id=v,t.abrupt("return",i.buildUqs(b,r));case 17:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"loadUqs",value:function(){var t=Object(u.a)(c.a.mark((function t(n,r,a){var i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.value=new e(a),t.next=3,O(n);case 3:return s=t.sent,t.abrupt("return",i.buildUqs(s,r,n));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"uq",value:function(t){return e.value.collection[t.toLowerCase()]}},{key:"getUqUserRoles",value:function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(r=e.value.collection[n])){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=5,r.getRoles();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();b._uqs=void 0,b.value=void 0;var m=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e,r){var a;Object(l.a)(this,n),(a=t.call(this,r)).appOwner=void 0,a.appName=void 0,a.localMap=void 0,a.localData=void 0,a.id=void 0;var i=e.split("/");if(2!==i.length)throw new Error("tonvaApp name must be / separated, owner/app");return a.appOwner=i[0],a.appName=i[1],a.localMap=d.f.localDb.map(e),a.localData=a.localMap.child("uqData"),a}return n}(b);function j(e,t){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.b("tv/",void 0),e.next=3,r.appUqs(t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,s,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){var t=e.dev,n=e.name,r=e.version,a=e.alias;return{owner:t.name,ownerAlias:t.alias,name:n,version:r,alias:a}})),r=new f.b("tv/",void 0),e.next=4,r.uqs(n);case 4:for(a=e.sent,i=0;i<n.length;i++)s=n[i],o=s.ownerAlias,u=s.alias,a[i].ownerAlias=o,a[i].uqAlias=u;return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.r(t),n.d(t,"CIDSelect",(function(){return p})),n.d(t,"createPickId",(function(){return v})),n.d(t,"CIDSelectInPickId",(function(){return b}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(52),h=n(7),d=n(0),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){return Object(d.jsx)("div",{className:"px-3 py-2",children:e.controller.props.ID.render(t)})},e}return Object(s.a)(n,[{key:"header",value:function(){var e=this.t("select"),t=this.controller.props,n=t.listHeader,r=t.header;if(n)return n;if(r)switch(typeof r){default:return r;case"string":return e+" "+r+" "}var a=this.controller.props.ID,i=a.t(a.sName);return"string"===typeof i?e+" "+i:Object(d.jsxs)(d.Fragment,{children:[e," ",i]})}},{key:"right",value:function(){return null}},{key:"content",value:function(){var e=this.controller,t=e.props,n=e.onClickItem,r=t.renderItem;return Object(d.jsx)("div",{children:Object(d.jsx)(h.List,{items:this.controller.pageItems,item:{render:null!==r&&void 0!==r?r:this.renderItem,onClick:n}})})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageItems.more();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}}]),n}(h.VPage),p=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onClickItem=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.returnCall(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageItems.first({});case 2:this.openVPage(f);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(l.a);function v(e,t){function n(){return(n=Object(i.a)(a.a.mark((function n(r,i,c){var s,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=new b({uq:e,ID:t}),n.next=4,s.call();case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(e,t,r){return n.apply(this,arguments)}}var b=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSelectChange=function(t,n){e.closePage()},e}return n}(p)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(15),u=n(5),l=n(6),h=n(9),d=n(11),f=n(8),p=n(97),v=n(18),b=n(35),m=n(0),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i,s){var u;return Object(c.a)(this,n),(u=t.call(this,e,r,a,i,s)).resId=null,u.page=Object(d.a)((function(e){var t=e.resolve,n=u.uiItem&&u.uiItem.size;return Object(m.jsx)(p.a,{label:"\u66f4\u6539"+u.label,id:u.resId,size:n,onSaved:function(e){t(e)}})})),Object(f.o)(Object(o.a)(u),{resId:f.p}),u}return Object(s.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resId=this.value,e.abrupt("return",new Promise((function(e,n){v.b.push(h.createElement(t.page,{resolve:e,reject:n}),(function(){return n()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(b.a)},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=/^[0-9]*$/,a=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(12),c=n(10),s=n(2),o=n(3),u=n(4),l=function(){function e(t,n){Object(o.a)(this,e),this.uq=void 0,this.res=void 0,this.uq=t,this.res=n}return Object(u.a)(e,[{key:"buildItemSchema",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,o,u,l,h,d,f,p,v,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.ID,s=[],o=r.ui.fieldArr,u=Object(c.a)(o),e.prev=4,u.s();case 6:if((l=u.n()).done){e.next=24;break}h=l.value,d=h.type,f=h.isKey,p=f,v=Object(i.a)(Object(i.a)({},h),{},{required:p}),e.t0=d,e.next=14;break;case 14:return s.push(v),e.abrupt("break",16);case 16:if(!(b=v.ID)){e.next=22;break}return e.next=20,Promise.resolve().then(n.bind(null,51));case 20:m=e.sent,this.setIDUi(v,m.createPickId(this.uq,b),b.render);case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),u.e(e.t1);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return s.push({name:"submit",type:"submit"}),e.abrupt("return",s);case 34:case"end":return e.stop()}}),e,this,[[4,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildUISchema",value:function(e){var t=e.ID.ui.fields,n=Object(i.a)({},t);return n.submit={label:"\u63d0\u4ea4",className:"btn btn-primary",widget:"button"},{items:n}}},{key:"buildGridProps",value:function(e){var t,n=[],r=e.ui,a=e.t,s=e.schema.exFields,o=r.fieldArr,u=Object(c.a)(o);try{var l=function(){var e=t.value;if(!(null===s||void 0===s?void 0:s.find((function(t){return t.field===e.name}))))return"continue";var r=Object(i.a)(Object(i.a)({},e),{},{label:a(e.label)});n.push(r)};for(u.s();!(t=u.n()).done;)l()}catch(h){u.e(h)}finally{u.f()}return n}},{key:"setIDUi",value:function(e,t,n){if("id"===e.type){var r=e;r.widget="id",r.pickId=t,r.Templet=n}else alert("".concat(e.name," is not id UI"))}},{key:"setNO",value:function(e,t){if(t&&"string"===t.type){var n=t;n.readOnly=!0,n.defaultValue=e}}}]),e}()},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(24),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(19),l=n.n(u),h=n(8),d=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(s.a)(this,e),this.loading=!1,this.beforeLoad=!0,this.loaded=!1,this._items=null,this.allLoaded=!1,this.topDiv="$$top",this.bottomDiv="$$bottom",this.isFirst=!0,this.pageItemAction=void 0,this.itemConverter=void 0,this.scrollToTop=function(){t.scrollIntoView(t.topDiv)},this.scrollToBottom=function(){t.scrollIntoView(t.bottomDiv)},this.param=void 0,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this.sortOrder=void 0,this.changing=!1,Object(h.o)(this,{loading:h.p,beforeLoad:h.p,loaded:h.p,_items:h.p,allLoaded:h.p,items:h.h,topDiv:h.p,bottomDiv:h.p}),void 0===n&&(n=!1),this._items=h.p.array([],{deep:n})}return Object(o.a)(e,[{key:"items",get:function(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0}},{key:"setEachPageItem",value:function(e){this.pageItemAction=e}},{key:"setItemConverter",value:function(e){this.itemConverter=e}},{key:"scrollIntoView",value:function(e){setTimeout((function(){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView()}),20)}},{key:"getPageId",value:function(e){}},{key:"setPageStart",value:function(e){this.pageStart=this.getPageId(e)}},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,c,s,o,u,l,h,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadResults(t,n,r);case 2:if(a=e.sent,c=a.$page,!this.itemConverter){e.next=9;break}for(s=[],o=c.length,u=0;u<o;u++)l=this.itemConverter(c[u],a),s.push(l);return e.abrupt("return",s);case 9:if(void 0!==this.pageItemAction)for(h=c.length,d=0;d<h;d++)this.pageItemAction(c[d],a);return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=this;Object(h.r)((function(){e.isFirst=!0,e.beforeLoad=!0,e.loaded=!1,e.param=void 0,e.allLoaded=!1,e.pageStart=void 0,e._items.clear()}))}},{key:"append",value:function(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)}},{key:"first",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this.beforeLoad=!1,this.param=t,e.next=5,this.more();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attach",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s,o,u,l,h,d,f,p,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.sortOrder){e.next=3;break}return console.error("\u6ca1\u6709\u5b9a\u4e49\u589e\u51cf\u5e8f\uff0c\u65e0\u6cd5attach"),e.abrupt("return");case 3:if(!0!==this.changing){e.next=5;break}return e.abrupt("return");case 5:this.changing=!0,t=this._items,n="asc"===this.sortOrder,"tail"===this.appendPosition?(r=t[0],a=this.scrollToTop,c=function(e){return t.unshift(e)}):(s=t.length,r=t[s-1],a=this.scrollToBottom,c=function(e){return t.splice(s,0,e)}),o=this.getPageId(r),u=void 0,l=0,h=50;case 12:if(!(l<h)){e.next=39;break}return e.next=15,this.load(this.param,u,3);case 15:if(d=e.sent,0!==(f=d.length)){e.next=19;break}return e.abrupt("break",39);case 19:p=0;case 20:if(!(p<f)){e.next=37;break}if(v=d[p],u=this.getPageId(v),!0!==n){e.next=29;break}if(!(u>=o)){e.next=27;break}return h=0,e.abrupt("break",37);case 27:e.next=32;break;case 29:if(!(u<=o)){e.next=32;break}return h=0,e.abrupt("break",37);case 32:c(v),++l;case 34:p++,e.next=20;break;case 37:e.next=12;break;case 39:this.changing=!1,l>0&&a();case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.changing){e.next=2;break}return e.abrupt("return");case 2:return this.changing=!0,e.next=5,this.load(this.param,void 0,this.firstSize>this.pageSize?this.firstSize:this.pageSize);case 5:t=e.sent,this._items.clear(),this.setLoaded(t),this.changing=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRefreshPageId",value:function(e){return this.getPageId(e)}},{key:"onLoad",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoaded",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"more",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.allLoaded){e.next=2;break}return e.abrupt("return",!1);case 2:if(!0!==this.loading){e.next=4;break}return e.abrupt("return",!0);case 4:if(!0!==this.changing){e.next=6;break}return e.abrupt("return",!0);case 6:return Object(h.r)((function(){c.loading=!0,c.changing=!0})),e.next=9,this.onLoad();case 9:return void 0===this.pageStart&&this.setPageStart(void 0),t=this.pageSize+1,!0===this.isFirst&&this.firstSize>this.pageSize&&(t=this.firstSize+1),e.next=14,this.load(this.param,this.pageStart,t);case 14:return n=e.sent,r=n.length,!0===this.isFirst&&r>this.firstSize||!1===this.isFirst&&r>this.pageSize?(a=!1,--r,n.splice(r,1)):a=!0,this.setLoaded(n),this.onLoaded(),Object(h.r)((function(){c.loaded=!0,c.allLoaded=a,c.isFirst=!1,c.changing=!1,c.loading=!1})),e.abrupt("return",!this.allLoaded);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLoaded",value:function(e){var t,n,a=e.length;0===a?(this.setPageStart(void 0),this._items.clear()):(this.setPageStart(e[a-1]),"tail"===this.appendPosition?(t=this._items).push.apply(t,Object(r.a)(e)):(n=this._items).unshift.apply(n,Object(r.a)(e.reverse())))}},{key:"findItem",value:function(e){var t=this,n=this.getPageId(e),r=l.a.findIndex(this._items,(function(e){return t.getPageId(e)===n}));if(!(r<0))return this._items[r]}},{key:"removeItem",value:function(e){var t=this,n=this.getPageId(e),r=l.a.findIndex(this._items,(function(e){return t.getPageId(e)===n}));if(!(r<0))return this._items.splice(r,1)[0]}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=r.charCodeAt(0),i=r.charCodeAt(9),c=r.charCodeAt(10),s=r.charCodeAt(35),o=r.charCodeAt(36),u=r.charCodeAt(61);function l(e){if(null===e)return null;if(void 0!==e){if("string"!==typeof e)return Number.NaN;var t=e.length;if(0===t)return Number.NaN;for(var n=0,r=0;r<t;r++){var l=e.charCodeAt(r),h=void 0;if(l<a)return Number.NaN;if(l<=i)h=l-a;else{if(l<c)return Number.NaN;if(l<=s)h=l-c+10;else{if(l<o)return Number.NaN;if(!(l<=u))return Number.NaN;h=l-o+36}}n*=62,n+=h}return n}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=new(function(){function e(){Object(c.a)(this,e),this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}return Object(s.a)(e,[{key:"registerReceiveHandler",value:function(){var e,t=this.handlerSeed++,n=arguments.length<=0?void 0:arguments[0];switch(typeof n){case"string":e=arguments.length<=1?void 0:arguments[1],this.msgHandlers[t]={type:n,handler:e};break;case"function":this.anyHandlers[t]=n}return t}},{key:"unregisterReceiveHandler",value:function(e){delete this.anyHandlers[e],delete this.msgHandlers[e]}},{key:"dispatch",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.$type,e.t0=a.a.keys(this.anyHandlers);case 2:if((e.t1=e.t0()).done){e.next=8;break}return r=e.t1.value,e.next=6,this.anyHandlers[r](t);case 6:e.next=2;break;case 8:e.t2=a.a.keys(this.msgHandlers);case 9:if((e.t3=e.t2()).done){e.next=18;break}if(i=e.t3.value,c=this.msgHandlers[i],s=c.type,o=c.handler,s===n){e.next=14;break}return e.abrupt("continue",9);case 14:return e.next=16,o(t);case 16:e.next=9;break;case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(24),a=n(3),i=n(4),c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#";Object(a.a)(this,e),this.root=void 0,this._routes=[],this._useHash=void 0,this._hash=void 0,this._paused=void 0,this._destroyed=void 0,this._lastRouteResolved=void 0,this._notFoundHandler=void 0,this._defaultHandler=void 0,this._usePushState=void 0,this._genericHooks=void 0,this._historyUpdateMethod=void 0,this.timout=void 0,this._onLocationChange=function(){console.log("_onLocationChange"),t.resolve()},this.root=null,this._useHash=r,this._hash=i||"#",this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!r&&e.isPushStateAvailable(),this._genericHooks=null,this._historyUpdateMethod="pushState",n?this.root=r?n.replace(/\/$/,"/"+this._hash):n.replace(/\/$/,""):r&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}return Object(i.a)(e,[{key:"navigate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=e||"",this._usePushState)t=(t=(t=(n?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/")).replace("/#test/","/"),this._historyUpdate({},"",t),this.resolve();else if("undefined"!==typeof window){e=e.replace(new RegExp("^"+this._hash),"");var r=window,a=r.location;a.href=a.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e}return this}},{key:"on",value:function(){var t=this,n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];switch(typeof n){case"function":this._defaultHandler={handler:n,hooks:r},this._notFoundHandler||(this._notFoundHandler=this._defaultHandler);break;case"object":var a=Object.keys(n).sort(e.compareUrlDepth);a.forEach((function(e){return t.on(e,n[e])}));break;default:if(arguments.length<2)break;if("/"===n){this._defaultHandler={handler:"object"===typeof r?r.uses:r,hooks:arguments.length<=2?void 0:arguments[2]};break}this._add(n,r,arguments.length<=2?void 0:arguments[2])}return this}},{key:"off",value:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce((function(t,n){return n.handler!==e&&t.push(n),t}),[]),this}},{key:"notFound",value:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this}},{key:"resolve",value:function(t){var n=this,a=t||this._cLoc(),i=this._getRoot(),c=a.replace(i,"");if(this._useHash){c=c.replace(new RegExp("^\\/"+this._hash),"/")}var s=e.extractGETParameters(t||this._cLoc()),o=e.getOnlyURL(c,this._useHash,this._hash);if(!1===o.startsWith("/")&&(o="/"+o),this._paused)return!1;if(this._lastRouteResolved&&o===this._lastRouteResolved.url&&s===this._lastRouteResolved.query)return this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1;var u=e.match(o,this._routes),l=function(t){e.manageHooks((function(){e.manageHooks((function(){n._callLeave(),n._lastRouteResolved={url:o,query:s,hooks:t.hooks},t.handler(s)}),t.hooks)}),n._genericHooks)};if(!1===u)return this._defaultHandler&&(""===o||"/"===o||o===this._hash||e.isHashedRoot(o,this._useHash,this._hash))?(l(this._defaultHandler),!0):(this._notFoundHandler&&l(this._notFoundHandler),!1);var h=u;if(h){this._callLeave(),this._lastRouteResolved={url:o,query:s,hooks:h.route.hooks,params:h.params,name:h.route.name};var d=h.route.handler;return e.manageHooks((function(){e.manageHooks((function(){h.route.route instanceof RegExp?d.apply(void 0,Object(r.a)(h.match.slice(1,h.match.length))):d(h.params,s)}),h.route.hooks,h.params,n._genericHooks)}),this._genericHooks,h.params),h}}},{key:"destroy",value:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this.timout),"undefined"!==typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))}},{key:"updatePageLinks",value:function(){var e=this;"undefined"!==typeof document&&this._findLinks().forEach((function(t){t.hasListenerAttached||(t.addEventListener("click",(function(n){if((n.ctrlKey||n.metaKey)&&"a"===n.currentTarget.tagName.toLowerCase())return!1;var r=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(r.replace(/\/+$/,"").replace(/^\/+/,"/")))})),t.hasListenerAttached=!0)}))}},{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce((function(n,r){if(r.name===e)for(var a in n=r.route.toString(),t)n=n.replace(":"+a,t[a]);return n}),"");return this._useHash?this._hash+n:n}},{key:"link",value:function(e){return this._getRoot()+e}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyUpdateMethod=e?"replaceState":"pushState"}},{key:"resume",value:function(){this.pause(!1)}},{key:"historyAPIUpdateMethod",value:function(e){return"undefined"===typeof e?this._historyUpdateMethod:(this._historyUpdateMethod=e,e)}},{key:"disableIfAPINotAvailable",value:function(){e.isPushStateAvailable()||this.destroy()}},{key:"lastRouteResolved",value:function(){return this._lastRouteResolved}},{key:"getLinkPath",value:function(e){return e.getAttribute("href")}},{key:"hooks",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this._genericHooks=e}))},{key:"_add",value:function(e,t,n){return"string"===typeof e&&(e=encodeURI(e)),this._routes.push("object"===typeof t?{route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}:{route:e,handler:t,name:void 0,hooks:n}),this._add}},{key:"_historyUpdate",value:function(e,t,n){switch(this._historyUpdateMethod){default:throw Error("unknow history method "+this._historyUpdateMethod);case"pushState":return void window.history.pushState(e,t,n);case"replaceState":return void window.history.replaceState(e,t,n)}}},{key:"_getRoot",value:function(){if(null===this.root){var t=this._cLoc().split("?")[0];this.root=e.root(t,this._routes)}return this.root.replace("#test","")}},{key:"_listen",value:function(){var t=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(e.isHashChangeAPIAvailable())window.addEventListener("hashchange",this._onLocationChange);else{var n=this._cLoc();!function e(){var r=t._cLoc();n!==r&&(n=r,t.resolve()),t.timout&&clearTimeout(t.timout),t.timout=setTimeout(e,200)}()}}},{key:"_cLoc",value:function(){if("undefined"!==typeof window){var t=window.location.href;return e.cleanUrl(t)}return""}},{key:"_findLinks",value:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))}},{key:"_callLeave",value:function(){var e=this._lastRouteResolved;if(e){var t=e.params,n=e.hooks;n&&n.leave&&n.leave(t)}}}],[{key:"isPushStateAvailable",value:function(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}},{key:"clean",value:function(t){return t instanceof RegExp?t:e.cleanUrl(t)}},{key:"cleanUrl",value:function(e){return e.replace(/\/+$/,"").replace(/^\/+/,"^/")}},{key:"regExpResultToParams",value:function(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce((function(e,n,r){return null===e&&(e={}),e[t[r]]=decodeURIComponent(n),e}),null):null}},{key:"replaceDynamicURLParts",value:function(t){var n=[];return{regexp:t instanceof RegExp?t:new RegExp(t.replace(e.PARAMETER_REGEXP,(function(t,r,a){return n.push(a),e.REPLACE_VARIABLE_REGEXP})).replace(e.WILDCARD_REGEXP,e.REPLACE_WILDCARD)+e.FOLLOWED_BY_SLASH_REGEXP,e.MATCH_REGEXP_FLAGS),paramNames:n}}},{key:"getUrlDepth",value:function(e){return e.replace(/\/$/,"").split("/").length}},{key:"compareUrlDepth",value:function(t,n){return e.getUrlDepth(n)-e.getUrlDepth(t)}},{key:"findMatchedRoutes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.map((function(n){var r=e.replaceDynamicURLParts(e.clean(n.route)),a=r.regexp,i=r.paramNames,c=t.replace(/^\/+/,"/").match(a),s=e.regExpResultToParams(c,i);return!!c&&{match:c,route:n,params:s}})).filter((function(e){return e}))}},{key:"match",value:function(t,n){return e.findMatchedRoutes(t,n)[0]||!1}},{key:"root",value:function(t,n){var r=RegExp("\\/:\\D(\\w*)","g"),a=n.map((function(e){var n=e.route;if(""===n||"*"===n)return t;"string"===typeof n&&(n=n.replace(r,"\\/(\\w|%|[\u4e00-\u9fcc])+"));var a=n+"";return t.split(new RegExp(a))[0]})),i=e.cleanUrl(t),c=a.length;if(0===c)return i;var s=a[0];return 1===c?s:a.reduce((function(e,t){return e.length>t.length&&(e=t),e}),s)}},{key:"isHashChangeAPIAvailable",value:function(){return"undefined"!==typeof window&&"onhashchange"in window}},{key:"extractGETParameters",value:function(e){return e.split(/\?(.*)?$/).slice(1).join("")}},{key:"getOnlyURL",value:function(t,n,r){var a,i=function(e){return e.split(/\?(.*)?$/)[0]};return"undefined"===typeof r&&(r="#"),e.isPushStateAvailable()&&!n?i(t).split(r)[0]:(a=t.split(r)).length>1?i(a[1]):i(a[0])}},{key:"manageHooks",value:function(e,t,n,r){if(t&&"object"===typeof t){if(t.before)return void t.before((function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r&&(e(),t.after&&t.after(n))}),n);if(t.after)return e(),void(t.after&&t.after(n))}e()}},{key:"isHashedRoot",value:function(t,n,r){if(e.isPushStateAvailable()&&!n)return!1;if(!t.match(r))return!1;var a=t.split(r);return a.length<2||""===a[1]}}]),e}();c.PARAMETER_REGEXP=/([:*])(\w+)/g,c.WILDCARD_REGEXP=/\*/g,c.REPLACE_VARIABLE_REGEXP="([^\\/]+)",c.REPLACE_WILDCARD="(?:.*)",c.FOLLOWED_BY_SLASH_REGEXP="(?:\\/$|$)",c.MATCH_REGEXP_FLAGS="";new c},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(3),a=n(4),i=n(5),c=n(6),s=n(1),o=n.n(s),u=n(2),l=n(9),h=n(18),d=n(0);function f(e,t){var n=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.back();case 2:(n=e.afterBack)&&n();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=h.b.level>1||window.self!==window.top,a=e.back,i=e.right,c=e.center,s=e.logout,l=e.className,f=e.ex;if(!0!==t||a||i||c){var p,v;if(void 0!==s&&window.self===window.top&&("boolean"===typeof s&&!0===s||"function"===typeof s)){var b=h.b.user;if(void 0!==b){var m=b.nick,j=b.name;v=Object(d.jsxs)("div",{className:"d-flex align-items-center",children:[Object(d.jsx)("small",{className:"text-light",children:m||j}),Object(d.jsx)("div",{className:"ml-2 py-2 px-3 cursor-pointer",role:"button",onClick:function(){var t=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!==typeof(n=e.logout)){t.next=4;break}return t.next=4,n();case 4:return t.next=6,h.b.logout(void 0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();h.b.showLogout(t)},children:Object(d.jsx)("i",{className:"fa fa-sign-out fa-lg"})})]})}}if(r)switch(e.back){case"none":p=void 0;break;default:case"back":p=Object(d.jsx)("nav",{onClick:n,children:h.b.backIcon});break;case"close":p=Object(d.jsx)("nav",{onClick:n,children:h.b.closeIcon})}window.self!==window.top&&console.log(document.location.href),void 0===p&&"string"===typeof c&&(c=Object(d.jsx)("div",{className:"px-3",children:c}));var y=(i||v)&&Object(d.jsxs)("aside",{children:[i," ",v]}),O=Object(d.jsxs)("header",{className:l,children:[Object(d.jsxs)("nav",{children:[p,Object(d.jsx)("div",{children:c}),y]}),f]});return!0===t?O:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("section",{className:"tv-page-header",children:O}),O]})}}l.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return k}));var r,a,i=n(5),c=n(6),s=n(1),o=n.n(s),u=n(2),l=n(3),h=n(4),d=n(9),f=n(8),p=n(11),v=n(16),b=n.n(v),m=(n(215),n(58)),j=n(0),y=function(){function e(){Object(l.a)(this,e),this.loaded=!1,this.selected=!1,this.name=void 0,this.caption=void 0,this.contentBuilder=void 0,this.page=void 0,this.notify=void 0,this.load=void 0,this.onShown=void 0,this.onScroll=void 0,this.onScrollTop=void 0,this.onScrollBottom=void 0,this.className=void 0,this._content=void 0,Object(f.o)(this,{loaded:f.p,selected:f.p})}return Object(h.a)(e,[{key:"content",get:function(){return this.load&&!1===this.loaded?null:(!1===this.selected||this._content||(void 0!==this.contentBuilder?this._content=this.contentBuilder():void 0!==this.page?this._content=this.page.content():this._content=Object(j.jsx)("div",{className:"p-5",children:"tab \u5e94\u8be5\u5b9a\u4e49content\u6216\u8005page"})),this._content)}},{key:"shown",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.onShown){e.next=3;break}return e.next=3,this.onShown();case 3:if(void 0===this.load){e.next=8;break}if(!1!==this.loaded){e.next=8;break}return e.next=7,this.load();case 7:Object(f.r)((function(){t.loaded=!0}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),O=function(e,t,n){return Object(j.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column cursor-pointer "+n,children:[Object(j.jsx)("div",{children:Object(j.jsx)("i",{className:"fa fa-lg fa-"+t})}),Object(j.jsx)("small",{children:e})]})},k=function(){function e(t){var n=this;Object(l.a)(this,e),this.props=void 0,this.size=void 0,this.tabBg=void 0,this.sep=void 0,this.selectedTab=void 0,this.tabArr=void 0,this.tabClick=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(void 0!==(t=n.selectedTab)){e.next=8;break}if(void 0!==n.tabArr){e.next=5;break}return e.abrupt("return");case 5:if(0!==n.tabArr.length){e.next=7;break}return e.abrupt("return");case 7:t=n.tabArr[0];case 8:return Object(f.r)((function(){n.selectedTab.selected=!1,t.selected=!0,n.selectedTab=t})),e.next=11,t.shown();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.tabs=Object(p.a)((function(){var e,t,r=n.props,a=r.tabPosition,i=r.borderColor;i&&(e={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:1,borderBottomWidth:1},t={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:0},"top"===a?(e.borderBottomWidth=0,e.borderTopLeftRadius=10,e.borderTopRightRadius=10,t.borderTopWidth=0):(e.borderTopWidth=0,e.borderBottomLeftRadius=10,e.borderBottomRightRadius=10,t.borderBottomWidth=0));var c=b()("tv-tabs",n.tabBg,n.sep,"tv-tabs-"+n.size);return Object(j.jsx)("div",{className:c,children:n.tabArr.map((function(r,a){var i,c=r.selected,s=r.caption,o=r.notify;if(void 0!==o){var u="number"===typeof o?o:o.get();void 0!==u&&(u>0?i=Object(j.jsx)("u",{children:u>99?"99+":u}):u<0&&(i=Object(j.jsx)("u",{className:"dot"})))}return Object(j.jsx)("div",{onClick:function(){return n.tabClick(r)},style:!0===c?e:t,children:Object(j.jsxs)("div",{children:[i,s(c)]})},a)}))})})),this.content=Object(p.a)((function(){var e={visibility:"hidden"};return Object(j.jsx)(j.Fragment,{children:n.tabArr.map((function(t,r){var a,i,c,s,o=n.props.tabPosition,u=t.content,l=t.page,h=t.onScroll,f=t.onScrollTop,p=t.onScrollBottom,v=t.className,b=d.createElement(n.tabs);void 0!==l&&(a=l.header(),i=l.footer());var y,O={visibility:"hidden"};return"top"===o?(c=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("section",{className:"tv-page-header",children:Object(j.jsxs)("header",{children:[b,a]})}),Object(j.jsxs)("header",{style:O,children:[b,a]})]}),void 0!==i&&(s=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("footer",{style:O,children:i}),Object(j.jsx)("section",{className:"tv-page-footer",children:Object(j.jsx)("footer",{children:i})})]}))):(void 0!==a&&(c=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("section",{className:"tv-page-header",children:Object(j.jsx)("header",{children:a})}),Object(j.jsx)("header",{style:O,children:a})]})),s=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("footer",{style:O,children:[i,b]}),Object(j.jsx)("section",{className:"tv-page-footer",children:Object(j.jsxs)("footer",{children:[i,b]})})]})),!1===t.selected&&(y=e),Object(j.jsxs)(m.a,{className:v,style:y,onScroll:h,onScrollTop:f,onScrollBottom:p,children:[c,u,s]},r)}))})})),this.props=t;var r=t.size,a=t.tabs,i=t.tabBg,c=t.sep,s=t.selected;this.size=r||"md",this.tabArr=a.map((function(e){var t=new y,r=e.name,a=e.caption,i=e.content,c=e.page,o=e.notify,u=e.load,l=e.onShown,h=e.isSelected,d=e.onScroll,f=e.onScrollTop,p=e.onScrollBottom,v=e.className;return t.name=r,!0!==h&&r!==s||(n.selectedTab=t),t.selected=!1,t.caption=a,void 0!==i?t.contentBuilder=i:void 0!==c&&(t.page=c),t.notify=o,t.load=u,t.onShown=l,t.onScroll=d,t.onScrollTop=f,t.onScrollBottom=p,t.className=v,t})),this.tabBg=i,this.sep=c,void 0===this.selectedTab&&(this.selectedTab=this.tabArr[0]),this.selectedTab.selected=!0,Object(f.o)(this,{selectedTab:f.p,tabArr:f.p}),setTimeout((function(){n.tabClick(n.selectedTab)}),100)}return Object(h.a)(e,[{key:"render",value:function(){var e,t,n=this.props.tabPosition,r=d.createElement(this.tabs),a={display:"none"};return"top"===n?e=Object(j.jsx)("header",{children:r}):t=Object(j.jsx)("footer",{children:r}),Object(j.jsxs)(j.Fragment,{children:[e,this.tabArr.map((function(e,t){var n;return!1===e.selected&&(n=a),Object(j.jsx)("div",{className:b()(e.className),style:n,children:e.content},t)})),t]})}}]),e}();Object(p.a)(r=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).tabsView=void 0,r.tabsView=new k(e),r}return Object(h.a)(n,[{key:"render",value:function(){return this.tabsView.render()}}]),n}(d.Component)),Object(p.a)(a=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).tabsView=void 0,r.tabsView=new k(e),r}return Object(h.a)(n,[{key:"render",value:function(){return d.createElement(this.tabsView.content)}}]),n}(d.Component))},function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r,a,i,c,s,o,u,l=n(1),h=n.n(l),d=n(2),f=n(3),p=n(4),v=n(15),b=n(5),m=n(6),j=n(9),y=n(18),O=n(65),k=n(50),x=n(26),g=n(11),w=n(8),I=n(61),C=n(0),S=Object(g.a)(r=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).fileInput=void 0,r.fileName=null,r.upload=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.b.resUrl+"upload",t||(t=r.buildFormData()),e.prev=2,y.b.startWait(),(a=new Headers).append("Access-Control-Allow-Origin","*"),e.next=8,fetch(n,{method:"POST",body:t,headers:a});case 8:return i=e.sent,e.next=11,i.json();case 11:return c=e.sent,e.abrupt("return",":"+c.res.id);case 15:return e.prev=15,e.t0=e.catch(2),console.error("%s %s",n,e.t0),e.abrupt("return",{error:e.t0});case 19:return e.prev=19,y.b.endWait(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,15,19,22]])})));return function(t){return e.apply(this,arguments)}}(),r.onFilesChange=function(e){var t=r.props.onFilesChange;t&&t(e);for(var n=e.target.files,a=n.length,i=[],c=0;c<a;c++)i.push(n.item(c).name);r.fileName=i.join(", ")},Object(w.o)(Object(v.a)(r),{fileName:w.p}),r}return Object(p.a)(n,[{key:"buildFormData",value:function(){var e=this.props.maxSize;void 0===e||e<=0?e=1e11:e*=1024;for(var t=this.fileInput.files,n=new FormData,r=t.length,a=0;a<r;a++){var i=t[a];if(i.size>e)return null;n.append("files[]",i,i.name)}}},{key:"getFile0",value:function(){return this.fileInput.files[0]}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.multiple,a=t.label;return Object(C.jsxs)("div",{children:[Object(C.jsxs)("label",{className:"btn btn-outline-success",children:[a||"\u9009\u62e9\u6587\u4ef6",Object(C.jsx)("input",{className:n,ref:function(t){return e.fileInput=t},onChange:this.onFilesChange,type:"file",name:"file",multiple:r,style:{display:"none"}})]}),"\xa0",this.fileName]})}}]),n}(j.Component))||r;function N(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0;for(r=r||["B","K","M","G","TB"];(t=r.shift())&&e>1024;)e/=1024;return("B"===t?e:e.toFixed(void 0===n?2:n))+t}var A=1600,_=400,D=Object(g.a)((c=i=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).imgBaseSize=void 0,r.imageTypes=void 0,r.suffix=void 0,r.resUploader=void 0,r.file=null,r.desImgWidth=null,r.desImgHeight=null,r.desImgSize=null,r.srcImgWidth=null,r.srcImgHeight=null,r.isChanged=!1,r.resId=null,r.enableUploadButton=!1,r.srcImage=null,r.desImage=null,r.fileError=null,r.uploaded=!1,r.onFileChange=function(e){if(r.fileError=void 0,r.uploaded=!1,r.enableUploadButton=e.target.files.length>0,r.enableUploadButton){r.file=e.target.files[0];var t=r.file.name.lastIndexOf(".");if(t>=0&&(r.suffix=r.file.name.substr(t+1).toLowerCase()),r.imageTypes.indexOf(r.suffix)<0)return void(r.fileError="\u56fe\u7247\u7c7b\u578b\u5fc5\u987b\u662f ".concat(r.imageTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));var n=new FileReader;n.readAsDataURL(r.file),n.onload=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.srcImage=n.result,e.t0=r.suffix,e.next="svg"===e.t0?7:4;break;case 4:return e.next=6,r.setSize(r.props.size);case 6:return e.abrupt("break",11);case 7:return r.imgBaseSize=_,r.desImgSize=r.srcImage.length,r.desImage=r.srcImage,e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})))}},r.compress=function(){return new Promise((function(e,t){var n=new Image;n.src=r.srcImage,n.onload=function(){var t=n.width,a=n.height;r.srcImgWidth=t,r.srcImgHeight=a;var i,c,s=t/a;r.imgBaseSize<0||t<=r.imgBaseSize&&a<=r.imgBaseSize?(i=t,c=a):s<0?c=(i=r.imgBaseSize)/s:i=(c=r.imgBaseSize)*s,r.desImgWidth=Math.round(i),r.desImgHeight=Math.round(c);var o=document.createElement("canvas"),u=o.getContext("2d"),l=document.createAttribute("width");l.nodeValue=String(i);var h=document.createAttribute("height");h.nodeValue=String(c),o.setAttributeNode(l),o.setAttributeNode(h),u.drawImage(n,0,0,i,c);var d=o.toDataURL("image/"+r.suffix,.7),f=r.convertBase64UrlToBlob(d);r.desImgSize=f.size,r.desImgSize>3145728&&(r.fileError="\u56fe\u7247\u5927\u4e8e3M\uff0c\u65e0\u6cd5\u4e0a\u4f20",r.enableUploadButton=!1),e(d)}}))},r.upload=Object(d.a)(h.a.mark((function e(){var t,n,a,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resUploader){e.next=2;break}return e.abrupt("return");case 2:return t=new FormData,n=r.convertBase64UrlToBlob(r.desImage),t.append("image",n,r.file.name),e.next=7,r.resUploader.upload(t);case 7:if("object"!==typeof(a=e.sent)){e.next=24;break}i=a.error,c=typeof i,e.t0=c,e.next="undefined"===e.t0?14:"string"===e.t0?16:"object"===e.t0?18:20;break;case 14:return s="error: undefined",e.abrupt("break",22);case 16:return s=i,e.abrupt("break",22);case 18:return s=i.message,e.abrupt("break",22);case 20:return s=String(s),e.abrupt("break",22);case 22:return r.fileError="error: "+c+" - "+s,e.abrupt("return");case 24:r.resId=a,r.isChanged=r.resId!==r.props.id,r.uploaded=!0;case 27:case"end":return e.stop()}}),e)}))),r.onSaved=function(){var e=r.props.onSaved;e&&e(r.resId)},r.showOrgImage=function(){y.b.push(Object(C.jsx)(x.a,{header:"\u539f\u56fe",children:Object(C.jsx)("div",{className:"p-3 text-center",children:Object(C.jsx)(k.a,{className:"h-min-4c",style:{maxWidth:"100%"},src:r.srcImage})})}))},Object(w.o)(Object(v.a)(r),{file:w.p,desImgWidth:w.p,desImgHeight:w.p,desImgSize:w.p,srcImgWidth:w.p,srcImgHeight:w.p,isChanged:w.p,resId:w.p,enableUploadButton:w.p,srcImage:w.p,desImage:w.p,fileError:w.p,uploaded:w.p}),r.resId=e.id,r.imageTypes=e.imageTypes||n.imageTypes,r}return Object(p.a)(n,[{key:"setSize",value:function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="sm"===e.t0?3:"md"===e.t0?5:"lg"===e.t0?7:"xl"===e.t0?9:"raw"===e.t0?11:3;break;case 3:return this.imgBaseSize=180,e.abrupt("break",13);case 5:return this.imgBaseSize=_,e.abrupt("break",13);case 7:return this.imgBaseSize=800,e.abrupt("break",13);case 9:return this.imgBaseSize=A,e.abrupt("break",13);case 11:return this.imgBaseSize=-1,e.abrupt("break",13);case 13:return e.next=15,this.compress();case 15:this.desImage=e.sent;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertBase64UrlToBlob",value:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}},{key:"levelDiv",value:function(){var e=this;if(!this.props.size){var t=[{caption:"\u5c0f\u56fe",size:"sm"}];if((this.srcImgHeight>_||this.srcImgWidth>_)&&t.push({caption:"\u4e2d\u56fe",size:"md"}),(this.srcImgHeight>800||this.srcImgWidth>800)&&t.push({caption:"\u5927\u56fe",size:"lg"}),(this.srcImgHeight>A||this.srcImgWidth>A)&&(t.push({caption:"\u8d85\u5927\u56fe",size:"xl"}),t.push({caption:"\u539f\u56fe",size:"raw"})),!(t.length<2))return Object(C.jsx)("div",{children:t.map((function(t,n){var r=t.caption,a=t.size;return Object(C.jsxs)("label",{className:"mr-3",children:[Object(C.jsx)("input",{type:"radio",name:"size",onChange:function(){return e.setSize(a)},defaultChecked:0===n})," ",r]},n)}))})}}},{key:"render",value:function(){var e=this,t=this.props.label,n=Object(C.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return Object(C.jsx)(x.a,{header:t||"\u66f4\u6539\u56fe\u7247",right:n,children:Object(C.jsxs)("div",{className:"my-3 px-3 py-3 bg-white",children:[Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)(S,{ref:function(t){return e.resUploader=t},multiple:!1,maxSize:2048,label:"\u9009\u62e9\u56fe\u7247\u6587\u4ef6",onFilesChange:this.onFileChange}),Object(C.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",this.imageTypes.join(", ")," \u683c\u5f0f\u56fe\u7247\u3002"]}),this.fileError&&Object(C.jsx)("div",{className:"text-danger",children:this.fileError})]}),Object(C.jsx)(I.c,{left:!0===this.uploaded?Object(C.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):this.file&&this.desImgSize>0&&Object(C.jsxs)("div",{className:"mb-3 d-flex align-items-end",children:[Object(C.jsxs)("div",{className:"mr-5",children:[this.levelDiv(),Object(C.jsxs)("div",{children:["\u5206\u8fa8\u7387\uff1a",this.desImgWidth," x ",this.desImgHeight,"\xa0 \xa0 \u6587\u4ef6\u5927\u5c0f\uff1a",N(this.desImgSize)]})]}),Object(C.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]}),right:this.desImage&&Object(C.jsxs)("button",{className:"btn btn-link btn-sm text-right mb-3",onClick:this.showOrgImage,children:["\u539f\u56fe\u5927\u5c0f: ",N(this.file.size),Object(C.jsx)("br",{}),"\u5206\u8fa8\u7387\uff1a",this.srcImgWidth," x ",this.srcImgHeight]})})]}),Object(C.jsx)("div",{className:"text-center",style:{border:!0===this.uploaded?"2px solid green":"1px dotted gray",padding:"8px"},children:Object(C.jsx)(k.a,{className:"h-min-4c",style:{maxWidth:"100%"},src:this.desImage})})]})})}}]),n}(j.Component),i.imageTypes=["gif","jpg","jpeg","png","svg","apng","bmp","ico","cur","tiff","tif","webp"],a=c))||a;Object(g.a)((u=o=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).suffix=void 0,r.resUploader=void 0,r.content=null,r.file=null,r.fileSize=null,r.isChanged=!1,r.resId=null,r.enableUploadButton=!1,r.fileError=null,r.uploaded=!1,r.uploading=!1,r.onFileChange=function(e){if(r.fileError=void 0,r.uploaded=!1,r.enableUploadButton=e.target.files.length>0,r.enableUploadButton){r.file=e.target.files[0];var t=r.file.name.lastIndexOf(".");if(t>=0&&(r.suffix=r.file.name.substr(t+1).toLowerCase()),n.audioTypes.indexOf(r.suffix)<0)return void(r.fileError="\u97f3\u9891\u7c7b\u578b\u5fc5\u987b\u662f ".concat(n.audioTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));var a=new FileReader;a.readAsDataURL(r.file),a.onload=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.content=a.result,r.fileSize=r.content.length;case 2:case"end":return e.stop()}}),e)})))}},r.upload=Object(d.a)(h.a.mark((function e(){var t,n,a,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resUploader){e.next=2;break}return e.abrupt("return");case 2:return r.uploading=!0,t=new FormData,n=r.convertBase64UrlToBlob(r.content),t.append("image",n,r.file.name),e.next=8,r.resUploader.upload(t);case 8:if("object"!==typeof(a=e.sent)){e.next=25;break}i=a.error,c=typeof i,e.t0=c,e.next="undefined"===e.t0?15:"string"===e.t0?17:"object"===e.t0?19:21;break;case 15:return s="error: undefined",e.abrupt("break",23);case 17:return s=i,e.abrupt("break",23);case 19:return s=i.message,e.abrupt("break",23);case 21:return s=String(s),e.abrupt("break",23);case 23:return r.fileError="error: "+c+" - "+s,e.abrupt("return");case 25:r.resId=a,r.isChanged=r.resId!==r.props.id,r.uploaded=!0;case 28:case"end":return e.stop()}}),e)}))),r.onSaved=function(){var e=r.props.onSaved;e&&e(r.resId)},Object(w.o)(Object(v.a)(r),{content:w.p,file:w.p,fileSize:w.p,isChanged:w.p,resId:w.p,enableUploadButton:w.p,fileError:w.p,uploaded:w.p,uploading:w.p}),r.resId=e.id,r}return Object(p.a)(n,[{key:"convertBase64UrlToBlob",value:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}},{key:"render",value:function(){var e=this,t=this.props.label,r=Object(C.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return Object(C.jsxs)(x.a,{header:t||"\u66f4\u6539\u6587\u4ef6",right:r,children:[Object(C.jsx)("div",{className:"my-3 px-3 py-3 bg-white",children:Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)(S,{ref:function(t){return e.resUploader=t},multiple:!1,maxSize:2048,label:"\u9009\u62e9\u97f3\u9891\u6587\u4ef6",onFilesChange:this.onFileChange}),Object(C.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",n.audioTypes.join(", ")," \u683c\u5f0f\u3002"]}),this.fileError&&Object(C.jsx)("div",{className:"text-danger",children:this.fileError})]})})}),Object(C.jsx)(I.c,{left:!0===this.uploaded?Object(C.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):!0===this.uploading?Object(C.jsx)("div",{className:"m-3",children:Object(C.jsx)(O.a,{})}):this.file&&this.content&&Object(C.jsxs)("div",{className:"m-3",children:[Object(C.jsxs)("div",{className:"mb-3",children:["\u6587\u4ef6\u5927\u5c0f\uff1a",N(this.fileSize)]}),Object(C.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]})})]})}}]),n}(j.Component),o.audioTypes=["mp3","wav"],s=u))},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(10),a=n(12),i=n(1),c=n.n(i),s=n(2),o=n(3),u=n(4),l=n(21),h=n(70),d=n(60),f=n(99),p=n(43),v=n(100),b=n(101),m=n(102),j=n(103),y=n(13),O=n(64),k=n(109),x=n(104),g=n(71),w=n(14);var I=function(){function e(t,n,r,i){var u=this;Object(o.a)(this,e),this.entities={},this.enums={},this.actions={},this.queries={},this.ids={},this.idxs={},this.ixs={},this.sheets={},this.books={},this.maps={},this.histories={},this.pendings={},this.tags={},this.tuidsCache=void 0,this.localEntities=void 0,this.tvs=void 0,this.proxy=void 0,this.localMap=void 0,this.localModifyMax=void 0,this.tuids={},this.createBoxId=void 0,this.newVersion=void 0,this.uqOwner=void 0,this.uqName=void 0,this.name=void 0,this.uqApi=void 0,this.id=void 0,this.uqVersion=void 0,this.config=void 0,this.createBoxIdFromTVs=function(e,t){var n=e.name;return new O.a(t,e,u.tvs[n])},this.roles=void 0,this.allRoles=void 0,this.tuidArr=[],this.actionArr=[],this.queryArr=[],this.idArr=[],this.idxArr=[],this.ixArr=[],this.enumArr=[],this.sheetArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.tagArr=[],this.Acts=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=[],r={},t)n.push(a),r[a]=t[a].map((function(e){var t={};for(var n in e){var r=e[n];if("object"===typeof r){var a={};for(var i in r){var c=r[i];if(c&&"object"===typeof c)if("time"===i)"[object Date]"===Object.prototype.toString.call(c)&&(c=c.getTime());else c=c.id;a[i]=c}t[n]=a}else t[n]=r}return t}));return r.$=n,e.next=6,u.uqApi.post("acts",r);case 6:for(i=e.sent,s=i[0].ret.split("\n"),o={},l=0;l<n.length;l++)o[n[l]]=C(s[l].split("\t"));return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.ActIX=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IX,r=t.ID,a=t.values,i=t.IXs,s={IX:S(n),ID:S(r),IXs:null===i||void 0===i?void 0:i.map((function(e){return{IX:S(e.IX),ix:e.ix}})),values:a},e.next=4,u.uqApi.post("act-ix",s);case 4:return o=e.sent,e.abrupt("return",o[0].ret.split("\t").map((function(e){return Number(e)})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.ActIXSort=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IX,r=t.ix,a=t.id,i=t.after,s={IX:S(n),ix:r,id:a,after:i},e.next=4,u.uqApi.post("act-ix-sort",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.ActDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,o,l,h,d,f,p,v,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=t).master,i=r.detail,s=r.detail2,o=r.detail3,l={master:{name:S(a.ID),value:N(a.value)},detail:{name:S(i.ID),values:null===(n=i.values)||void 0===n?void 0:n.map((function(e){return N(e)}))}},s&&(l.detail2={name:S(s.ID),values:null===(h=s.values)||void 0===h?void 0:h.map((function(e){return N(e)}))}),o&&(l.detail3={name:S(o.ID),values:null===(d=o.values)||void 0===d?void 0:d.map((function(e){return N(e)}))}),e.next=6,u.uqApi.post("act-detail",l);case 6:return f=e.sent,p=f[0].ret,v=p.split("\n"),b=v.map((function(e){return e.split("\t")})),f={master:C(b[0])[0],detail:C(b[1]),detail2:C(b[2]),detail3:C(b[3])},e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.QueryID=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,r=t.IX,i=t.IDX,e.next=3,u.uqApi.post("query-id",Object(a.a)(Object(a.a)({},t),{},{ID:S(n),IX:null===r||void 0===r?void 0:r.map((function(e){return S(e)})),IDX:u.IDXToString(i)}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDNO=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,e.next=3,u.uqApi.post("id-no",{ID:S(n)});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDDetailGet=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.master,a=t.detail,i=t.detail2,s=t.detail3,e.next=3,u.uqApi.post("id-detail-get",{id:n,master:S(r),detail:S(a),detail2:S(i),detail3:S(s)});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.ID=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IDX,e.next=3,u.uqApi.post("id",Object(a.a)(Object(a.a)({},t),{},{IDX:u.IDXToString(n)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.KeyID=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,r=t.IDX,e.next=3,u.uqApi.post("key-id",Object(a.a)(Object(a.a)({},t),{},{ID:S(n),IDX:null===r||void 0===r?void 0:r.map((function(e){return S(e)}))}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IX=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IX,r=t.IX1,i=t.IDX,e.next=3,u.uqApi.post("ix",Object(a.a)(Object(a.a)({},t),{},{IX:S(n),IX1:S(r),IDX:null===i||void 0===i?void 0:i.map((function(e){return S(e)}))}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IXr=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IX,r=t.IX1,i=t.IDX,e.next=3,u.uqApi.post("ixr",Object(a.a)(Object(a.a)({},t),{},{IX:S(n),IX1:S(r),IDX:null===i||void 0===i?void 0:i.map((function(e){return S(e)}))}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.KeyIX=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,r=t.IX,i=t.IDX,e.next=3,u.uqApi.post("key-ix",Object(a.a)(Object(a.a)({},t),{},{ID:S(n),IX:S(r),IDX:null===i||void 0===i?void 0:i.map((function(e){return S(e)}))}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDLog=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IDX,e.next=3,u.uqApi.post("id-log",Object(a.a)(Object(a.a)({},t),{},{IDX:S(n)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDSum=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.IDX,e.next=3,u.uqApi.post("id-sum",Object(a.a)(Object(a.a)({},t),{},{IDX:S(n)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDinIX=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,r=t.IX,e.next=3,u.uqApi.post("id-in-ix",Object(a.a)(Object(a.a)({},t),{},{ID:S(n),IX:S(r)}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDxID=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,r=t.IX,i=t.ID2,e.next=3,u.uqApi.post("id-x-id",Object(a.a)(Object(a.a)({},t),{},{ID:S(n),IX:S(r),ID2:S(i)}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.IDTree=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ID,e.next=3,u.uqApi.post("id-tree",Object(a.a)(Object(a.a)({},t),{},{ID:S(n)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createBoxId=r,void 0===r&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=i||{});var d=n.id,f=n.uqOwner,p=n.uqName,v=n.newVersion;this.newVersion=v,this.uqOwner=f,this.uqName=p,this.id=d,this.name=f+"/"+p,this.uqVersion=0,this.localMap=y.f.localDb.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localEntities=this.localMap.child("$access");"$$$/$unitx"===this.name?this.uqApi=new l.c(y.f.unit):this.uqApi=new l.d("tv/",f,p,!0),this.tuidsCache=new h.TuidsCache(this)}return Object(u.a)(e,[{key:"getID",value:function(e){return this.ids[e.toLowerCase()]}},{key:"getIDX",value:function(e){return this.idxs[e.toLowerCase()]}},{key:"getIX",value:function(e){return this.ixs[e.toLowerCase()]}},{key:"getRoles",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.roles){e.next=2;break}return e.abrupt("return",this.roles);case 2:return e.next=4,this.uqApi.getRoles();case 4:return this.roles=e.sent,e.abrupt("return",this.roles);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tuid",value:function(e){return this.tuids[e.toLowerCase()]}},{key:"tuidDiv",value:function(e,t){var n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())}},{key:"action",value:function(e){return this.actions[e.toLowerCase()]}},{key:"sheet",value:function(e){return this.sheets[e.toLowerCase()]}},{key:"query",value:function(e){return this.queries[e.toLowerCase()]}},{key:"book",value:function(e){return this.books[e.toLowerCase()]}},{key:"map",value:function(e){return this.maps[e.toLowerCase()]}},{key:"history",value:function(e){return this.histories[e.toLowerCase()]}},{key:"pending",value:function(e){return this.pendings[e.toLowerCase()]}},{key:"sheetFromTypeId",value:function(e){for(var t in this.sheets){var n=this.sheets[t];if(n.typeId===e)return n}}},{key:"init",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEntities",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.localEntities.get()){e.next=6;break}return e.next=5,this.uqApi.loadEntities();case 5:t=e.sent;case 6:if(t){e.next=8;break}return e.abrupt("return");case 8:this.buildEntities(t),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildEntities",value:function(e){this.localEntities.set(e);var t=e.access,n=e.tuids,r=e.role,a=e.version;this.uqVersion=a,this.allRoles=null===r||void 0===r?void 0:r.names,this.buildTuids(n),this.buildAccess(t)}},{key:"buildTuids",value:function(e){for(var t in e){var n=e[t],r=n.typeId,a=n.from;this.newTuid(t,r,a).sys=!0}for(var i in e){var c=e[i];this.getTuid(i).setSchema(c)}for(var s in this.tuids){this.tuids[s].buildFieldsTuid()}}},{key:"loadEntitySchema",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.schema(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllSchemas",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.allSchemas();case 2:t=e.sent,[this.actionArr,this.enumArr,this.sheetArr,this.queryArr,this.bookArr,this.mapArr,this.historyArr,this.pendingArr,this.tagArr,this.idArr,this.idxArr,this.ixArr].forEach((function(e){e.forEach((function(e){var n=t[e.name.toLowerCase()];if(n){var r=n.call;r&&e.buildSchema(r)}}))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTuid",value:function(e){return this.tuids[e]}},{key:"buildAccess",value:function(e){for(var t in e){var n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}}},{key:"cacheTuids",value:function(e){this.tuidsCache.cacheTuids(e)}},{key:"setEntity",value:function(e,t){this.entities[e]=t,this.entities[e.toLowerCase()]=t}},{key:"newEnum",value:function(e,t){var n=this.enums[e];return void 0!==n||(n=this.enums[e]=new x.a(this,e,t),this.setEntity(e,n),this.enumArr.push(n)),n}},{key:"newAction",value:function(e,t){var n=this.actions[e];return void 0!==n||(n=this.actions[e]=new d.a(this,e,t),this.setEntity(e,n),this.actionArr.push(n)),n}},{key:"newTuid",value:function(e,t,n){var r=this.tuids[e];return void 0!==r||(r=void 0!==n?new h.TuidImport(this,e,t,n):new h.TuidInner(this,e,t),this.tuids[e]=r,this.setEntity(e,r),this.tuidArr.push(r)),r}},{key:"newQuery",value:function(e,t){var n=this.queries[e];return void 0!==n||(n=this.queries[e]=new p.a(this,e,t),this.setEntity(e,n),this.queryArr.push(n)),n}},{key:"newBook",value:function(e,t){var n=this.books[e];return void 0!==n||(n=this.books[e]=new v.a(this,e,t),this.setEntity(e,n),this.bookArr.push(n)),n}},{key:"newMap",value:function(e,t){var n=this.maps[e];return void 0!==n||(n=this.maps[e]=new m.a(this,e,t),this.setEntity(e,n),this.mapArr.push(n)),n}},{key:"newTag",value:function(e,t){var n=this.tags[e];return void 0!==n||(n=this.tags[e]=new k.a(this,e,t),this.setEntity(e,n),this.tagArr.push(n)),n}},{key:"newHistory",value:function(e,t){var n=this.histories[e];if(void 0===n)return n=this.histories[e]=new b.a(this,e,t),this.setEntity(e,n),this.historyArr.push(n),n}},{key:"newPending",value:function(e,t){var n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new j.a(this,e,t),this.setEntity(e,n),this.pendingArr.push(n),n}},{key:"newSheet",value:function(e,t){var n=this.sheets[e];return void 0!==n||(n=this.sheets[e]=new f.a(this,e,t),this.setEntity(e,n),this.sheetArr.push(n)),n}},{key:"newID",value:function(e,t){var n=e.toLowerCase(),r=this.ids[n];return void 0!==r||(r=this.ids[n]=new g.a(this,e,t),this.setEntity(e,r),this.idArr.push(r)),r}},{key:"newIDX",value:function(e,t){var n=e.toLowerCase(),r=this.idxs[n];return void 0!==r||(r=this.idxs[n]=new g.b(this,e,t),this.setEntity(e,r),this.idxArr.push(r)),r}},{key:"newIX",value:function(e,t){var n=e.toLowerCase(),r=this.ixs[n];return void 0!==r||(r=this.ixs[n]=new g.c(this,e,t),this.setEntity(e,r),this.ixArr.push(r)),r}},{key:"fromType",value:function(e,t){var n=t.split("|");t=n[0];var r=Number(n[1]);switch(t){case"tuid":break;case"id":this.newID(e,r);break;case"idx":this.newIDX(e,r);break;case"ix":this.newIX(e,r);break;case"action":this.newAction(e,r);break;case"query":this.newQuery(e,r);break;case"book":this.newBook(e,r);break;case"map":this.newMap(e,r);break;case"history":this.newHistory(e,r);break;case"sheet":this.newSheet(e,r);break;case"pending":this.newPending(e,r);break;case"tag":this.newTag(e,r);break;case"enum":this.newEnum(e,r)}}},{key:"fromObj",value:function(e,t){switch(t.$){case"sheet":this.buildSheet(e,t)}}},{key:"buildSheet",value:function(e,t){var n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)}},{key:"buildFieldTuid",value:function(e,t){var n=this;if(void 0!==e){var a,i=Object(r.a)(e);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=c.tuid;if(void 0!==s){var o=this.getTuid(s);void 0!==o&&(c._tuid=o.buildTuidBox())}}}catch(d){i.e(d)}finally{i.f()}var u,l=Object(r.a)(e);try{var h=function(){var r=u.value,a=r.owner;if(void 0===a)return"continue";var i=e.find((function(e){return e.name===a}));if(void 0===i&&(void 0!==t&&(i=t.find((function(e){return e.name===a}))),void 0===i))throw new Error("owner field ".concat(a," is undefined"));var c=r.arr,s=r.tuid,o=n.getTuid(i._tuid.tuid.name);if(void 0===o)return"continue";var l=o.div(c||s);r._tuid=l&&l.buildTuidDivBox(i)};for(l.s();!(u=l.n()).done;)h()}catch(d){l.e(d)}finally{l.f()}}}},{key:"buildArrFieldsTuid",value:function(e,t){if(void 0!==e){var n,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value.fields;void 0!==i&&this.buildFieldTuid(i,t)}}catch(c){a.e(c)}finally{a.f()}}}},{key:"pullModify",value:function(e){this.tuidsCache.pullModify(e)}},{key:"getUqKey",value:function(){var e=this.uqName.split(/[-._]/).join("").toLowerCase();if(this.config){var t=this.config,n=t.dev,r=t.alias;e=Object(y.d)(n.alias||n.name)+Object(y.d)(null!==r&&void 0!==r?r:e)}return e}},{key:"createProxy",value:function(){var e=this,t=new Proxy(this.entities,{get:function(t,n,r){var a=n.toLowerCase();if("$"===a)return e;var i=t[a];if(void 0!==i)return i;switch(n){default:break;case"Acts":return e.Acts;case"ActIX":return e.ActIX;case"ActIXSort":return e.ActIXSort;case"QueryID":return e.QueryID;case"IDDetail":return e.ActDetail;case"IDNO":return e.IDNO;case"IDDetailGet":return e.IDDetailGet;case"ID":return e.ID;case"KeyID":return e.KeyID;case"IX":return e.IX;case"IXr":return e.IXr;case"KeyIX":return e.KeyIX;case"IDLog":return e.IDLog;case"IDSum":return e.IDSum;case"IDinIX":return e.IDinIX;case"IDxID":return e.IDxID;case"IDTree":return e.IDTree}var c="entity ".concat(e.name,".").concat(String(n)," not defined");console.error(c),e.showReload("UQ\u9519\u8bef\uff1a"+c)}});return this.proxy=t,t}},{key:"showReload",value:function(e){this.localMap.removeAll(),w.nav.showReloadPage(e)}},{key:"IDXToString",value:function(e){return!0===Array.isArray(e)?e.map((function(e){return S(e)})):S(e)}}]),e}();function C(e){if(e){var t=e.length;if(!(t<=1)){for(var n=[],r=0;r<t-1;r++)n.push(Number(e[r]));return n}}}function S(e){if(e)return"string"===typeof e?e:e.name}function N(e){if(!e)return e;var t={};for(var n in e){var r=e[n];"object"===typeof r&&(r=r.id),t[n]=r}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),i=n(2),c=n(10),s=n(3),o=n(4),u=n(23),l=n(20),h=n(5),d=n(6),f=n(33),p=n(91),v=n(38),b=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).states=void 0,e.verify=void 0,e}return Object(o.a)(n,[{key:"typeName",get:function(){return"sheet"}},{key:"setSchema",value:function(e){Object(u.a)(Object(l.a)(n.prototype),"setSchema",this).call(this,e),this.states=e.states,this.verify=e.verify}},{key:"build",value:function(e){this.states=[];var t,n=Object(c.a)(e.ops);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.states.push({name:r,actions:void 0})}}catch(a){n.e(a)}finally{n.f()}}},{key:"createSheetState",value:function(e,t){var n={name:e,actions:[]},r=n.actions;for(var a in t){var i={name:a};r.push(i)}return n}},{key:"save",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.uq.id,i={app:r,discription:t,data:n},e.next=4,new j(this,i).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveDebugDirect",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.uq.id,i={app:r,discription:t,data:n},e.next=4,new y(this,i).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"action",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new O(this,{id:t,flow:n,state:r,action:i}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"actionDebugDirect",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new k(this,{id:t,flow:n,state:r,action:i}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unpack",value:function(e){var t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}}},{key:"getSheet",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new x(this,t).request();case 2:if(0!==(n=e.sent)[0].length){e.next=7;break}return e.next=6,this.getArchive(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",this.unpack(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchive",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new g(this,t).request();case 2:return n=e.sent,e.abrupt("return",this.unpack(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchives",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pageStart:t,pageSize:n},e.next=3,new w(this,r).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStateSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new I(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createPageStateItems",value:function(){return new A(this)}},{key:"stateSheetCount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new C(this,void 0).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={state:t,user:n,pageStart:r,pageSize:i},e.next=3,new S(this,c).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"mySheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new N(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(f.a)),m=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix=void 0,e}return Object(o.a)(n,[{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/").concat(this.suffix)}}]),n}(v.b),j=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name)}},{key:"buildParams",value:function(){var e=this.params,t=e.app,n=e.discription,r=e.data;return{app:t,discription:n,data:this.entity.pack(r)}}},{key:"xresult",value:function(e){var t=this.entity.verify;if(void 0===t)return e;var n=e.verify;if(void 0===n||0===n.length)return e.verify=void 0,e;var r=t.returns;return e.verify=this.entity.unpackReturns(n,r),e}}]),n}(m),y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/direct")}}]),n}(j),O=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="PUT",e}return Object(o.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name)}}]),n}(m),k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/direct")}}]),n}(O),x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(o.a)(n,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/get/").concat(this.params)}}]),n}(m),g=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(o.a)(n,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/archive/").concat(this.params)}}]),n}(m),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="archives",e}return n}(m),I=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="states",e}return n}(m),C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e.suffix="statecount",e}return Object(o.a)(n,[{key:"xresult",value:function(e){return this.entity.states.map((function(t){var n=t.name,r=0,a=e.find((function(e){return e.state===n}));return void 0!==a&&(r=a.count),{state:n,count:r}}))}}]),n}(m),S=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="user-sheets",e}return Object(o.a)(n,[{key:"xresult",value:function(e){return e}}]),n}(m),N=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="my-sheets",e}return Object(o.a)(n,[{key:"xresult",value:function(e){return e}}]),n}(m),A=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,!0)).sheet=void 0,r.sheet=e,r.pageSize=10,r}return Object(o.a)(n,[{key:"loadResults",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sheet.getStateSheets(t,n,r);case 2:return i=e.sent,e.abrupt("return",{$page:i});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getPageId",value:function(e){return void 0===e?0:e.id}}]),n}(p.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(4),i=n(5),c=n(6),s=n(43),o=n(38),u=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).queryApiName="book",e}return Object(a.a)(n,[{key:"typeName",get:function(){return"book"}},{key:"queryCaller",value:function(e){return new l(this,e)}}]),n}(s.b)),l=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"path",get:function(){return"book/".concat(this.entity.name)}}]),n}(o.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(4),i=n(5),c=n(6),s=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).queryApiName="history",e}return Object(a.a)(n,[{key:"typeName",get:function(){return"history"}}]),n}(n(43).b))},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(23),u=n(20),l=n(5),h=n(6),d=n(33),f=n(60),p=n(38),v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).keys=void 0,e.actions={},e.queries={},e.schemaFrom=void 0,e}return Object(s.a)(n,[{key:"typeName",get:function(){return"map"}},{key:"setSchema",value:function(e){Object(o.a)(Object(u.a)(n.prototype),"setSchema",this).call(this,e),this.schemaFrom=this.schema.from;var t=e.actions,r=e.queries,a=e.keys;for(var i in this.uq.buildFieldTuid(this.keys=a),t){var c=t[i],s=c.name,l=this.uq.newAction(s,void 0);l.setSchema(c),l.buildFieldsTuid(),this.actions[i]=l}for(var h in r){var d=r[h],f=d.name,p=this.uq.newQuery(f,void 0);p.setSchema(d),p.buildFieldsTuid(),this.queries[h]=p}}},{key:"add",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new j(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new y(this,void 0).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new O(this,{pageStart:n,pageSize:r,param:t}).request();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new k(this,t),e.next=3,n.request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.table(t);case 2:if(!((n=e.sent).length>0)){e.next=5;break}return e.abrupt("return",n[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obj(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a)),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){}},{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCaller(this.params),e.next=3,this.entity.uqApi.xcall(t);case 3:return n=e.sent,r=t.xresult(n.res),e.abrupt("return",{res:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildParams",value:function(){return Object(o.a)(Object(u.a)(n.prototype),"buildParams",this).call(this)}}]),n}(p.b),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getCaller",value:function(e){return new x(this.entity,this.entity.actions.add,e)}}]),n}(b),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getCaller",value:function(e){return new g(this.entity,this.entity.actions.add,e)}}]),n}(b),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getCaller",value:function(e){return new w(this.entity,this.entity.queries.all,e)}}]),n}(b),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getCaller",value:function(e){return new I(this.entity,this.entity.queries.page,e)}}]),n}(b),k=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getCaller",value:function(e){return new C(this.entity,this.entity.queries.query,e)}}]),n}(b),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(s.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/add")}},{key:"headers",get:function(){}}]),n}(f.b),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(s.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/del")}},{key:"headers",get:function(){}}]),n}(f.b),w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(s.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/all")}},{key:"headers",get:function(){}}]),n}(p.c),I=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(s.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/page")}},{key:"headers",get:function(){}}]),n}(p.c),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(s.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/query")}},{key:"headers",get:function(){}}]),n}(p.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(4),i=n(5),c=n(6),s=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).queryApiName="pending",e}return Object(a.a)(n,[{key:"typeName",get:function(){return"pending"}}]),n}(n(43).b))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(4),i=n(5),c=n(6),s=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"typeName",get:function(){return"enum"}}]),n}(n(33).a)},function(e,t,n){"use strict";n.d(t,"setUI",(function(){return k}));var r=n(185),a=n(186),i=n(187),c=n(188),s=n(189),o=n(190),u=n(191),l=n(192),h=n(193),d=n(194),f=n(195),p=n(196),v=n(197),b=n(198),m=n(199),j=n(200),y=n(201),O=n(202);n(149);function k(e){Object.assign(e.Market,r),Object.assign(e.Transaction,a),Object.assign(e.Group,i),Object.assign(e.Account,c),Object.assign(e.Holding,s),Object.assign(e.Stock,o),Object.assign(e.Blog,u),Object.assign(e.Industry,l),Object.assign(e.StockValue,h),Object.assign(e.AccountValue,d),Object.assign(e.Portfolio,f),Object.assign(e.UserBlockStock,p),Object.assign(e.UserAccount,v),Object.assign(e.UserGroup,b),Object.assign(e.UserAllStock,m),Object.assign(e.AccountHolding,j),Object.assign(e.GroupStock,y),Object.assign(e.IXIndustry,O)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r,a,i=n(1),c=n.n(i),s=n(2),o=n(42),u=n(3),l=n(4),h=n(15),d=n(5),f=n(6),p=n(32),v=(n(167),n(9)),b=n(7),m=n(8),j=n(11),y=n(30),O=n.n(y),k=n(17),x=n(25),g=n(111),w=n(46),I=n(0),C=(r=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).input=void 0,e.key=void 0,Object(o.a)(e,"ttmLimit",a,Object(h.a)(e)),e.checkLimitShow=function(t){var n=t.target.checked;e.ttmLimit=n},e.checkShowLater=function(e){e.target.checked},e.page=Object(j.a)((function(){var t=e.controller,n=t.openMetaView,r=t.baseItem,a=t.isLogined,i=r.name,c=r.code,s=r.day;I.Fragment;var o=i+" "+c;void 0!==s&&(o+=" - "+s);var u=Object(I.jsx)("div",{children:o});return Object(I.jsx)(b.Page,{header:u,headerClassName:"bg-primary",children:v.createElement(e.pageContent)})})),e.pageContent=Object(j.a)((function(){return Object(I.jsxs)(I.Fragment,{children:[v.createElement(e.baseInfo),v.createElement(e.miratesChart),v.createElement(e.mivaluesChart),v.createElement(e.bonusInfo),v.createElement(e.predictInfo),v.createElement(e.profitInfo)]})})),e.onChange=function(t){var n=t.target.value,r=Number(n);!0!==isNaN(r)&&Number.isInteger(r)?(e.key=t.target.value,void 0!==e.key&&(e.key=e.key.trim(),""===e.key&&(e.key=void 0))):e.input&&(e.input.value=e.key)},e.baseInfo=Object(j.a)((function(){var t=e.controller,n=t.stock,r=(t.baseItem,e.controller.cApp.cCommon),a=Object(I.jsxs)("div",{className:"d-flex align-self-stretch align-items-center",children:[r.renderStockLink(n),"\xa0",r.renderPinStock(n,2),"\xa0",r.renderBlockStock(n)]});return Object(I.jsx)("div",{className:"bg-white",children:Object(x.g)(void 0,n,void 0,a)})})),e.predictInfo=Object(j.a)((function(){var t=e.controller,n=t.predictData,r=t.ypredict;if(void 0===n)return Object(I.jsx)(I.Fragment,{});var a=n.e,i=n.b,c=n.r2,s=n.epre,o=n.l,u=n.lr2,l=n.lpre,h=Object(I.jsx)(I.Fragment,{});if(5===r.length){var d=new g.a(r),f={labels:["0","1","2","3","4"],datasets:[{label:"\u6536\u76ca\u539f\u503c",data:r.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(!isNaN(d.B)&&!isNaN(d.A)){for(var p=[],v=0;v<5;++v)p.push(k.a.numberToPrecision(d.predict(v),4));f.datasets.push({label:"\u6307\u6570\u56de\u5f52",data:p,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1})}var b=new w.a(r);if(!isNaN(b.slope)&&!isNaN(b.intercept)){for(var m=[],j=0;j<5;++j)m.push(k.a.numberToPrecision(b.predict(j),4));f.datasets.push({label:"\u7ebf\u6027\u56de\u5f52",data:m,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}h=Object(I.jsx)(O.a,{data:f,type:"line"})}return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"d-flex",children:[Object(I.jsxs)("div",{className:"d-flex",children:[Object(I.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u6307\u6570\u56de\u5f52\u9884\u6d4b"}),Object(I.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("e"),k.a.numberToString(a,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("\u6307\u6570b"),k.a.numberToString(i,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("r2"),k.a.numberToString(c,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("e\u9884\u6d4b"),k.a.numberToString(s)]})]})]}),Object(I.jsxs)("div",{className:"d-flex",children:[Object(I.jsx)("div",{className:"px-3 py-2 bg-white",children:"\u7ebf\u6027\u56de\u5f52\u9884\u6d4b"}),Object(I.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("e"),k.a.numberToString(a,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("\u589e\u957f\u7387"),k.a.numberToString(o,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("r2"),k.a.numberToString(u,4)]}),Object(I.jsxs)("div",{className:"px-3 c12",children:[k.a.caption("e\u9884\u6d4b"),k.a.numberToString(l)]})]})]})]}),Object(I.jsx)("div",{className:"col",children:h})]})})),e.profitInfo=Object(j.a)((function(){var t=e.getProfitCharts(),n=t.chartFull,r=t.chartProfit,a=t.chartRevenue,i=e.predictChartROE();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"px-3 py-1 bg-white cursor-pointer text-primary",onClick:function(){return e.controller.showProfit()},children:"\u8425\u6536\u5229\u6da6>>"}),Object(I.jsxs)("div",{className:"row",children:[Object(I.jsx)("div",{className:"col",children:a}),Object(I.jsx)("div",{className:"col",children:n})]}),Object(I.jsxs)("div",{className:"row",children:[Object(I.jsx)("div",{className:"col",children:r}),Object(I.jsx)("div",{className:"col",children:i})]})]})})),e.getProfitCharts=function(){var t=e.controller.predictSeasonDataFull,n=t.length;if(n<=0)return{chartFull:Object(I.jsx)(I.Fragment,{}),chartProfit:Object(I.jsx)(I.Fragment,{}),chartRevenue:Object(I.jsx)(I.Fragment,{})};for(var r=[],a=[],i=[],c=[],s=[],o=n-1;o>=0;--o){var u=t[o];if(void 0!==u.netprofit){var l=k.a.SeasonnoToYearMonth(u.season);r.push(l),o<n-1&&a.push(l),i.push(u.netprofit),c.push(u.profit),s.push(u.revenue)}}var h=function(e){for(var t=e.length,n=[],r=e[0],a=1;a<t;++a){var i=e[a],c=i-r,s=(i+r)/2;s>1e-4?n.push(100*c/s):n.push(void 0),r=i}return n},d=h(i),f=h(c),p=h(s),v={labels:a,datasets:[{label:"\u51c0\u5229\u6da6",data:d.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};v.datasets.push({label:"\u8425\u4e1a\u5229\u6da6",data:f.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1}),v.datasets.push({label:"\u8425\u4e1a\u6536\u5165",data:p.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1});var b={labels:r,datasets:[{label:"\u51c0\u5229\u6da6",data:i.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};b.datasets.push({label:"\u8425\u4e1a\u5229\u6da6",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1});var m={labels:r,datasets:[{label:"\u8425\u4e1a\u6536\u5165",data:s,borderColor:"blue",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};return{chartFull:Object(I.jsx)(O.a,{data:v,type:"line"}),chartProfit:Object(I.jsx)(O.a,{data:b,type:"line"}),chartRevenue:Object(I.jsx)(O.a,{data:m,type:"line"})}},e.predictChartROE=function(){var t=e.controller.predictSeasonDataFull,n=t.length;if(n<=0)return Object(I.jsx)(I.Fragment,{});for(var r=[],a=[],i=n-1;i>=0;--i){var c=t[i];void 0!==c.netprofit&&(r.push(k.a.SeasonnoToYearMonth(c.season)),a.push(c.netprofit/c.shares/c.c))}var s={labels:r,datasets:[{label:"ROE\u539f\u503c",data:a.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]},o=new w.a(a);if(!isNaN(o.slope)&&!isNaN(o.intercept)){for(var u=[],l=0;l<n;++l)u.push(Number.parseFloat(o.predict(l).toPrecision(4)));s.datasets.push({label:"\u7ebf\u6027 R2:"+k.a.numberToString(o.r2,4),data:u,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}return Object(I.jsx)(O.a,{data:s,type:"line"})},e.bonusInfo=Object(j.a)((function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"px-3 py-1 bg-white cursor-pointer text-primary",onClick:function(){return e.controller.showBonus()},children:"\u5206\u7ea2\u4fe1\u606f>>"}),e.chartBonus()]})})),e.chartBonus=function(){var t=e.controller,n=t.predictBonusData,r=t.dividents;if(void 0!==r){var a=r.length;if(a<=0)return Object(I.jsx)(I.Fragment,{});for(var i=[],c=[],s=[],o=0;o<a;++o){var u=r[o];i.push(u.year),c.push(k.a.numberToPrecision(u.divident)),s.push(k.a.numberToPrecision(u.d3))}var l={labels:i,datasets:[{label:"\u6bcf\u5e74\u5206\u7ea2",data:c,borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1},{label:"3\u5e74\u5747\u503c",data:s,borderColor:"magenta",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:3,pointRadius:5,fill:!1}]};if(c.length>=3){var h=new w.a(c);if(!isNaN(h.slope)&&!isNaN(h.intercept)){for(var d=[],f=0;f<a;++f)d.push(Number.parseFloat(h.predict(f).toPrecision(4)));l.datasets.push({label:"\u7ebf\u6027 R2:"+k.a.numberToString(h.r2,4),data:d,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}}return Object(I.jsx)(O.a,{data:l,type:"line"})}var p=n.length;if(p<=0)return Object(I.jsx)(I.Fragment,{});for(var v=[],b=[],m=0;m<p;++m){var j=n[m];void 0!==j.bonus&&(v.push(j.year),b.push(j.bonus))}var y={labels:v,datasets:[{label:"\u5206\u7ea2\u539f\u503c",data:b.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(b.length>=3){var x=new w.a(b);if(!isNaN(x.slope)&&!isNaN(x.intercept)){for(var g=[],C=0;C<p;++C)g.push(Number.parseFloat(x.predict(C).toPrecision(4)));y.datasets.push({label:"\u7ebf\u6027 R2:"+k.a.numberToString(x.r2,4),data:g,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}}return Object(I.jsx)(O.a,{data:y,type:"line"})},e.miratesChart=Object(j.a)((function(){var t=e.controller.mirates,n=t.length;if(n<=0)return Object(I.jsx)(I.Fragment,{});for(var r=[],a=[],i=[],c=0;c<n;++c){var s=t[c];void 0!==s.day&&(r.push(s.day),a.push(k.a.numberToPrecision(s.mirate)),i.push(k.a.numberToPrecision(s.price)))}var o={labels:r,datasets:[{label:"\u4ef7\u683c",data:i,borderColor:"navy",backgroundColor:"pink",pointStyle:"crossRot",borderWidth:1,pointRadius:1,fill:!1,yAxisID:"y-axis-1"},{label:"\u7c73\u606f\u7387",data:a,borderColor:"magenta",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:3,pointRadius:1,fill:!1,yAxisID:"y-axis-2"}]};return Object(I.jsx)(O.a,{data:o,type:"line",options:{scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1"},{type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1}}]}}})})),e.mivaluesChart=Object(j.a)((function(){var t=e.controller.mivalues,n=t.length;if(n<=0)return Object(I.jsx)(I.Fragment,{});for(var r=[],a=[],i=0;i<n;++i){var c=t[i];void 0!==c.season&&(r.push(k.a.SeasonnoToYearMonth(c.season)),a.push(c.mivalue))}var s={labels:r,datasets:[{label:"\u7c73\u606f",data:a.map((function(e){return k.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};return Object(I.jsx)(O.a,{data:s,type:"line"})})),e}return Object(l.a)(n,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return this.page()}}]),n}(b.VPage),a=Object(p.a)(r.prototype,"ttmLimit",[m.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(12),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(15),l=n(5),h=n(6),d=n(7),f=n(76),p=n(54),v=n(34),b=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(e){var t=this;return Object(b.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){return t.controller.breakChain(e)},children:Object(b.jsx)(d.FA,{name:"chain-broken"})})}}]),n}(d.View),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){return Object(b.jsx)("div",{className:"px-3 py-2",children:e.controller.props.ID.render(t)})},e}return Object(o.a)(n,[{key:"header",value:function(){var e=this.controller.props,t=e.listHeader,n=e.header;if(t)return t;if(n)switch(typeof n){default:return n;case"string":return n+" "+this.t("list")}var r=this.controller.props.ID,a=r.t(r.sName);return"string"===typeof a?a+" "+this.t("list"):Object(b.jsxs)(b.Fragment,{children:[a," ",this.t("list")]})}},{key:"right",value:function(){var e=this.controller,t=e.props,n=e.onSetIXItem,r=t.renderRight;return null===r?null:void 0!==r?r():Object(b.jsx)("button",{className:"btn btn-sm btn-success mr-1",onClick:n,children:Object(b.jsx)(d.FA,{name:"chain"})})}},{key:"content",value:function(){var e,t=this.controller,n=t.props,r=t.onClickItem,a=n.renderItem,i=n.renderXi,c=n.xi;return e=i?i(c):Object(b.jsx)("div",{className:"p-3",children:JSON.stringify(c)}),Object(b.jsxs)("div",{children:[e,Object(b.jsx)(d.List,{items:this.controller.pageItems,item:{render:null!==a&&void 0!==a?a:this.renderItem,onClick:r}})]})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageItems.more();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}}]),n}(d.VPage),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).pageItems=void 0,e.onSetIXItem=Object(c.a)(i.a.mark((function t(){var n,r,a,c,s,o,u,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=e.props.onSetIXItem)){t.next=3;break}return t.abrupt("return");case 3:if(void 0===n){t.next=7;break}return t.next=6,n();case 6:return t.abrupt("return");case 7:return r=e.props,a=r.uq,c=r.ID,s=r.IX,o=r.xi,u=new f.CIDSelect({uq:a,ID:c}),t.next=11,u.call();case 11:if(l=t.sent,e.pageItems.findItem(l)){t.next=16;break}return t.next=15,a.ActIX({IX:s,values:[{ix:l.id,xi:o.id}]});case 15:e.pageItems.append(l);case 16:e.closePage();case 17:case"end":return t.stop()}}),t)}))),e.onClickItem=function(){var t=Object(c.a)(i.a.mark((function t(n){var a,c,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(u.a)(e),c=a.props,null!==(s=c.onClickItem)){t.next=4;break}return t.abrupt("return");case 4:if(void 0===s){t.next=8;break}return t.next=7,s(n);case 7:return t.abrupt("return",t.sent);case 8:return o=new p.a(Object(r.a)(Object(r.a)({},c),{},{renderRight:function(){return e.renderView(m,n)},onItemChanged:null})),t.next=11,o.start(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.breakChain=function(){var t=Object(c.a)(i.a.mark((function t(n){var r,a,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.uq,c=r.IX,s=r.xi,t.next=3,a.ActIX({IX:c,values:[{ix:n.id,xi:-s.id}]});case 3:e.pageItems.removeItem(n),e.closePage();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.ID,r=t.IX,a=t.xi,this.pageItems=new O(this.uq,n,r,a),e.next=4,this.pageItems.first({});case 4:this.openVPage(j);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,!0)).uq=void 0,c.ID=void 0,c.IX=void 0,c.xi=void 0,c.uq=e,c.ID=r,c.IX=a,c.xi=i,c}return Object(o.a)(n,[{key:"getPageId",value:function(e){return null===e||void 0===e?void 0:e.id}},{key:"loadResults",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.QueryID({IX:["!"+this.IX.name],IDX:[this.ID],ix:null===(a=this.xi)||void 0===a?void 0:a.id,page:{start:n,size:r}});case 2:return c=e.sent,e.abrupt("return",{$page:c});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=this._items.find((function(t){return t.id===e.id}));t?Object.assign(t,e):this._items.unshift(e)}}]),n}(d.PageItems)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(12),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(15),l=n(5),h=n(6),d=n(7),f=n(53),p=n(54),v=n(34),b=n(0),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){return Object(b.jsx)("div",{className:"px-3 py-2",children:e.controller.props.ID.render(t)})},e}return Object(o.a)(n,[{key:"header",value:function(){var e=this.controller.props,t=e.listHeader,n=e.header;if(t)return t;if(n)switch(typeof n){default:return n;case"string":return n+" "+this.t("list")}var r=this.controller.props.ID,a=r.t(r.sName);return"string"===typeof a?a+" "+this.t("list"):Object(b.jsxs)(b.Fragment,{children:[a," ",this.t("list")]})}},{key:"right",value:function(){var e=this.controller,t=e.props,n=e.onAddItem,r=t.renderRight;return null===r?null:void 0!==r?r():Object(b.jsx)("button",{className:"btn btn-sm btn-success mr-1",onClick:n,children:Object(b.jsx)(d.FA,{name:"plus"})})}},{key:"content",value:function(){var e,t=this.controller,n=t.props,r=t.onClickItem,a=n.renderItem,i=n.renderIx,c=n.ix;return e=i?i(c):Object(b.jsx)("div",{className:"p-3",children:JSON.stringify(c)}),Object(b.jsxs)("div",{children:[e,Object(b.jsx)(d.List,{items:this.controller.pageItems,item:{render:null!==a&&void 0!==a?a:this.renderItem,onClick:r}})]})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageItems.more();case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}}]),n}(d.VPage),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).pageItems=void 0,e.onAddItem=Object(c.a)(i.a.mark((function t(){var n,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=e.props.onAddItem)){t.next=3;break}return t.abrupt("return");case 3:if(void 0===n){t.next=7;break}return t.next=6,n();case 6:return t.abrupt("return");case 7:return a=function(){var t=Object(c.a)(i.a.mark((function t(n){var r,a,c,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.IX,c=r.ID,s=r.ix,t.next=3,e.uq.ActIX({IX:a,ID:c,values:[{ix:null===s||void 0===s?void 0:s.id,xi:n}]});case 3:return o=t.sent,t.abrupt("return",o[0]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=new f.a(Object(r.a)(Object(r.a)({},e.props),{},{renderRight:void 0,onItemChanged:e.onItemChanged,saveItem:a})),t.next=11,s.start();case 11:case"end":return t.stop()}}),t)}))),e.onClickItem=function(){var t=Object(c.a)(i.a.mark((function t(n){var a,c,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(u.a)(e),c=a.props,null!==(s=c.onClickItem)){t.next=4;break}return t.abrupt("return");case 4:if(void 0===s){t.next=8;break}return t.next=7,s(n);case 7:return t.abrupt("return",t.sent);case 8:return o=new p.a(Object(r.a)(Object(r.a)({},c),{},{renderRight:void 0,onItemChanged:e.onItemChanged})),t.next=11,o.start(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onItemChanged=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageItems.update(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.ID,r=t.IX,a=t.ix,this.pageItems=new y(this.uq,n,r,a),e.next=4,this.pageItems.first({});case 4:this.openVPage(m);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,!0)).uq=void 0,c.ID=void 0,c.IX=void 0,c.ix=void 0,c.uq=e,c.ID=r,c.IX=a,c.ix=i,c}return Object(o.a)(n,[{key:"loadResults",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.QueryID({IX:[this.IX],IDX:[this.ID],ix:null===(a=this.ix)||void 0===a?void 0:a.id,page:{start:n,size:r}});case 2:return c=e.sent,e.abrupt("return",{$page:c});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=this._items.find((function(t){return t.id===e.id}));t?Object.assign(t,e):this._items.unshift(e)}}]),n}(d.PageItems)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),i=n(2),c=n(10),s=n(3),o=n(4),u=n(5),l=n(6),h=n(33),d=(n(9),n(0)),f={height:"auto"},p=function(){function e(t){Object(s.a)(this,e),this.tag=void 0,this.tag=t}return Object(o.a)(e,[{key:"render",value:function(e){var t;return t="number"===typeof e?[this.tag.nameFromId(e)]:this.tag.namesFromIds(e),Object(d.jsx)("div",{className:"d-flex flex-wrap ",children:t.map((function(e,t){return Object(d.jsx)("div",{className:"mx-2 border border-muted rounded px-3 bg-light",children:e},t)}))})}},{key:"renderRadios",value:function(e,t){var n=this,r=this.tag.values.map((function(r,a){return Object(d.jsx)("div",{className:"col",children:n.renderRadio(r,e,t)},a)}));return this.renderView(t,r)}},{key:"renderChecks",value:function(e,t){var n=this,r=void 0===e?void 0:e.split("|").map((function(e){return Number(e)})),a=this.tag.values.map((function(e,a){var i=void 0===r?void 0:r.indexOf(e.id)>=0;return Object(d.jsx)("div",{className:"col",children:n.renderCheck(e,i,t)},a)}));return this.renderView(t,a)}},{key:"renderView",value:function(e,t){var n=e.className,r=e.wrapClassName;return r=r?"row "+r:"row row-cols-2 row-cols-sm-3 row-cols-md-4",Object(d.jsx)("div",{className:n,style:f,children:Object(d.jsx)("div",{className:r,children:t})})}},{key:"renderRadio",value:function(e,t,n){var r=e.id,a=e.name,i=n.inputs,c=n.inputName,s=n.onInputChange,o=i&&function(e){return i[r]=e};return Object(d.jsxs)("label",{className:"form-radio-inline",children:[Object(d.jsx)("input",{ref:o,type:"radio",name:c,value:r,defaultChecked:t===r,onChange:s}),a]})}},{key:"renderCheck",value:function(e,t,n){var r=e.id,a=e.name,i=n.inputs,c=n.onInputChange,s=i&&function(e){return i[r]=e};return Object(d.jsxs)("label",{className:"form-radio-inline",children:[Object(d.jsx)("input",{ref:s,type:"checkbox",value:r,defaultChecked:t,onChange:c}),a]})}}]),e}(),v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).values=void 0,e.coll={},e._view=void 0,e}return Object(o.a)(n,[{key:"typeName",get:function(){return"tag"}},{key:"view",get:function(){return void 0!==this._view?this._view:this._view=new p(this)}},{key:"nameFromId",value:function(e){var t=this.coll[e];return void 0===t?void 0:t.name}},{key:"namesFromIds",value:function(e){var t,n=[],r=Object(c.a)(e.split("|"));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=this.coll[Number(a)],s=void 0===i?void 0:i.name;void 0!==s&&n.push(s)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"loadValues",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,s,o,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.values){e.next=2;break}return e.abrupt("return",this.values);case 2:return this.values=[],e.next=5,this.uqApi.get("tag/values/"+this.name);case 5:if(void 0!==(t=e.sent)){e.next=8;break}return e.abrupt("return");case 8:n=t.split("\n"),r=Object(c.a)(n),e.prev=10,r.s();case 12:if((i=r.n()).done){e.next=23;break}if(0!==(s=i.value).length){e.next=16;break}return e.abrupt("continue",21);case 16:o=s.split("\t"),u=Number(o[0]),l={id:u,name:o[1],ext:o[2]},this.values.push(l),this.coll[u]=l;case 21:e.next=12;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(10),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:return e.abrupt("return",this.values);case 32:case"end":return e.stop()}}),e,this,[[10,25,28,31]])})));return function(){return e.apply(this,arguments)}}()}]),n}(h.a))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(15),i=n(5),c=n(6),s=n(8),o=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).item=void 0,Object(s.o)(Object(a.a)(i),{item:s.p}),i}return n}(n(34).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n(4),i=function(){function e(t){Object(r.a)(this,e),this.A=void 0,this.B=void 0,this.y=void 0,this.r2=void 0,this.y=t,this.regress();var n=this.score();this.r2=n.r2}return Object(a.a)(e,[{key:"regress",value:function(){for(var e=this.y.length,t=0,n=0,r=0,a=0,i=0;i<e;++i){t+=i;var c=Math.log(this.y[i]);n+=c,r+=i*i,a+=i*c}var s=(e*a-t*n)/(e*r-t*t),o=1/e*n-s*(1/e)*t;this.A=Math.exp(o),this.B=s}},{key:"score",value:function(){for(var e=this.y.length,t=new Array(e),n=0;n<e;n++)t[n]=this.predict(n);for(var r=0,a=0,i=0,c=0,s=0,o=0,u=0,l=0;l<e;l++){var h=t[l];r+=h;var d=this.y[l];a+=d,s+=h*h,o+=d*d,u+=h*d;var f=d-h;0!==d&&(i+=f*f/d),c+=f*f}var p=(e*u-r*a)/Math.sqrt((e*s-r*r)*(e*o-a*a));return{r:p,r2:p*p,chi2:i,rmsd:Math.sqrt(c/e)}}},{key:"predict",value:function(e){return this.A*Math.exp(e*this.B)}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return st}));var r=n(4),a=n(3),i=n(5),c=n(6),s=n(7),o=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return n}(s.CBase),u=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return n}(s.CSub),l=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"newC",value:function(e){var t=new e(this);return t.init(),t}}]),n}(s.CAppBase),h=n(1),d=n.n(h),f=n(2),p=n(24),v={name:"TimesChange",discription:"Test Times Change hours",test:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},b=[{name:"HelloTonva.GetProductStock",discription:"{product: 1}",test:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t("test1"),t("test1"),t("test1"),t("test1"),t("test1"),t("test1"),t("test1"),t("test1");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{name:"\u7b2c\u4e8c\u6d4b\u8bd5",discription:"second test",test:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{name:"\u7b2c\u4e09\u6d4b\u8bd5",discription:"third test",test:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{name:"Tag\u6d4b\u8bd5",discription:"Tag Test",test:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},v],m=n(0),j=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderItem=function(t,n){var r=t.name,a=t.discription,i=Object(m.jsx)(s.FA,{name:"angle-right"});return Object(m.jsx)(s.LMR,{className:"px-3 py-2 cursor-pointer mt-1 bg-white",onClick:function(){return e.controller.openDebugPage(t)},right:i,children:Object(m.jsxs)("div",{children:[r," ",Object(m.jsx)("small",{className:"text-muted",children:a})]})},n)},e}return Object(r.a)(n,[{key:"header",value:function(){return Object(m.jsxs)("div",{className:"px-3",children:["Debug",Object(m.jsx)("small",{className:"text-muted",children:" - \u672c\u9875\u4ec5\u8c03\u8bd5\u72b6\u6001\u53ef\u89c1"})]})}},{key:"content",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:this.controller.debugItems.map(this.renderItem)}),Object(m.jsx)("div",{className:"px-3 py-2",children:Object(m.jsx)("button",{className:"btn btn-primary",onClick:this.controller.test,children:"test"})})]})}}]),n}(s.VPage),y=n(10),O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).div=void 0,e.divBottom=void 0,e.autoScrollEnd=!1,e.autoScroll=!0,e.lastScrollTop=0,e.timeHandler=void 0,e.log=function(t){var n,r=document.createRange();r.selectNode(e.div),n=t?"object"===typeof t?e.objToHtml(t):"<div>"+t+"</div>":"<div>&nbsp;</div>";var a=r.createContextualFragment(n);e.div.appendChild(a)},e}return Object(r.a)(n,[{key:"init",value:function(){this.startAutoScrollToBottom()}},{key:"header",value:function(){return this.controller.currentItem.name}},{key:"content",value:function(){var e=this,t=this.controller.currentItem,n=t.name,r=t.discription;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsx)("div",{children:Object(m.jsx)("b",{children:n})}),Object(m.jsx)("div",{children:r})]}),Object(m.jsx)("div",{ref:function(t){return e.div=t},className:"p-3 border-top border-primary bg-light"}),Object(m.jsx)("div",{ref:function(t){return e.divBottom=t}})]})}},{key:"startAutoScrollToBottom",value:function(){var e=this;!0!==this.autoScrollEnd&&(this.autoScroll=!0,void 0===this.timeHandler&&(this.timeHandler=setInterval((function(){var t;!1!==e.autoScroll&&(null===(t=e.divBottom)||void 0===t||t.scrollIntoView())}),100)))}},{key:"endAutoScrollToBottom",value:function(){var e=this;setTimeout((function(){e.autoScroll=!1,e.autoScrollEnd=!0,void 0!==e.timeHandler&&(clearInterval(e.timeHandler),e.timeHandler=void 0)}),300)}},{key:"pauseAutoScrollToBottom",value:function(){this.autoScroll=!1}},{key:"onPageScroll",value:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight,a=t.offsetHeight;n<=this.lastScrollTop?this.pauseAutoScrollToBottom():n+a>r-30&&this.startAutoScrollToBottom(),this.lastScrollTop=n}},{key:"objToHtml",value:function(e){if(null===e)return"<div>null</div>";if(void 0===e)return"<div>undefined</div>";if(!0===Array.isArray(e))return this.arrToHtml(0,e);var t="<div>{</div>";for(var n in e){t+=this.indent(1)+n+": ";var r=e[n];!0===Array.isArray(r)?t+=this.arrToHtml(1,r):t+=this.objToString(r)}return t+="<div>}</div>"}},{key:"indent",value:function(e){if(!e)return"";var t="";e*=2;for(var n=0;n<e;n++)t+="&emsp;";return t}},{key:"objToString",value:function(e){if(null===e)return"null";if(!0===Array.isArray(e))return"array["+e.length+"]";switch(typeof e){default:return e.toString();case"undefined":return"undefined";case"object":return void 0===e.tuid?"obj":e.id}}},{key:"objToLine",value:function(e,t){var n=!0,r="<div>"+this.indent(e)+"{ ";for(var a in t)!1===n?r+=", ":n=!1,r+=a+":"+this.objToString(t[a]);return r+=" }</div>"}},{key:"indentVal",value:function(e,t){return"<div>"+this.indent(e)+t+"</div>"}},{key:"arrToHtml",value:function(e,t){var n,r="<div>"+this.indent(e)+"[</div>",a=Object(y.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=void 0;switch(typeof i){default:c=this.indentVal(e+1,i);break;case"object":c=this.objToLine(e+1,i);break;case"string":c=this.indentVal(e+1,"'".concat(i,"'"))}r+=c}}catch(s){a.e(s)}finally{a.f()}return r+="<div>"+this.indent(e)+"]</div>"}}]),n}(s.VPage),k=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).debugItems=Object(p.a)(b),e.currentItem=void 0,e.tab=function(){return e.renderView(j)},e.load=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.openDebugPage=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,a,i,c,s,o,u,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.currentItem=n,t.next=3,e.openVPage(O);case 3:return r=t.sent,a=n.test,i=new Date,r.log("=== test start at ".concat(i," ===")),r.log(),t.next=10,a(r.log,e.uqs);case 10:c=Date.now()-i.getTime(),s=(1e3+c%1e3).toString().substr(1),o=Math.floor(c/1e3),u=Math.floor(o/60),l="",u>0&&(l+=s+"'"),l+=o+'"'+s,r.log(),r.log("=== test end: ".concat(l," ==="));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.test=Object(f.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"BizDev/hello-tonva",t.next=3,e.getUqRoles("BizDev/hello-tonva");case 3:n=t.sent,alert(n);case 5:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(j);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),x={$zh:{home:"\u9996\u9875",relation:"\u5173\u7cfb",discover:"\u53d1\u73b0",test:"\u6d4b\u8bd5",debug:"Debug",me:"\u6211",changePassword:"\u4fee\u6539\u5bc6\u7801",aboutTheApp:"\u5173\u4e8e\u672cAPP",logout:"\u9000\u51fa\u767b\u5f55",pleaseLogin:"\u767b\u5f55",content:"\u5185\u5bb9",backend:"\u540e\u53f0\u7ba1\u7406",myAll:"\u81ea\u9009\u80a1",myBlack:"\u9ed1\u540d\u5355"},$en:{home:"Home",relation:"Relation",discover:"Discover",test:"Test",debug:"Debug",me:"Me",changePassword:"Change password",aboutTheApp:"About the APP",logout:"Logout",pleaseLogin:"Login",content:"Content",backend:"Backend Management",myAll:"All My Stock",myBlack:"Block List"}},g=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return!1}},{key:"tabsProps",get:function(){var e=this.controller,t=e.cHome,n=e.cFind,r=e.cTrack,a=e.cMe;return{tabs:[{name:"home",label:"\u9996\u9875",icon:"money",notify:void 0,content:t.tab},{name:"find",label:"\u53d1\u73b0",icon:"search",content:n.tab,load:n.load},{name:"track",label:"\u56de\u6eaf",icon:"history",content:r.tab,load:r.load},{name:"me",label:"\u6211\u7684",icon:"user",content:a.tab,onShown:void 0,load:a.load}].map((function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(s.TabCaptionComponent)(n,r,function(e){return!0===e?"text-primary":"text-muted"}(e))},content:e.content,notify:e.notify,load:e.load,onShown:e.onShown}}))}}}]),n}(s.VPage),w=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderItem=function(e,t){var n=e.name,r=e.discription,a=e.click,i=Object(m.jsx)(s.FA,{name:"angle-right"});return Object(m.jsx)(s.LMR,{className:"px-3 py-2 cursor-pointer mt-1 bg-white",onClick:a,right:i,children:Object(m.jsxs)("div",{children:[n," ",Object(m.jsx)("small",{className:"text-muted",children:r})]})},t)},e}return Object(r.a)(n,[{key:"header",value:function(){return Object(m.jsxs)("div",{className:"px-3",children:["UI",Object(m.jsx)("small",{className:"text-muted",children:" - \u672c\u9875\u4ec5\u8c03\u8bd5\u72b6\u6001\u53ef\u89c1"})]})}},{key:"content",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:this.controller.uiItems.map(this.renderItem)})})}}]),n}(s.VPage),I=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).uiItems=[],e.tab=function(){return e.renderView(w)},e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(w);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(s.CBase),C=n(105);var S=n(62),N={version:"0.1.5",app:void 0,uqs:[{dev:{name:"bruce",alias:void 0},name:"yumi",alias:"YuMi",version:"0.1.0"}],noUnit:!0,tvs:{},oem:void 0,htmlTitle:"\u9c7c\u7c73\u4e61 - \u79c1\u4eab\u6295\u8d44\u5708"},A=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u5173\u4e8eAPP"}},{key:"content",value:function(){return Object(m.jsxs)("div",{className:"py-5 px-3 my-3 w-max-30c mx-auto bg-white",children:[Object(m.jsxs)("div",{className:"text-center mb-5 position-relative",children:[Object(m.jsxs)("small",{className:"text-muted position-absolute",style:{right:"0",top:"-2.8rem"},children:["\u7248\u672c: ",N.version]}),Object(m.jsx)("i",{className:"text-danger position-absolute top-0 start-0 fa fa-fire fa-2x",style:{left:"2rem",top:"0.5rem"}}),Object(m.jsxs)("b",{className:"text-danger h5 mb-0",children:[Object(m.jsx)("span",{className:"text-primary",children:"\u9c7c"}),Object(m.jsx)("b",{className:"mx-1",children:"\u7c73"}),Object(m.jsx)("span",{className:"text-success",children:"\u4e61"})]}),Object(m.jsx)("br",{}),Object(m.jsx)("small",{className:"text-info",children:"\u79c1\u4eab\u6295\u8d44\u5708"})]}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"\u8ddf\u5bb6\u4eba\u548c\u597d\u53cb\u4e00\u8d77\u5206\u4eab\u6295\u8d44\u601d\u8003\u3002"}),Object(m.jsx)("li",{children:"\u4e16\u754c\u7ea7\u6295\u8d44\u5927\u5e08\u5e74\u5316\u6536\u76ca\u738711%\u3002"}),Object(m.jsx)("li",{children:"\u5168\u7403\u6700\u5927\u7684\u6210\u957f\u7ecf\u6d4e\u4f53GDP\u589e\u957f\u7387\u9ad8\u4e8e5%\u3002"}),Object(m.jsxs)("li",{children:["\u4ee510%\u4e3a\u57fa\u7840\uff0c\u671f\u5f85",Object(m.jsx)("b",{className:"text-danger mx-1",children:"15%\u4ee5\u4e0a"}),"\u7684\u9ad8\u6c34\u5e73\u3002"]})]}),Object(m.jsxs)("div",{className:"mt-5 text-center",children:[Object(m.jsx)("small",{className:"text-muted mr-2",children:"by"}),"\u540c\u82b1"]})]})}}]),n}(s.VPage),_=n(15),D=n(8),P=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],r.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},r.data=void 0,r.onItemChanged=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,s.userApi.userSetProp(i,n);case 3:Object(D.r)((function(){r.data[i]=n,s.nav.user[i]=n,s.nav.saveLocalUser()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.onExit=function(){s.nav.showLogout()},r.changePassword=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.nav.changePassword();case 2:case"end":return e.stop()}}),e)}))),r.page=function(){var e=Object(_.a)(r),t=e.schema,n=e.uiSchema,a=e.data,i=e.onItemChanged,c=["",{type:"component",component:Object(m.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"key",text:r.t("changePassword")}),onClick:r.changePassword},"","",{type:"component",bk:"",component:Object(m.jsx)("div",{className:"w-100 text-center",children:Object(m.jsxs)("button",{className:"btn btn-danger w-100 w-max-20c",onClick:r.onExit,children:[Object(m.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",r.t("logout")]})})}];return Object(m.jsxs)(s.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",children:[Object(m.jsx)(s.Edit,{schema:t,uiSchema:n,data:a,onItemChanged:i}),Object(m.jsx)(s.PropGrid,{rows:c,values:{}})]})};var i=s.nav.user,c=i.nick,o=i.icon;return r.data={nick:c,icon:o},Object(D.o)(Object(_.a)(r),{data:D.p}),r}return Object(r.a)(n,[{key:"open",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),T=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u7c73\u6295\u4f53\u7cfb"}},{key:"content",value:function(){return Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{className:"my-3",children:[Object(m.jsx)("div",{className:"my-2",children:"\u57fa\u672c\u516c\u7406"}),Object(m.jsxs)("ul",{className:"px-3 text-info",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u516c\u74061: "}),"\u8fdb\u6b65\u662f\u793e\u4f1a\u7684\u5fc5\u7136"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u516c\u74062: "}),"\u4fe1\u4efb\u662f\u7ecf\u6d4e\u7684\u57fa\u77f3"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u516c\u74063: "}),"\u4ef7\u503c\u662f\u4ef7\u683c\u7684\u51c6\u5fc3"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u516c\u74064: "}),"\u53d1\u5c55\u662f\u4f01\u4e1a\u7684\u57fa\u56e0"]})]})]}),Object(m.jsxs)("li",{className:"my-3",children:[Object(m.jsx)("div",{className:"my-2",children:"\u7c73\u6295\u5b9a\u5f8b"}),Object(m.jsx)("ul",{className:"px-3 text-info",children:Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u5f8b1: "}),"\u6295\u8d44\u65e0\u98ce\u9669"]})})]}),Object(m.jsxs)("li",{className:"my-3",children:[Object(m.jsx)("div",{className:"my-2",children:"\u7c73\u6295\u539f\u5219"}),Object(m.jsxs)("ul",{className:"px-3 text-info",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u539f\u52191: "}),"\u4f4e\u4f30"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u539f\u52192: "}),"\u5206\u6563"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u539f\u52193: "}),"\u4e0d\u6df1\u7814"]})]})]}),Object(m.jsxs)("li",{className:"my-3",children:[Object(m.jsx)("div",{className:"my-2",children:"\u7c73\u606f\u5b9a\u4e49"}),Object(m.jsxs)("ul",{className:"px-3 text-info",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e491: "}),"\u7c73\u606f = \u589e\u606f + \u80a1\u606f"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e492: "}),"\u589e\u606f = \u4f01\u4e1a\u672a\u6765\u4e09\u5e74\u5229\u6da6\u589e\u957f\u503c"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e493: "}),"\u7c73\u606f\u7387 = \u7c73\u606f / \u80a1\u4ef7"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e494: "}),"\u7c73\u606f\u7387\u5927\u4e00\u500d\uff0c\u7c73\u606f\u5206\u52a01"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"mr-3",children:"\u5b9a\u4e495: "}),"PE = \u80a1\u4ef7 / \u5229\u6da6"]})]})]})]})}}]),n}(s.VPage),R=n(9),E=n.n(R),F=n(11),V=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).meInfo=Object(F.a)((function(){var t=s.nav.user;if(!t)return null;var n=t.id,r=t.name,a=t.nick,i=t.icon;return Object(m.jsx)(s.LMR,{className:"py-2 cursor-pointer w-100",left:Object(m.jsx)(s.Image,{className:"w-3c h-3c mr-3",src:i||".user-o"}),right:Object(m.jsx)(s.FA,{className:"align-self-end",name:"angle-right"}),onClick:e.controller.showEditMe,children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:L(r,a)}),Object(m.jsxs)("div",{className:"small",children:[Object(m.jsx)("span",{className:"text-muted",children:"ID:"})," ",n>1e4?n:String(n+1e4).substr(1)]})]})})})),e.faq=function(){e.openVPage(T)},e.about=function(){e.openVPage(A)},e}return Object(r.a)(n,[{key:"header",value:function(){return this.t("me")}},{key:"content",value:function(){var e,t=s.nav.user,n=["",{type:"component",component:Object(m.jsx)(s.LMR,{className:"w-100",onClick:this.faq,right:Object(m.jsx)(s.FA,{className:"align-self-center",name:"angle-right"}),children:Object(m.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"comments-o",text:this.t("\u7c73\u6295\u4f53\u7cfb")})})},{type:"component",component:Object(m.jsx)(s.LMR,{className:"w-100",onClick:this.about,right:Object(m.jsx)(s.FA,{className:"align-self-center",name:"angle-right"}),children:Object(m.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:Object(m.jsxs)(m.Fragment,{children:[this.t("aboutTheApp")," ",Object(m.jsxs)("small",{children:["\u7248\u672c ",N.version]})]})})})}];if(void 0===t)(e=n).push({type:"component",component:Object(m.jsxs)("button",{className:"btn btn-success w-100 my-2",onClick:function(){return s.nav.logout()},children:[Object(m.jsx)(s.FA,{name:"sign-out",size:"lg"})," ",this.t("pleaseLogin")]})});else{var r;(r=e=["",{type:"component",component:E.a.createElement(this.meInfo)},"",{type:"component",component:Object(m.jsx)(s.LMR,{className:"w-100",onClick:this.controller.backend,right:Object(m.jsx)(s.FA,{className:"align-self-center",name:"angle-right"}),children:Object(m.jsx)(s.IconText,{iconClass:"text-info mr-2",icon:"comments-o",text:this.t("\u7528\u6237\u89d2\u8272")})})}]).push.apply(r,n.concat([]))}return Object(m.jsx)(s.PropGrid,{rows:Object(p.a)(e),values:{}})}}]),n}(s.VPage);function L(e,t){return t?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("b",{children:[t," \xa0 ",Object(m.jsx)("small",{className:"muted",children:e})]})}):Object(m.jsx)("b",{children:e})}var M=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).uq=void 0,r.role=void 0,r.unitOwner=void 0,r.rootUnits=void 0,r.roles=null,r.tab=function(){return r.renderView(V)},r.load=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getUqRoles(r.uq.$.name);case 2:r.roles=e.sent;case 3:case"end":return e.stop()}}),e)}))),r.showEditMe=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.role=void 0,r.openVPage(P);case 2:case"end":return e.stop()}}),e)}))),r.backend=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new S.CRoles(r.uq),e.next=3,t.start();case 3:case"end":return e.stop()}}),e)}))),r.showFaq=function(){r.openVPage(T)},r.showAbout=function(){r.openVPage(A)},r.uq=r.uqs.BruceYuMi,r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),B=n(12),q=n(36),U=function(){function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.account=void 0,this.stock=void 0,this.price=void 0,this.quantity=void 0,this.cost=void 0,this.miValue=void 0,this.market=void 0,this.divident=void 0,this.stockObj=void 0,this.everBought=void 0,Object(D.o)(this,{cost:D.p}),this.id=t,this.stock=n.id,this.stockObj=n,this.price=n.price,this.cost=i||r*this.price,this.setQuantity(r)}return Object(r.a)(e,[{key:"setQuantity",value:function(e){var t;this.quantity=e;var n=this.stockObj,r=n.divident,a=n.miRate;void 0===a&&(a=0),void 0===r&&(r=0),this.market=e*this.price,this.miValue=this.market*a/100,this.divident=e*(null!==(t=r)&&void 0!==t?t:0)}},{key:"changeCost",value:function(e,t){this.cost=this.cost+e*t}},{key:"setCostPrice",value:function(e){this.cost=this.quantity*e}}]),e}();function H(e,t){return null===e||void 0===e?1:null===t||void 0===t?-1:e<t?1:e>t?-1:0}var X=function(e,t){return H(e.stockObj.miRate,t.stockObj.miRate)},W=function(e,t){return H(e.miRate,t.miRate)},G=function(){function e(t,n){var r=this;Object(a.a)(this,e),this.store=void 0,this.id=void 0,this.no=void 0,this.name=void 0,this.portion=20,this.portionAmount=null,this.count=0,this.buyableCount=0,this.miValue=0,this.market=0,this.divident=0,this.cash=null,this.holdingStocks=null,this.setPortionAmount=function(){var e,t=r.market+(null!==(e=r.cash)&&void 0!==e?e:0),n=t/r.portion;(n=1e3*Math.round(n/1e3))>0?r.portionAmount=n:(r.portion=5,n=t/r.portion,(n=1e3*Math.round(n/1e3))>0?r.portionAmount=n:(r.portion=1,r.portionAmount=void 0))},Object(D.o)(this,{name:D.p,portion:D.p,portionAmount:D.p,holdingStocks:D.p,count:D.p,miValue:D.p,market:D.p,divident:D.p,cash:D.p,loadItems:D.f,buyNewHolding:D.f,buyHolding:D.f,sellHolding:D.f,buyableCount:D.p}),this.store=t,Object.assign(this,n),Object(D.g)(this.setPortionAmount)}return Object(r.a)(e,[{key:"loadItems",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.holdingStocks){e.next=3;break}return this.holdingStocks.sort(X),e.abrupt("return");case 3:return t=this.store.yumi,e.next=6,t.IX({IX:t.AccountHolding,ix:this.id,IDX:[t.Holding,t.Portfolio]});case 6:if(n=e.sent,!((r=n.filter((function(e){return!a.store.stockFromId(e.stock)}))).length>0)){e.next=13;break}return e.next=11,t.ActIX({IX:t.UserAllStock,values:r.map((function(e){return{ix:void 0,xi:e.stock}}))});case 11:return e.next=13,this.store.loadMyAll();case 13:Object(D.r)((function(){var e=n.map((function(e){var t=e.id,n=e.stock,r=e.cost,i=e.everBought,c=a.store.stockFromId(n),s=new U(t,c,e.quantity,r);return s.everBought=i,s}));e.sort(X),a.holdingStocks=Object(D.p)(e),a.count=a.holdingStocks.length,a.recalc(),a.setPortionAmount()}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buyNewHolding",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a,i,c,s,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.store.stockFromId(t)){e.next=7;break}return e.next=4,this.store.loadStock(t);case 4:if(i=e.sent){e.next=7;break}throw new Error("stock ".concat(t," not exists"));case 7:if(!((c=this.holdingStocks.findIndex((function(e){return e.stock===t})))<0)){e.next=19;break}return e.next=11,this.saveHolding(t);case 11:return a=e.sent,e.next=14,this.store.addMyAll(i);case 14:(s=new U(a,i,r,n*r)).setQuantity(r),this.holdingStocks.push(s),e.next=24;break;case 19:o=this.holdingStocks[c],a=o.id,u=o.quantity+r,o.setQuantity(u),o.changeCost(n,r);case 24:return this.cash&&(this.cash-=n*r),e.next=27,this.bookHolding(a,n,r);case 27:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buyHolding",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a,i,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=this.holdingStocks.findIndex((function(e){return e.stock===t})))<0)){e.next=3;break}return e.abrupt("return");case 3:return i=this.holdingStocks[a],c=i.id,s=i.quantity+r,i.setQuantity(s),i.changeCost(n,r),this.cash&&(this.cash-=n*r),e.next=11,this.bookHolding(c,n,r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveHolding",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.yumi.Acts({holding:[{account:this.id,stock:t,everBought:1}]});case 2:return n=e.sent,e.abrupt("return",n.holding[0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bookHolding",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.recalc(),e.next=3,this.store.yumi.Acts({accountValue:[{id:this.id,miValue:this.miValue,market:this.market,count:this.count,cash:{value:this.cash,setAdd:"="}}],accountHolding:[{ix:this.id,xi:t}],portfolio:[{id:t,quantity:r,cost:n*r}],transaction:[{holding:t,tick:void 0,price:n,quantity:r,amount:n*r}]});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"bookSetCost",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.recalc(),e.next=3,this.store.yumi.Acts({accountValue:[{id:this.id,miValue:this.miValue,market:this.market,count:this.count}],portfolio:[{id:t,cost:{value:n,setAdd:"="}}]});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sellHolding",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=this.holdingStocks.find((function(e){return e.stock===t})))){e.next=3;break}return e.abrupt("return");case 3:return a.setQuantity(a.quantity-r),a.changeCost(-n,r),this.cash&&(this.cash+=n*r),e.next=8,this.bookHolding(a.id,n,-r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"changeCost",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=this.holdingStocks.find((function(e){return e.stock===t})))){e.next=3;break}return e.abrupt("return");case 3:return r.setCostPrice(n),e.next=6,this.bookSetCost(r.id,n*r.quantity);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addHoldingStock",value:function(e){this.holdingStocks&&(this.holdingStocks.push(e),this.recalc())}},{key:"removeHoldingStock",value:function(e){if(this.holdingStocks){var t=this.holdingStocks.findIndex((function(t){return t.stock===e}));t>=0&&(this.holdingStocks.splice(t,1),this.recalc())}}},{key:"recalc",value:function(){this.count=this.holdingStocks.length;var e,t=0,n=0,r=0,a=0,i=Object(y.a)(this.holdingStocks);try{for(i.s();!(e=i.n()).done;){var c=e.value,s=c.stockObj,o=c.market,u=c.divident,l=c.quantity;if(0!==c.everBought){var h=s.miRate,d=(null!==h&&void 0!==h?h:0)*o/100;c.miValue=d,t+=d,n+=o,r+=u,l>0&&++a}}}catch(f){i.e(f)}finally{i.f()}this.miValue=t,this.market=n,this.divident=r,this.buyableCount=this.portion-a}},{key:"cashAct",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.yumi.Acts({accountValue:[{id:this.id,cash:t}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cashInit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cashAct(t,"init");case 2:Object(D.r)((function(){"number"!==typeof n.cash&&(n.cash=t)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cashIn",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cashAct(t,"in");case 2:Object(D.r)((function(){n.cash?n.cash+=t:n.cash=t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cashOut",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cashAct(-t,"out");case 2:Object(D.r)((function(){n.cash-=t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cashAdjust",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cashAct(t,"adjust");case 2:Object(D.r)((function(){n.cash?n.cash+=t:n.cash=t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=function(){function e(t){Object(a.a)(this,e),this.store=void 0,this.accounts=null,Object(D.o)(this,{accounts:D.p,load:D.f}),this.store=t}return Object(r.a)(e,[{key:"load",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r,a,i,c,s,o,u,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.yumi,n=t.UserAccount,r=t.Account,a=t.AccountValue,i={IX:n,IDX:[r,a],ix:void 0},e.next=5,t.IX(i);case 5:if(0!==(c=e.sent).length){e.next=12;break}return s="\u6211\u7684\u6301\u4ed3\u7ec4\u5408",e.next=10,t.ActIX({IX:n,ID:r,values:[{ix:void 0,xi:{name:s}}]});case 10:o=e.sent,c.push({id:o[0],name:s});case 12:u=c.map((function(e){return new G(l.store,e)})),this.accounts=Object(D.p)(u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountsFromIds",value:function(e){for(var t=this,n=[],r=this.accounts.length,a=function(r){var a=t.accounts[r];e.findIndex((function(e){return e===a.id}))>=0&&n.push(a)},i=0;i<r;i++)a(i);return n}},{key:"addStockToAccount",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.store.yumi,!(a=n.holdingStocks)){e.next=6;break}if(!(a.findIndex((function(e){return e.stock===t.id}))>=0)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,r.ActIX({IX:r.AccountHolding,ID:r.Holding,values:[{ix:n.id,xi:{account:n.id,stock:t.id,everBought:0}}]});case 8:i=e.sent,(c=new U(i[0],t,0,0)).everBought=0,n.addHoldingStock(c);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeStockFromAccount",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.store.yumi,e.next=3,r.ActIX({IX:r.AccountHolding,values:[{ix:n.id,xi:-t.id}]});case 3:n.removeHoldingStock(t.id);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),K=function(){function e(t,n){Object(a.a)(this,e),this.store=void 0,this.id=void 0,this.name=null,this.count=null,this.stocks=null,this.groups=null,Object(D.o)(this,{stocks:D.p,count:D.p,name:D.p}),this.store=t,Object.assign(this,n)}return Object(r.a)(e,[{key:"loadItems",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r,a,i=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stocks){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.internalLoadItems();case 4:t=e.sent,n=Object(q.a)(t,2),r=n[0],a=n[1],Object(D.r)((function(){r&&(i.groups=Object(D.p)(r,{deep:!1})),i.stocks=Object(D.p)(a,{deep:!1}),i.count=i.stocks.length}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),z=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"type",get:function(){return"group"}},{key:"internalLoadItems",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.loadGroupStocks(this.id);case 2:return t=e.sent,e.abrupt("return",[void 0,t]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addStock",value:function(e,t){this.stocks&&(this.stocks.push(e),this.count=this.stocks.length+1)}},{key:"removeStock",value:function(e,t){if(this.stocks){var n=e.id,r=this.stocks.findIndex((function(e){return e.id===n}));r>=0&&this.stocks.splice(r,1)}}},{key:"exists",value:function(e){var t;return null===(t=this.stocks)||void 0===t?void 0:t.findIndex((function(t){return t.id===e}))}}]),n}(K),J=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"type",get:function(){return"industry"}},{key:"internalLoadItems",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.loadIndustryStocks(this.id);case 2:return t=e.sent,e.abrupt("return",[void 0,t]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(K),Q=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"type",get:function(){return"industry"}},{key:"internalLoadItems",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.loadRootIndustry(this.id);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(J),Y=function(){function e(t){Object(a.a)(this,e),this.store=void 0,this.groups=void 0,this.store=t,Object(D.o)(this,{groups:D.p})}return Object(r.a)(e,[{key:"groupsFromIds",value:function(e){for(var t=this,n=[],r=this.groups.length,a=function(r){var a=t.groups[r];e.findIndex((function(e){return e===a.id}))>=0&&n.push(a)},i=0;i<r;i++)a(i);return n}},{key:"calcStockCount",value:function(){}}]),e}(),Z=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"load",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.yumi,e.next=3,t.IX({IX:t.UserGroup,IDX:[t.Group],ix:void 0});case 3:n=e.sent,this.groups=n.map((function(e){return new z(r.store,e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calcStockCount",value:function(){var e=this;this.groups.forEach((function(t){var n=e.store.calcGroupStockCount(t.id);t.count=n}))}},{key:"addStockToGroup",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a,i,c,s,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.store.yumi,a=this.store,i=a.stocksMyAll,c=a.groupIXs,s=t.id,o=n.id,e.next=6,r.Acts({groupStock:[{ix:o,xi:s,order:void 0}],userAllStock:[{ix:void 0,xi:s}]});case 6:c.push({ix:o,xi:s}),i.findIndex((function(e){return e.id===s}))<0&&i.push(t),u=this.store.calcGroupStockCount(o),n.addStock(t,u);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeStockFromGroup",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a,i,c,s,o,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.store.yumi,a=t.id,i=n.id,e.next=5,r.Acts({groupStock:[{ix:i,xi:-a,order:void 0}]});case 5:c=this.store.groupIXs,s=0;case 7:if(!(s<c.length)){e.next=20;break}if(o=c[s],u=o.ix,o.xi===a){e.next=11;break}return e.abrupt("continue",17);case 11:if(u===i){e.next=13;break}return e.abrupt("continue",17);case 13:return c.splice(s,1),l=this.store.calcGroupStockCount(i),n.removeStock(t,l),e.abrupt("break",20);case 17:s++,e.next=7;break;case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Y),ee=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"load",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.yumi,e.next=3,t.ID({IDX:[t.Industry],id:void 0});case 3:n=e.sent,this.groups=n.map((function(e){return new J(r.store,e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Y),te=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"load",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.yumi,e.next=3,t.IX({IX:t.IXIndustry,IDX:[t.Industry],ix:0});case 3:n=e.sent,this.groups=n.map((function(e){return new Q(r.store,e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Y),ne={sz:Object(m.jsx)("small",{className:"text-danger",children:"[\u6df1]"}),sh:Object(m.jsx)("small",{className:"text-danger",children:"[\u6caa]"}),hk:Object(m.jsx)("small",{className:"text-warning",children:"[\u6e2f]"})},re=n(113),ae=function(){function e(t,n){Object(a.a)(this,e),this.myAllColl={},this.yumi=void 0,this.markets={},this.miAccounts=void 0,this.miGroups=void 0,this.industries=void 0,this.rootIndustries=void 0,this.stocksMyAll=null,this.stocksMyBlock=null,this.groupIXs=void 0,this.miNet=void 0,this.user=void 0,this.myAllCaption="\u81ea\u9009\u80a1",this.myBlockCaption="\u9ed1\u540d\u5355",this.user=n,this.miNet=new re.a(n),Object(D.o)(this,{myAllColl:D.p,stocksMyAll:D.p.shallow,stocksMyBlock:D.p.shallow}),this.yumi=t.BruceYuMi,this.miAccounts=new $(this),this.miGroups=new Z(this),this.industries=new ee(this),this.rootIndustries=new te(this)}return Object(r.a)(e,[{key:"minet",get:function(){return this.miNet}},{key:"stockFromId",value:function(e){return this.stocksMyAll.find((function(t){return t.id===e}))}},{key:"loadStock",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.ID({IDX:[this.yumi.Stock,this.yumi.StockValue],id:t});case 2:return n=e.sent,r=n[0],this.buildStockValues(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildStockValues",value:function(e){if(void 0!==e){var t=e.market;e.$market=this.markets[t]}}},{key:"searchStock",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a,i=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.SearchStock.page(t,n,r,!0);case 2:return a=e.sent,a.$page.forEach((function(e){return i.buildStockValues(e)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"isMyAll",value:function(e){return!0===this.myAllColl[e.id]}},{key:"addMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.yumi.ActIX({IX:this.yumi.UserAllStock,values:[{ix:void 0,xi:t.id}]});case 4:n=t.id,this.stocksMyAll.findIndex((function(e){return e.id===n}))<0&&this.stocksMyAll.push(t),this.myAllColl[n]=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a,i,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.id,e.next=5,this.yumi.StockUsing.query({stock:n});case 5:if(r=e.sent,a=r.groups,i=r.accounts,!(a.length>0||i.length>0)){e.next=11;break}return c=this.miAccounts.accountsFromIds(i.map((function(e){return e.account}))),s=this.miGroups.groupsFromIds(a.map((function(e){return e.group}))),e.abrupt("return",{miAccounts:c,miGroups:s});case 11:return e.next=13,this.yumi.ActIX({IX:this.yumi.UserAllStock,values:[{ix:void 0,xi:-n}]});case 13:(o=this.stocksMyAll.findIndex((function(e){return e.id===n})))>=0&&this.stocksMyAll.splice(o,1),delete this.myAllColl[n];case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.IX({IX:this.yumi.UserAllStock,IDX:[this.yumi.Stock,this.yumi.StockValue],ix:void 0});case 2:(t=e.sent).forEach((function(e){n.buildStockValues(e),n.myAllColl[e.id]=!0})),this.stocksMyAll=Object(D.p)(t,{deep:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMyBlock",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stocksMyBlock){e.next=2;break}return e.abrupt("return");case 2:return t=this.yumi,e.next=5,t.IX({IX:t.UserBlockStock,IDX:[t.Stock,t.StockValue],ix:void 0});case 5:(n=e.sent).forEach((function(e){return r.buildStockValues(e)})),this.stocksMyBlock=Object(D.p)(n,{deep:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGroupStocks",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a,i,c,s,o=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r=[],this.groupIXs.forEach((function(e){var a=e.ix,i=e.xi;if(a===t){var c=o.stocksMyAll.find((function(e){return e.id===i}));c?r.push(c):n.push(i)}})),!(n.length>0)){e.next=9;break}return e.next=6,this.yumi.ID({IDX:[this.yumi.Stock,this.yumi.StockValue],id:n});case 6:a=e.sent,i=Object(y.a)(a);try{for(i.s();!(c=i.n()).done;)s=c.value,this.buildStockValues(s),this.stocksMyAll.push(s),r.push(s)}catch(u){i.e(u)}finally{i.f()}case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadIndustryStocks",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.IX({IX:this.yumi.GroupStock,IDX:[this.yumi.Stock,this.yumi.StockValue],ix:t});case 2:return(n=e.sent).forEach((function(e){return r.buildStockValues(e)})),n.sort(W),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadRootIndustry",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a,i,c,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.yumi.IX({IX:this.yumi.IXIndustry,IDX:[this.yumi.Industry],ix:t}),this.yumi.IX({IX:this.yumi.IXIndustry,IX1:this.yumi.GroupStock,IDX:[this.yumi.Stock,this.yumi.StockValue],ix:t})]);case 2:return n=e.sent,r=Object(q.a)(n,2),a=r[0],(i=r[1]).forEach((function(e){return s.buildStockValues(e)})),i.sort(W),c=a.map((function(e){return new J(s,e)})),e.abrupt("return",[c,i]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,r,a,i,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.yumi,e.next=3,t.ID({IDX:[t.Market],id:void 0});case 3:n=e.sent,r=Object(y.a)(n);try{for(r.s();!(a=r.n()).done;)i=a.value,c=i.id,s=i.name,this.markets[c]=Object(B.a)(Object(B.a)({},i),{},{el:ne[s]})}catch(o){r.e(o)}finally{r.f()}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isMyBlock",value:function(e){return this.stocksMyBlock.findIndex((function(t){return t.id===e.id}))>=0}},{key:"toggleBlock",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadMyBlock();case 4:if(n=t.id,!((r=this.stocksMyBlock.findIndex((function(e){return e.id===n})))>=0)){e.next=12;break}return e.next=9,this.yumi.ActIX({IX:this.yumi.UserBlockStock,values:[{ix:void 0,xi:-n}]});case 9:this.stocksMyBlock.splice(r,1),e.next=15;break;case 12:return e.next=14,this.yumi.ActIX({IX:this.yumi.UserBlockStock,values:[{ix:void 0,xi:n}]});case 14:this.stocksMyBlock.push(t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,Promise.all([this.miAccounts.load(),this.loadMyAll(),this.loadGroupIXs(),this.miGroups.load(),this.industries.load(),this.rootIndustries.load()]);case 4:this.miGroups.calcStockCount();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGroupIXs",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.yumi,e.next=3,t.IX({IX:t.UserGroup,IX1:t.GroupStock,ix:void 0});case 3:n=e.sent,this.groupIXs=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stockInNGroup",value:function(e){for(var t=0,n=this.groupIXs,r=e.id,a=0;a<n.length;a++){n[a].xi===r&&++t}return t}},{key:"calcGroupStockCount",value:function(e){if(this.groupIXs){var t,n=0,r=Object(y.a)(this.groupIXs);try{for(r.s();!(t=r.n()).done;){t.value.ix===e&&++n}}catch(a){r.e(a)}finally{r.f()}return n}}},{key:"inAnyGroup",value:function(e){var t,n={},r=Object(y.a)(this.groupIXs);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.ix;a.xi===e&&(n[i]=!0)}}catch(c){r.e(c)}finally{r.f()}return n}},{key:"inAnyAccount",value:function(e){var t={};return this.miAccounts.accounts.forEach((function(n){var r=n.holdingStocks;if(r)for(var a=r.length,i=0;i<a;i++){var c=r[i];if(c.stock===e){t[n.id]=[!0,c.everBought>0];break}}})),t}},{key:"loadStockInAccounts",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a,i,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.QueryID({IX:[this.yumi.UserAccount,this.yumi.AccountHolding],IDX:[this.yumi.Holding],ix:void 0,keyx:{account:void 0,stock:t}});case 2:n=e.sent,r={},a=Object(y.a)(n);try{for(a.s();!(i=a.n()).done;)c=i.value,s=c.account,o=c.everBought,r[s]=[!0,o>0]}catch(u){a.e(u)}finally{a.f()}return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNextTradedays",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miNet.q_getnexttradedays(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchTrackStock",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a,i,c,s,o,u,l,h=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=t).day,c=a.key,s=a.market,o=a.$orderSwitch,u=a.smooth,e.next=3,this.miNet.q_searchstock(i,this.user.id,n,r,o,c,s,u);case 3:return l=e.sent,l.$page.forEach((function(e){return h.buildStockValues(e)})),e.abrupt("return",l);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),ie=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u9996\u9875"}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller.cAccount,n=Object(m.jsx)(s.FA,{name:"envelope-o",className:"text-info align-self-center ml-2 ml-sm-3",size:"lg",fixWidth:!0});return Object(m.jsxs)("div",{className:"pb-3",children:[Object(m.jsx)(s.LMR,{className:"d-flex pr-3 py-2 my-2 cursor-pointer bg-white",left:n,onClick:e.controller.showBlogs,children:Object(m.jsx)("div",{className:"px-2 px-sm-3",children:"\u7c73\u6295\u535a\u5ba2"})}),t.renderAccounts()]})})))}},{key:"right",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=[{caption:"\u7ba1\u7406\u6301\u4ed3\u8d26\u6237",action:e.controller.cApp.cCommon.manageAccounts,icon:"money"}];return Object(m.jsx)(s.DropdownActions,{actions:t,icon:"bars",className:"mr-2 text-white bg-transparent border-0"})})))}}]),n}(s.VPage),ce=n(205),se=n(25),oe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).actionsElement=void 0,e.renderPageRight=void 0,e.renderHolding=function(t,n){var r,a,i,c=e.controller,o=c.showHolding,u=c.showBuy,l=c.showSell,h=c.showChangeCost,d=c.showTransactionDetail,f=c.miAccount,p=f.portionAmount,v=f.cash,b=t.stockObj,j=t.quantity,y=t.market,O=t.cost,k=b.name,x=b.no;j<1?((r=-O)>=-.01&&r<=.01&&(r=0),a=0,i=0):(r=y-O,a=O<.1?999:100*r/O,i=O/j),r>=-.01&&r<=.01&&(r=0,a=0);var g,w,I=b.miRate,C=b.price;if(g=r<0?"text-success":r>0?"text-danger":"",v){var S=(p-y)/C,N=!1;S<0&&(N=!0,S=-S),S=S<10?Math.round(S):S<100?10*Math.round(S/10):100*Math.round(S/100),y<.9*p?j>0&&!1===N&&(w=Object(m.jsxs)("span",{className:"text-warning",children:[S," ",Object(m.jsx)(s.FA,{name:"plus-square-o"})]})):y>1.1*p?!0===N&&(w=Object(m.jsxs)("span",{className:"text-muted",children:[S," ",Object(m.jsx)(s.FA,{name:"minus-square-o"})]})):w=Object(m.jsx)(s.FA,{name:"check-circle-o",className:"text-warning"})}return Object(m.jsxs)("div",{className:"d-block px-2 px-sm-3 py-1 container",children:[Object(m.jsxs)("div",{className:"row mx-0 cursor-pointer "+g,onClick:function(t){e.actionsElement&&(e.actionsElement.className="d-none");var n=t.currentTarget.nextSibling;n!==e.actionsElement?(e.actionsElement=n,e.actionsElement.className="d-block",Object(ce.a)(e.actionsElement,{scrollMode:"if-needed",behavior:"smooth"})):e.actionsElement=void 0},children:[Object(m.jsxs)("div",{className:"col-3 px-0",children:[Object(m.jsx)("div",{children:k}),Object(m.jsx)("div",{children:x})]}),Object(m.jsxs)("div",{className:"col px-0 text-right",children:[Object(m.jsx)("div",{children:e.fString(j,se.b)}),Object(m.jsx)("div",{className:"small",children:e.fString(y,se.c)})]}),Object(m.jsx)("div",{className:"col px-0 text-right",children:e.fString(I,se.c,se.h)}),Object(m.jsxs)("div",{className:"col px-0 text-right",children:[Object(m.jsx)("div",{className:"",children:e.fString(C,se.d)}),Object(m.jsx)("div",{className:"small",children:e.fString(i,se.d)})]}),Object(m.jsxs)("div",{className:"col px-0 text-right",children:[Object(m.jsx)("div",{className:"",children:e.fString(a,se.c,se.h)}),Object(m.jsx)("div",{className:"small",children:e.fString(r,se.c)})]})]}),Object(m.jsx)("div",{className:"d-none",children:Object(m.jsxs)("div",{className:"row mt-2 mx-0 pt-2 pb-1 align-items-center border-top",onClick:function(){return e.hideActionsElement()},children:[Object(m.jsxs)("div",{className:"col-sm-3 col-auto px-0",children:[Object(m.jsx)("button",{className:"btn btn-sm btn-outline-info mr-1 mr-sm-3 ",onClick:function(){return u(t)},children:"\u4e70\u5165"}),Object(m.jsx)("button",{className:"btn btn-sm btn-outline-info mr-1 mr-sm-3 ",onClick:function(){return l(t)},children:"\u5356\u51fa"})]}),Object(m.jsx)("div",{className:"col-sm col-auto px-0 text-right ml-auto ",children:w}),Object(m.jsx)("div",{className:"col-sm col-auto px-0 text-right ml-sm-0 ml-3",children:Object(m.jsx)("button",{className:"btn btn-sm btn-link",onClick:function(){return o(t)},children:"\u5206\u6790"})}),Object(m.jsx)("div",{className:"col-sm col-auto px-0 text-right",children:Object(m.jsx)("button",{className:"btn btn-sm btn-link",onClick:function(){return h(t)},children:"\u6539\u6210\u672c"})}),Object(m.jsx)("div",{className:"col-sm col-auto px-0 text-right",children:Object(m.jsx)("button",{className:"btn btn-sm btn-link",onClick:function(){return d(t)},children:"\u660e\u7ec6"})})]})})]})},e}return Object(r.a)(n,[{key:"init",value:function(e){var t=e.renderPageRight;this.renderPageRight=t}},{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)(m.Fragment,{children:e.controller.miAccount.name})})))}},{key:"right",value:function(){var e;return null===(e=this.renderPageRight)||void 0===e?void 0:e.call(this)}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return!0===isNaN(e)?Object(m.jsx)(m.Fragment,{children:"-"}):Object(m.jsxs)(m.Fragment,{children:[(null!==e&&void 0!==e?e:0).toLocaleString(void 0,se.c),t]})}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(m.jsxs)("div",{className:"my-1 mx-1 mx-sm-2 border rounded w-min-5c px-1 px-sm-2 py-2 "+n,children:[Object(m.jsx)("small",{className:"text-muted",children:e}),Object(m.jsx)("div",{children:t})]})}var r,a,i=e.controller,c=i.miAccount,o=i.showBuy,u=i.showCashIn,l=i.showCashOut,h=i.showCashAdjust,d=c.no,f=c.name,p=c.miValue,v=c.market,b=c.cash,j=c.holdingStocks,y=c.portion,O=c.portionAmount,k=c.buyableCount;if(j){r=[],a=[];for(var x=j.length,g=0;g<x;g++){var w=j[g];0===w.quantity?a.push(w):r.push(w)}}var I,C=[{caption:"\u8c03\u5165\u8d44\u91d1",action:u,icon:"sign-in"},{caption:"\u8c03\u51fa\u8d44\u91d1",action:l,icon:"sign-out"},{caption:"\u8c03\u6574\u8d44\u91d1",action:h,icon:"adjust"}];return Object(m.jsxs)("div",{className:"pb-3",children:[Object(m.jsxs)("div",{className:"mb-3 px-3 py-2 bg-white",children:[Object(m.jsx)(s.LMR,{right:Object(m.jsxs)("small",{className:"text-muted",children:["\u7ec4\u5408\u7f16\u53f7: ",d]}),children:f}),Object(m.jsxs)("div",{className:"my-3 text-center d-flex justify-content-center flex-wrap",children:[n("\u7c73\u606f\u7387",t(100*p/v,se.h)),n("\u5e02\u503c",t(v)),(I=b,"number"===typeof I?n("\u73b0\u91d1",t(I)):Object(m.jsxs)("div",{className:"my-1 mx-1 mx-sm-2 border rounded w-min-5c px-1 px-sm-2 py-2",children:[Object(m.jsx)("small",{className:"text-muted",children:"\u73b0\u91d1"}),Object(m.jsx)("div",{className:"text-danger small mt-1",children:"[\u65e0]"})]})),n("\u7c73\u606f",t(p),"d-none d-sm-block"),b>0&&n("\u603b\u503c",t(v+b),"d-none d-sm-block")]}),Object(m.jsx)("ul",{className:"small text-muted mb-0",children:b?O&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("small",{className:"",children:"\u4efd\u6570:"})," ",y," \xa0",Object(m.jsx)("small",{className:"",children:"\u4efd\u989d:"})," ",Object(m.jsx)("span",{className:"text-danger",children:O})," \xa0",k>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("small",{className:"",children:"\u53ef\u52a0"}),k,"\u53ea"]}):Object(m.jsxs)("span",{className:"text-danger",children:[" \xa0 \u5df2\u8d85",-k,"\u53ea"]})]}),Object(m.jsx)("li",{className:"",children:Object(m.jsx)("small",{className:"text-info",children:"\u4fdd\u6301\u5206\u6563\uff0c\u5355\u53ea\u80a1\u7968\u4e0d\u8d85\u8d44\u91d1\u4efd\u989d"})})]}):Object(m.jsx)("li",{className:"",children:"\u8bbe\u7f6e\u8d44\u91d1\u540e\uff0c\u4f1a\u6839\u636e\u5206\u6563\u8981\u6c42\uff0c\u63d0\u4f9b\u80a1\u6570\u5efa\u8bae"})})]}),Object(m.jsxs)("div",{className:"mb-3 mx-3 d-flex",children:[Object(m.jsx)("button",{className:"btn btn-outline-primary mr-3",onClick:function(){return o()},children:"\u4e70\u80a1"}),"number"===typeof b?Object(m.jsx)(s.DropdownActions,{className:"btn btn-outline-warning",containerClass:"ml-auto",actions:C,icon:"money",content:"\u8d44\u91d1"}):Object(m.jsxs)("button",{className:"btn btn-outline-info ml-auto",onClick:e.controller.showCashInit,children:[Object(m.jsx)(s.FA,{name:"cog",className:"small text-info"})," \u521d\u59cb\u8d44\u91d1"]})]}),Object(m.jsx)("div",{className:"px-2 px-sm-3 py-1 container",children:Object(m.jsxs)("div",{className:"small text-muted row mx-0",children:[Object(m.jsx)("div",{className:"col-3 px-0",children:"\u6301\u4ed3\u5e02\u503c"}),Object(m.jsx)("div",{className:"col px-0 text-right",children:"\u6301\u4ed3"}),Object(m.jsx)("div",{className:"col px-0 text-right",children:"\u7c73\u606f\u7387"}),Object(m.jsxs)("div",{className:"col px-0 text-right",children:["\u5e02\u4ef7",Object(m.jsx)("br",{}),"\u6210\u672c"]}),Object(m.jsxs)("div",{className:"col px-0 text-right",children:["\u76c8\u4e8f",Object(m.jsx)("br",{}),"\u6bd4\u4f8b"]})]})}),Object(m.jsx)(s.List,{items:r,item:{render:e.renderHolding}}),a&&a.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"small text-muted px-3 py-1 mt-3",children:"\u7a7a\u4ed3"}),Object(m.jsx)(s.List,{items:a,item:{render:e.renderHolding}})]})]})})))}},{key:"fString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null===e||void 0===e||!0===isNaN(e)?"-":Object(m.jsxs)(m.Fragment,{children:[e.toLocaleString(void 0,t),n]})}},{key:"hideActionsElement",value:function(){this.actionsElement&&(this.actionsElement.className="d-none",this.actionsElement=void 0)}},{key:"renderValue",value:function(e,t,n,r,a){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"text-right pl-2 d-block d-sm-none",children:[Object(m.jsxs)("div",{className:"d-inline-block small text-muted",children:[e,":\xa0"]}),Object(m.jsxs)("div",{className:"d-inline-block w-min-6c",children:[null===t||void 0===t?void 0:t.toLocaleString(void 0,n),r]})]}),Object(m.jsxs)("div",{className:"text-right pl-3 d-sm-block d-none "+a,children:[Object(m.jsx)("div",{className:"small text-muted",children:e}),Object(m.jsxs)("div",{children:[null===t||void 0===t?void 0:t.toLocaleString(void 0,n),r]})]})]})}}]),n}(s.VPage),ue=n(23),le=n(20),he=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).form=void 0,e.schema=[e.valueSchema,{name:"submit",type:"submit"}],e.uiSchema={items:{value:{widget:"number",min:0,step:1,label:e.valueLabel,placeholder:e.placeholder,rules:function(t){return e.onCheckValue(t)}},submit:{widget:"button",className:"btn btn-primary w-25",label:"\u63d0\u4ea4",disabled:!1}}},e.onFormSubmit=function(){var t=Object(f.a)(d.a.mark((function t(n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setDisabled(n,!0),t.next=3,e.onSubmit(r.data);case 3:r.setDisabled(n,!1),e.closePage();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"back",get:function(){return"close"}},{key:"onCheckValue",value:function(e){}},{key:"valueLabel",get:function(){return"\u80a1\u7968\u6570\u91cf"}},{key:"placeholder",get:function(){return"\u80a1\u7968\u6570\u91cf"}},{key:"valueSchema",get:function(){return{name:"value",type:"integer",min:0,required:!0}}},{key:"renderStock",value:function(){var e=this.controller.holdingStock;if(!e)return null;var t=e.stockObj,n=e.quantity,r=e.miValue,a=e.market,i=t.name,c=t.no;return Object(m.jsxs)("div",{className:"py-2",children:[Object(m.jsxs)("div",{className:"mr-auto px-3 mb-2",children:[Object(m.jsx)("b",{children:i})," ",Object(m.jsx)("span",{className:"ml-2 small text-muted",children:c})]}),Object(m.jsxs)("div",{className:"d-flex my-2 py-2 border-top border-bottom justify-content-center text-center bg-white",children:[this.renderQuantity("\u80a1\u6570",n),this.renderValue("\u7c73\u606f",r,2),this.renderValue("\u5e02\u503c",a,2)]})]})}},{key:"renderValue",value:function(e,t){return Object(m.jsxs)("div",{className:"mx-1 border rounded w-min-5c px-1 py-2",children:[Object(m.jsx)("small",{className:"text-muted",children:e}),Object(m.jsx)("div",{children:Object(se.a)(null!==t&&void 0!==t?t:0)})]})}},{key:"renderQuantity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.renderValue(e,t,n)}},{key:"beforeRender",value:function(){}},{key:"renderForm",value:function(){var e=this;return this.beforeRender(),Object(m.jsx)(s.Form,{ref:function(t){return e.form=t},className:"mx-3",onButtonClick:this.onFormSubmit,onEnter:this.onFormSubmit,fieldLabelSize:3,fieldLabelAlign:"right",schema:this.schema,uiSchema:this.uiSchema})}},{key:"renderFormTop",value:function(){return null}},{key:"content",value:function(){return Object(m.jsxs)("div",{className:"my-3",children:[this.renderStock(),this.renderFormTop(),this.renderForm()]})}}]),n}(s.VPage),de=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"beforeRender",value:function(){var e;Object(ue.a)(Object(le.a)(n.prototype),"beforeRender",this).call(this),this.schema.unshift({name:"price",type:"number",min:0,required:!0}),this.uiSchema.items.price={widget:"number",min:0,step:1,label:"\u4ef7\u683c",placeholder:"\u80a1\u7968\u4ef7\u683c",defaultValue:null===(e=this.controller.holdingStock)||void 0===e?void 0:e.stockObj.price}}}]),n}(he),fe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).checkCash=function(t){var n=e.controller,r=n.holdingStock,a=n.miAccount.cash;if("number"===typeof a){var i=(null===r||void 0===r?void 0:r.stockObj)||e.controller.stock;return t.data.value*i.price>a?"\u8d85\u8fc7\u8d26\u6237\u8d44\u91d1\u4f59\u989d\uff0c\u65e0\u6cd5\u4e70\u5165":void 0}},e}return Object(r.a)(n,[{key:"beforeRender",value:function(){Object(ue.a)(Object(le.a)(n.prototype),"beforeRender",this).call(this),this.uiSchema.rules=[this.checkCash]}},{key:"renderFormTop",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t,n=e.controller,r=n.miAccount,a=n.holdingStock,i=n.stock,c=r.portionAmount;if("number"!==typeof r.cash)return null;if(!c)return null;if(i||a){i||(i=a.stockObj);var o,u=i.price;a?(o=c/u-a.quantity)<0&&(o=0):o=c/u,t=0===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.FA,{name:"times-circle-o mr-1 text-danger"}),"\u6bcf\u4efd\u91d1\u989d",c,"\uff0c\u5df2\u8d85\u5355\u53ea\u80a1\u7968\u4efd\u989d\uff0c\u5efa\u8bae\u4e0d\u8981\u8d2d\u4e70"]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.FA,{name:"check-circle-o mr-1 text-warning"}),"\u6bcf\u4efd\u91d1\u989d",c,"\uff0c\u5efa\u8bae\u4e0d\u8d85\u8fc7\uff1a",Math.round(o)," \u80a1"]})}else t=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.FA,{name:"bell-o mr-1 text-warning"}),"\u5efa\u8bae\u4e0d\u8d85\u8fc7\u6bcf\u4efd\u91d1\u989d",c]});return Object(m.jsx)("div",{className:"pb-3 px-3 text-center small text-muted",children:t})})))}}]),n}(de),pe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderStockPick=function(e){var t=e.name,n=e.no;return Object(m.jsxs)(m.Fragment,{children:[t," ",Object(m.jsx)("small",{className:"text-muted",children:n})]})},e}return Object(r.a)(n,[{key:"header",value:function(){return"\u65b0\u4e70\u80a1\u7968"}},{key:"beforeRender",value:function(){Object(ue.a)(Object(le.a)(n.prototype),"beforeRender",this).call(this),this.schema.unshift({name:"stock",type:"id",required:!0}),this.uiSchema.items.stock={widget:"id",label:"\u80a1\u7968",pickId:this.controller.createPickStockId(),placeholder:"\u8bf7\u9009\u62e9\u80a1\u7968",Templet:this.renderStockPick}}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stock,r=t.price,a=t.value,e.next=3,this.controller.submitBuyNew(n.id,r,a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fe),ve=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u52a0\u4e70\u80a1\u7968"}},{key:"placeholder",get:function(){return"\u52a0\u4e70\u6570\u91cf"}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.price,r=t.value,e.next=3,this.controller.submitBuy(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fe),be=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onClickQuantity=function(){e.form.formContext.setValue("value",e.controller.holdingStock.quantity)},e}return Object(r.a)(n,[{key:"header",value:function(){return"\u5356\u51fa\u80a1\u7968"}},{key:"placeholder",get:function(){return"\u5356\u51fa\u6570\u91cf"}},{key:"onCheckValue",value:function(e){var t=this.controller.holdingStock.quantity;if(e>t)return"\u73b0\u6709\u6301\u80a1".concat(t,"\uff0c\u5356\u51fa\u6570\u91cf\u8d85\u51fa")}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.price,r=t.value,e.next=3,this.controller.submitSell(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderQuantity",value:function(e,t){return Object(m.jsxs)("div",{className:"mx-1 border border-info rounded w-min-5c px-1 py-2 cursor-pointer",onClick:this.onClickQuantity,children:[Object(m.jsx)("small",{className:"text-muted",children:e}),Object(m.jsx)("div",{children:Object(se.a)(null!==t&&void 0!==t?t:0)})]})}}]),n}(de),me=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u4fee\u6539\u6210\u672c"}},{key:"valueLabel",get:function(){return"\u65b0\u6210\u672c"}},{key:"placeholder",get:function(){return"\u65b0\u80a1\u7968\u6210\u672c"}},{key:"valueSchema",get:function(){return{name:"value",type:"number",min:.01,required:!0}}},{key:"beforeRender",value:function(){var e=this.controller.holdingStock;if(e){var t=e.cost,n=e.quantity,r=this.uiSchema.items.value;r.min=.01,r.step=.01;var a=t/n;r.defaultValue=a.toFixed(2)}}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,this.controller.submitChangeCost(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(he),je=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"valueLabel",get:function(){return"\u8d44\u91d1\u6570\u91cf"}},{key:"renderStock",value:function(){return null}}]),n}(he),ye=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u671f\u521d\u8d44\u91d1"}},{key:"placeholder",get:function(){return"\u671f\u521d\u91d1\u989d"}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,this.controller.submitCashInit(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(je),Oe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u8c03\u5165\u8d44\u91d1"}},{key:"placeholder",get:function(){return"\u8c03\u5165\u91d1\u989d"}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,this.controller.submitCashIn(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(je),ke=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u8c03\u51fa\u8d44\u91d1"}},{key:"placeholder",get:function(){return"\u8c03\u51fa\u91d1\u989d"}},{key:"onCheckValue",value:function(e){var t=this.controller.miAccount.cash;if(e>t)return"\u8c03\u51fa\u91d1\u989d\u4e0d\u80fd\u8d85\u8fc7\u603b\u73b0\u91d1".concat(t)}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,this.controller.submitCashOut(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(je),xe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u8c03\u6574\u8d44\u91d1"}},{key:"beforeRender",value:function(){this.schema[0].min=void 0}},{key:"placeholder",get:function(){return"\u8c03\u6574\u91d1\u989d"}},{key:"onCheckValue",value:function(e){var t=this.controller.miAccount.cash;if(e<0&&-e>t)return"\u8d1f\u5411\u8c03\u6574\u91d1\u989d\u4e0d\u80fd\u8d85\u8fc7\u603b\u73b0\u91d1".concat(t)}},{key:"onSubmit",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,this.controller.submitCashAdjust(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(je),ge=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onClickAccount=function(t){e.controller.showAccount(t)},e.renderAccount=function(e,t){function n(e,t){return Object(m.jsxs)(m.Fragment,{children:[(null!==e&&void 0!==e?e:0).toLocaleString(void 0,se.c),t]})}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(m.jsxs)("div",{className:"pr-3 "+n,children:[Object(m.jsxs)("small",{className:"text-muted",children:[e,": "]}),t]})}var a=e.name,i=e.miValue,c=e.market,o=e.count,u=c>1?100*i/c:0,l=Object(m.jsx)(s.FA,{name:"money",className:"text-warning align-self-start mt-3 ml-2 ml-sm-3",size:"lg",fixWidth:!0}),h=Object(m.jsx)("div",{className:"px-2 d-flex align-items-center",children:Object(m.jsx)(s.FA,{className:"align-",name:"angle-right"})});return Object(m.jsx)(s.LMR,{left:l,right:h,children:Object(m.jsx)("div",{className:"px-2 px-sm-3 py-2 bg-white d-block",children:o>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[a,Object(m.jsx)("small",{className:"ml-3 text-danger",children:o})]}),Object(m.jsxs)("div",{className:"mt-2 d-flex",children:[r("\u7c73\u606f\u7387",n(u,se.h),"w-min-8c"),r("\u7c73\u606f",n(i),"d-none d-sm-block w-min-8c"),r("\u5e02\u503c",n(c))]})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"py-1",children:a})})})})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t,n=e.controller.cApp.store.miAccounts;return Object(m.jsxs)(m.Fragment,{children:[(t="\u6301\u4ed3",Object(m.jsx)("div",{className:"small text-muted pt-2 pb-1 px-3",children:t})),Object(m.jsx)(s.List,{items:n.accounts,item:{render:e.renderAccount,onClick:e.onClickAccount}})]})})))}}]),n}(s.View),we=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderStock=function(e,t){return Object(m.jsx)("div",{className:"px-3 py-2",children:Object(se.f)(e)})},e.onClickStock=function(t){e.returnCall(t),e.closePage()},e}return Object(r.a)(n,[{key:"header",value:function(){return"\u9009\u62e9\u80a1\u7968"}},{key:"right",value:function(){return Object(m.jsx)(s.SearchBox,{className:"mr-2",onSearch:this.controller.onSearchStock,placeholder:"\u80a1\u7968\u540d\u79f0\u6216\u4ee3\u7801"})}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)("div",{children:Object(m.jsx)(s.List,{items:e.controller.stocks,item:{render:e.renderStock,onClick:e.onClickStock}})})})))}}]),n}(s.VPage),Ie=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).miGroup=null,r.stocks=void 0,r.stock=void 0,r.miAccount=null,r.holdingStock=void 0,r.listCaption=void 0,r.showAccount=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.miAccount=t,n=function(){return r.cApp.cCommon.buildCIDUserAccount().renderViewRight(t)},r.openVPage(oe,{renderPageRight:n}),e.next=5,t.loadItems();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showHolding=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.stockObj,r.cApp.cCommon.showStock(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onSearchStock=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.cApp.store.searchStock({key:t},void 0,50);case 2:n=e.sent,a=n.$page,r.stocks=Object(D.p)(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showBuy=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(r.holdingStock=t,r.openVPage(ve)):(r.holdingStock=void 0,r.openVPage(pe));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.submitBuyNew=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.buyNewHolding(t,n,a);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.submitBuy=function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.buyHolding(r.holdingStock.stock,t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.showSell=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.holdingStock=t,r.openVPage(be);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.submitSell=function(){var e=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.sellHolding(r.holdingStock.stock,t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.showChangeCost=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.holdingStock=t,r.openVPage(me);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.submitChangeCost=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.changeCost(r.holdingStock.stock,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showCashInit=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.openVPage(ye);case 1:case"end":return e.stop()}}),e)}))),r.submitCashInit=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.cashInit(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showCashIn=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.openVPage(Oe);case 1:case"end":return e.stop()}}),e)}))),r.submitCashIn=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.cashIn(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showCashOut=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.openVPage(ke);case 1:case"end":return e.stop()}}),e)}))),r.submitCashOut=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.cashOut(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showCashAdjust=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.openVPage(xe);case 1:case"end":return e.stop()}}),e)}))),r.submitCashAdjust=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.miAccount.cashAdjust(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showTransactionDetail=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("detail");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(D.o)(Object(_.a)(r),{miGroup:D.p,miAccount:D.p,stocks:D.p,stock:D.p}),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAccounts",value:function(){return this.renderView(ge)}},{key:"createPickStockId",value:function(){var e=this;return function(){var t=Object(f.a)(d.a.mark((function t(n,r,a){var i,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stocks=e.cApp.store.stocksMyAll,t.next=3,e.pickStock();case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.cApp.store.loadStock(i.id);case 8:return c=t.sent,e.stock=c,c&&n.setValue("price",String(c.price)),t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}},{key:"pickStock",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.vCall(we));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(u),Ce=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderBlog=function(e,t){var n=e.caption,r=e.$create,a=Object(m.jsx)("small",{className:"text-muted",children:Object(m.jsx)(s.EasyTime,{date:r})});return Object(m.jsx)(s.LMR,{className:"px-3 py-2",right:a,children:n})},e.onClickBlog=function(t){e.controller.onClickBlog(t)},e}return Object(r.a)(n,[{key:"header",value:function(){return"\u7c73\u6295\u535a\u5ba2"}},{key:"content",value:function(){var e=Object(m.jsx)("small",{className:"text-muted align-self-center",children:Object(m.jsx)(s.EasyTime,{date:new Date(2021,1,1,12,0,0)})});return Object(m.jsxs)("div",{className:"pb-3",children:[Object(m.jsx)(s.LMR,{className:"d-flex px-3 py-2 mt-1 mb-3 cursor-pointer bg-white",onClick:this.controller.cApp.cMe.showAbout,right:e,children:Object(m.jsx)("div",{className:"",children:"\u5173\u4e8e\u672cAPP"})}),Object(m.jsx)(s.List,{items:this.controller.blogs,item:{render:this.renderBlog,onClick:this.onClickBlog}})]})}}]),n}(s.VPage),Se=n(203),Ne=n.n(Se),Ae=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return this.controller.blog.caption}},{key:"content",value:function(){var e=this.controller.blog.content;return Object(m.jsx)("div",{className:"p-4 bg-white",children:Object(m.jsx)("div",{dangerouslySetInnerHTML:{__html:Ne()(e)}})})}}]),n}(s.VPage),_e=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cAccount=void 0,r.stocks=null,r.listCaption=null,r.blogs=void 0,r.blog=void 0,r.tab=function(){return r.renderView(ie)},r.onStockClick=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.cApp.cCommon.showStock(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showBlogs=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.blogs=new De(r.uqs.BruceYuMi),r.openVPage(Ce),e.next=4,r.blogs.first(void 0);case 4:case"end":return e.stop()}}),e)}))),r.showIntroduction=function(){r.cApp.cMe.showFaq()},Object(D.o)(Object(_.a)(r),{stocks:D.p.ref,listCaption:D.p}),r.cAccount=r.newSub(Ie),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(ie);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickBlog",value:function(e){this.blog=e,this.openVPage(Ae)}}]),n}(o),De=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,!1)).yumi=void 0,r.yumi=e,r.firstSize=30,r.pageSize=10,r}return Object(r.a)(n,[{key:"getPageId",value:function(e){return null===e||void 0===e?void 0:e.id}},{key:"loadResults",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.yumi.ID({IDX:this.yumi.Blog,id:void 0,order:"desc",page:{start:n,size:r}});case 2:return a=e.sent,e.abrupt("return",{$page:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(s.PageItems),Pe=n(204),Te=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,!1)).store=void 0,r.store=e,r.firstSize=50,r.pageSize=20,r}return Object(r.a)(n,[{key:"getPageId",value:function(e){return null===e||void 0===e?void 0:e.$order}},{key:"loadResults",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.searchStock(Object(B.a)(Object(B.a)({},t),{},{smooth:t.smooth+1}),n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(s.PageItems),Re=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"\u53d1\u73b0"}},{key:"content",value:function(){var e=this.controller,t=e.showA,n=e.showHK,r=e.showSH,a=e.showSZ,i=e.showBJ,c=e.showUS,o=e.showAll,u=e.cGroup,l=e.cIndustries,h=[["A\u80a1",t],["\u6e2f\u80a1",n],["\u6caaA",r],["\u6df1A",a],["\u4eacA",i],["US",c],["\u5168\u90e8",o]];return Object(m.jsxs)("div",{className:"bg-light",children:[Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(s.SearchBox,{className:"mb-0",onSearch:this.controller.onSearch,placeholder:"\u80a1\u7968\u4ee3\u7801\uff0c\u540d\u79f0"})}),Object(m.jsx)("div",{className:"p-2 mb-2 d-flex flex-wrap bg-white border-top border-bottom",children:h.map((function(e){var t=Object(q.a)(e,2);return function(e,t){return Object(m.jsx)("button",{className:"btn btn-outline-info m-1",onClick:t,children:e},e)}(t[0],t[1])}))}),Object(m.jsx)("div",{className:"mb-3",children:this.renderMyAll()}),Object(m.jsx)("div",{className:"small text-muted px-3 mb-1",children:"\u5206\u7ec4"}),Object(m.jsx)("div",{className:" mb-3 px-1 pb-1 bg-white border-top border-bottom",children:u.renderGroups()}),Object(m.jsx)("div",{className:"small text-muted px-3 mt-2 mb-1",children:"\u884c\u4e1a"}),Object(m.jsx)("div",{className:" mb-3 px-1 pb-1 bg-white border-top border-bottom",children:u.renderIndustries()}),Object(m.jsx)("div",{className:"small text-muted px-3 mt-2 mb-1",children:"\u95e8\u7c7b"}),Object(m.jsx)("div",{className:" mb-3 px-1 pb-1 bg-white border-top border-bottom",children:l.renderRootIndustries()}),Object(m.jsx)("div",{className:"mb-3",children:this.renderMyBlock()})]})}},{key:"renderMyAll",value:function(){var e=this.controller,t=e.cApp,n=e.cGroup.showStocksAll,r=t.store,a=r.stocksMyAll,i=r.myAllCaption;return this.renderSpec(null===a||void 0===a?void 0:a.length,i,"home","text-primary",n)}},{key:"renderMyBlock",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller,n=t.cApp,r=t.cGroup.showStocksBlock,a=n.store,i=a.stocksMyBlock,c=a.myBlockCaption;return e.renderSpec(null===i||void 0===i?void 0:i.length,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{className:"mr-3",children:c}),Object(m.jsx)("small",{className:"text-muted",children:"\u9009\u80a1\u65f6\u4e0d\u5217\u51fa"})]}),"ban","text-black",r)})))}},{key:"renderSpec",value:function(e,t,n,r,a){return E.a.createElement(Object(F.a)((function(){var i=e>0&&Object(m.jsx)("small",{className:"align-self-center mx-3 text-muted",children:e}),c="align-self-center ml-3 "+r;return Object(m.jsx)("div",{className:"mt-2 bg-white cursor-pointer",onClick:a,children:Object(m.jsx)(s.LMR,{left:Object(m.jsx)(s.FA,{name:n,className:c,size:"lg",fixWidth:!0}),right:i,children:Object(m.jsx)("div",{className:"px-3 py-2",children:t})})})})))}},{key:"right",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=[{caption:"\u7ba1\u7406\u80a1\u7968\u5206\u7ec4",action:e.controller.cApp.cCommon.manageGroups,icon:"object-group"}];return Object(m.jsx)(s.DropdownActions,{actions:t,icon:"bars",className:"mr-2 text-white bg-transparent border-0"})})))}}]),n}(s.VPage),Ee="small border rounded py-1 px-2 mr-3 ",Fe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).searchInGroup=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller,a=r.searchParam,i=r.smooth,a.key=n,a.smooth=n?0:i,t.next=5,e.controller.research();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderStock=function(t){var n=e.controller.cApp.cCommon.renderPinStock(t,1),r=t.$order;return Object(se.g)(r,t,e.onClickName,n)},e.onClickName=function(t){e.controller.cApp.openStock(t)},e}return Object(r.a)(n,[{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)("span",{className:"",children:e.controller.header})})))}},{key:"content",value:function(){var e=this.controller,t=e.pageStocks,n=e.onClickStock;return Object(m.jsxs)("div",{className:"pt-1 pb-3",children:[this.renderStars(),Object(m.jsx)(s.List,{items:t,item:{render:this.renderStock,onClick:n}})]})}},{key:"right",value:function(){var e=this.controller.searchParam.key;return Object(m.jsx)(s.SearchBox,{className:"mr-2 w-max-10c",onSearch:this.searchInGroup,initKey:e,placeholder:e?"\u641c\u7d22":this.controller.header+"\u4e2d\u641c\u7d22"})}},{key:"renderStars",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){for(var t=e.controller.smooth,n=[],r=0;r<5;r++)n[r]=4-r;return Object(m.jsxs)("div",{className:"px-3 py-1 d-sm-flex d-block",children:[Object(m.jsx)("div",{className:"d-flex py-1",children:n.map((function(n){var r,a;return n===t?(a="star",r=Ee+" text-warning border-primary bg-white"):n<t?(r=Ee+" cursor-pointer text-muted ",a="star-o"):(r=Ee+" cursor-pointer text-warning bg-white",a="star"),Object(m.jsx)("div",{className:r,onClick:function(){return e.controller.changeSmooth(n)},children:0===n?"\u5168\u90e8":Object(m.jsxs)(m.Fragment,{children:[n,Object(m.jsx)(s.FA,{name:a})]})},n)}))}),Object(m.jsxs)("div",{className:"text-muted small py-1 ml-auto align-self-center",children:[Object(m.jsx)(s.FA,{name:"star-o"})," \u8fd1\u4e94\u5e74\u5206\u7ea2\u589e\u957f\u6301\u7eed\u5ea6"]})]})})))}},{key:"onPageScrollBottom",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageStocks.more();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),Ve={right:"-1.0rem",bottom:"-0.3rem"},Le=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderGroup=function(e,t){var n,r,a=e.name,i=e.count;switch(e.type){default:case"group":n=Object(m.jsx)(s.FA,{name:"list-alt",className:"text-info align-self-center"});break;case"industry":n=Object(m.jsx)(s.FA,{name:"leaf",className:"text-danger align-self-center"})}var c=a.length;c>=9&&(r={fontSize:"50%"}),c>=8?r={fontSize:"60%"}:c>=7?r={fontSize:"70%"}:c>=6&&(r={fontSize:"80%"});var o=i>0&&Object(m.jsx)("small",{className:"text-muted position-absolute",style:Ve,children:i});return Object(m.jsxs)("div",{className:"d-block w-min-6c w-max-6c text-center py-1 m-1 border rounded bg-white",children:[Object(m.jsxs)("span",{className:"position-relative",children:[n," ",o]}),Object(m.jsx)("div",{className:"",style:r,children:a})]})},e}return Object(r.a)(n,[{key:"render",value:function(e){var t=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)(s.List,{items:e,item:{render:t.renderGroup,onClick:function(e){return t.onGroupClick(e)}},className:"d-flex flex-wrap bg-white p-1"})})))}},{key:"onGroupClick",value:function(e){this.controller.showMiGroup(e)}}]),n}(s.View),Me=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"onGroupClick",value:function(e){this.controller.showRootIndustry(e)}}]),n}(Le),Be=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderRowRight=void 0,e.renderPageRight=void 0,e.onClickName=function(t){e.controller.onStockClick(t)},e.renderStock=function(t,n){var r,a,i=null===(r=(a=e).renderRowRight)||void 0===r?void 0:r.call(a,t),c=t.$order;return Object(se.g)(c,t,e.onClickName,i)},e}return Object(r.a)(n,[{key:"init",value:function(e){var t=e.renderRowRight,n=e.renderPageRight;this.renderRowRight=t,this.renderPageRight=n}},{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)(m.Fragment,{children:e.controller.listCaption})})))}},{key:"right",value:function(){var e;return null===(e=this.renderPageRight)||void 0===e?void 0:e.call(this)}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t,n=e.controller,r=n.miGroup,a=n.stocks;if(r){var i=r.groups;i&&(t=e.renderVm(Me,i))}return Object(m.jsxs)("div",{children:[t,Object(m.jsx)(s.List,{items:a,item:{render:e.renderStock}})]})})))}}]),n}(s.VPage),qe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).miGroup=null,r.miAccount=null,r.holdingStock=void 0,r.stocks=void 0,r._listCaption=void 0,r.showMiGroup=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._listCaption=void 0,r.miGroup=t,"group"===t.type&&(n=function(){return r.cApp.cCommon.buildCIDUserGroup().renderViewRight(t)}),r.openStocksList(void 0,n),e.next=6,t.loadItems();case 6:r.setStocksList(t.stocks);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showRootIndustry=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.owner.newSub(n),e.next=3,a.showMiGroup(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showStocksAll=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.cApp.store,r._listCaption=t.myAllCaption,r.miGroup=void 0,r.openStocksList(),r.setStocksList(t.stocksMyAll);case 5:case"end":return e.stop()}}),e)}))),r.showStocksBlock=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cApp.store,n=r.cApp.cCommon.renderBlockStock,r._listCaption=t.myBlockCaption,r.miGroup=void 0,r.openStocksList(n),e.next=7,r.cApp.store.loadMyBlock();case 7:r.setStocksList(t.stocksMyBlock);case 8:case"end":return e.stop()}}),e)}))),r.onStockClick=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.cApp.openStock(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(D.o)(Object(_.a)(r),{miGroup:D.p,miAccount:D.p,stocks:D.p,listCaption:D.h,showMiGroup:D.f,showStocksAll:D.f}),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCaption",get:function(){var e,t;return null!==(e=this._listCaption)&&void 0!==e?e:null===(t=this.miGroup)||void 0===t?void 0:t.name}},{key:"renderGroups",value:function(){var e=this.cApp.store.miGroups.groups;return this.renderView(Le,e)}},{key:"renderIndustries",value:function(){var e=this.cApp.store.industries.groups;return this.renderView(Le,e)}},{key:"renderRootIndustries",value:function(){var e=this.cApp.store.rootIndustries.groups;return this.renderView(Me,e)}},{key:"openStocksList",value:function(e,t){var n=this;Object(D.r)((function(){n.stocks=void 0,n.openVPage(Be,{renderRowRight:e,renderPageRight:t})}))}},{key:"setStocksList",value:function(e){var t=this;Object(D.r)((function(){t.stocks=e.sort((function(e,t){var n=e.miRate,r=t.miRate;return n<r?1:n>r?-1:0}));for(var n=t.stocks.length,r=0;r<n;r++)t.stocks[r].$order=r+1}))}}]),n}(u),Ue=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cGroup=void 0,r.cIndustries=void 0,r.header=null,r.pageStocks=null,r.searchOrder="miRateDesc",r.searchParam=void 0,r.smooth=void 0,r.tab=function(){return r.renderView(Re)},r.load=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),r.onSearch=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u641c\u7d22",["sh","sz","bj","hk","us"],t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showA=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("A\u80a1",["sh","sz","bj"]);case 2:case"end":return e.stop()}}),e)}))),r.showHK=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u6e2f\u80a1",["hk"]);case 2:case"end":return e.stop()}}),e)}))),r.showSH=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u6caa\u80a1",["sh"]);case 2:case"end":return e.stop()}}),e)}))),r.showSZ=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u6df1\u80a1",["sz"]);case 2:case"end":return e.stop()}}),e)}))),r.showBJ=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u4eac\u80a1",["bj"]);case 2:case"end":return e.stop()}}),e)}))),r.showUS=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("US",["us"]);case 2:case"end":return e.stop()}}),e)}))),r.showAll=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u5168\u90e8\u80a1\u7968",["sh","sz","bj","hk","us"]);case 2:case"end":return e.stop()}}),e)}))),r.onClickStock=function(e){},Object(D.o)(Object(_.a)(r),{header:D.p,smooth:D.p,loadSmooth:D.f,changeSmooth:D.f}),r.cGroup=r.newSub(qe),r.cIndustries=r.newSub(qe),r.loadSmooth(),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(Re);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSmooth",value:function(){var e=localStorage.getItem("smooth");if(e)try{this.smooth=Number.parseInt(e)}catch(t){this.smooth=0}else this.smooth=0}},{key:"changeSmooth",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.smooth!==t){e.next=2;break}return e.abrupt("return");case 2:return this.smooth=t,localStorage.setItem("smooth",String(t)),this.searchParam.smooth=t,e.next=7,this.research();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"research",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageStocks.first(this.searchParam);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchStock",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.header=t,this.searchParam={key:r,market:null===n||void 0===n?void 0:n.join("\n"),$orderSwitch:this.searchOrder,smooth:r?0:this.smooth},this.pageStocks=new Te(this.cApp.store),e.next=5,this.pageStocks.first(this.searchParam);case 5:this.openVPage(Fe);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(o),He=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(e){var t=this;return E.a.createElement(Object(F.a)((function(){var n,r;return!0===t.controller.isMyBlock(e)?(r="\u53d6\u6d88\u62c9\u9ed1",n="btn-outline-danger"):(r="\u62c9\u9ed1",n="btn-outline-secondary"),Object(m.jsx)("button",{className:"btn btn-sm align-self-start "+n,onClick:function(){return t.controller.toggleBlock(e)},children:r})})))}}]),n}(s.View),Xe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){return"Empty"}},{key:"content",value:function(){return Object(m.jsx)("div",{children:"empty"})}}]),n}(s.VPage),We=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).param=void 0,e}return Object(r.a)(n,[{key:"init",value:function(e){this.param=e}},{key:"header",value:function(){return"\u5220\u9664\u9009\u80a1"}},{key:"content",value:function(){var e=this.param,t=e.stock,n=e.miAccounts,r=e.miGroups;return Object(m.jsxs)("div",{className:"py-3",children:[Object(m.jsxs)("div",{className:"bg-white px-3 py-2 text-info",children:[Object(m.jsx)(s.FA,{name:"exclamation-circle",className:"mr-3 text-danger"}),Object(m.jsx)("b",{className:"text-primary",children:t.name})," \u65e0\u6cd5\u4ece\u81ea\u9009\u80a1\u5220\u9664"]}),n.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"small px-3 mt-3 mb-1",children:"\u6301\u4ed3"}),Object(m.jsx)("div",{className:"p-3 bg-white",children:n.map((function(e,t){return Object(m.jsx)("span",{className:"mr-3",children:e.name},t)}))})]}),r.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"small px-3 mt-3 mb-1",children:"\u5206\u7ec4"}),Object(m.jsx)("div",{className:"p-3 bg-white",children:r.map((function(e,t){return Object(m.jsx)("span",{className:"mr-3",children:e.name},t)}))})]})]})}}]),n}(s.VPage),Ge=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(e){var t=this,n=e.stock,r=e.closeLevelWhenRemoved;return E.a.createElement(Object(F.a)((function(){return!0===t.controller.isMyAll(n)?Object(m.jsxs)("button",{className:"btn btn-sm btn-outline-info align-self-start",onClick:function(){return t.controller.setStockToGroup(n,r)},children:[Object(m.jsx)(s.FA,{name:"cog",className:"small mr-1",fixWidth:!0}),"\u5206\u7ec4"]}):Object(m.jsxs)("button",{className:"btn btn-sm btn-outline-primary align-self-start",onClick:function(){return t.controller.toggleMyAll(n)},children:[Object(m.jsx)(s.FA,{name:"plus",className:"small mr-1",fixWidth:!0}),"\u81ea\u9009"]})})))}}]),n}(s.View),$e=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).closeLevelWhenRemoved=void 0,e}return Object(r.a)(n,[{key:"init",value:function(e){this.closeLevelWhenRemoved=e}},{key:"header",value:function(){return"\u8bbe\u7f6e\u5206\u7ec4"}},{key:"right",value:function(){return Object(m.jsx)("button",{className:"btn btn-sm btn-info mr-2",onClick:this.controller.manageGroups,children:"\u7ba1\u7406\u5206\u7ec4"})}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller,n=t.stock,r=t.cApp,a=t.setGroup,i=t.setStockToAccount,c=t.stockInAccounts;if(!n)return Object(m.jsx)("div",{children:"no stock, can set group"});var o=n.id,u=n.name,l=n.no,h=r.store,d=h.miGroups,f=h.miAccounts,p=d.groups,v=f.accounts,b=h.inAnyGroup(o),j=Object(m.jsx)("button",{className:"btn btn-sm btn-outline-info",onClick:function(t){return e.removeMyAll(n,t.currentTarget)},children:"\u5220\u9664\u81ea\u9009"});return Object(m.jsxs)("div",{children:[Object(m.jsxs)(s.LMR,{className:"p-3 align-items-center",right:j,children:[Object(m.jsx)("b",{children:u}),Object(m.jsx)("span",{className:"ml-3",children:l})]}),Object(m.jsx)("div",{className:"px-3 mt-1 mb-1 text-muted small",children:"\u5206\u7ec4"}),Object(m.jsxs)("div",{className:"d-flex flex-wrap py-1 border-top border-bottom bg-white",children:[0===p.length&&Object(m.jsx)("small",{className:"px-3 py-2 text-muted",children:"[\u65e0\u5206\u7ec4]"}),p.map((function(e){var t=e.id,n=e.name;return Object(m.jsxs)("label",{className:"mb-0 w-8c px-3 py-2",children:[Object(m.jsx)("input",{className:"mr-1",type:"checkbox",defaultChecked:b[t],onChange:function(t){return a(t.currentTarget.checked,e)}}),n]},t)}))]}),(null===v||void 0===v?void 0:v.length)>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"px-3 mt-3 mb-1 text-muted small",children:"\u6301\u4ed3\u8d26\u6237"}),Object(m.jsx)("div",{className:"d-flex flex-wrap py-1 border-top border-bottom bg-white",children:v.map((function(e){var t,n,r=e.id,a=e.name,s=c[r];return void 0===s?(t=!1,n=!1):(t=s[0],n=s[1]),Object(m.jsxs)("label",{className:"mb-0 w-8c px-3 py-2",children:[Object(m.jsx)("input",{className:"mr-1",type:"checkbox",disabled:n,defaultChecked:t,onChange:function(t){return i(t.currentTarget.checked,e)}}),a]},r)}))})]})]})})))}},{key:"removeMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.disabled=!0,r=function(){a.closePage(a.closeLevelWhenRemoved)},e.next=4,this.controller.removeMyAll(t,r);case 4:n.disabled=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(s.VPage),Ke=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(e){var t,n,r=e.no,a=e.$market.name,i=a+r;switch(a){case"us":case"hk":t="https://xueqiu.com/S/".concat(r),n="\u96ea\u7403";break;default:t="https://finance.sina.com.cn/realstock/company/".concat(i,"/nc.shtml"),n="\u65b0\u6d6a\u8d22\u7ecf"}return Object(m.jsx)("a",{className:"btn btn-sm btn-link d-sm-inline d-none",href:t,target:"_blank",rel:"noreferrer",children:n})}}]),n}(s.View),ze=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).stock=void 0,e.stockInAccounts=void 0,e.toggleBlock=function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cApp.store,t.next=3,r.toggleBlock(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setStockToGroup=function(){var t=Object(f.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stock=n,a=e.cApp.store,t.next=4,a.loadStockInAccounts(n.id);case 4:e.stockInAccounts=t.sent,e.openVPage($e,r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.setGroup=function(){var t=Object(f.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.cApp.store.miGroups,!0!==n){t.next=6;break}return t.next=4,a.addStockToGroup(e.stock,r);case 4:t.next=8;break;case 6:return t.next=8,a.removeStockFromGroup(e.stock,r);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.setStockToAccount=function(){var t=Object(f.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.cApp.store.miAccounts,!0!==n){t.next=6;break}return t.next=4,a.addStockToAccount(e.stock,r);case 4:t.next=8;break;case 6:return t.next=8,a.removeStockFromAccount(e.stock,r);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.showEmptyPage=function(){e.openVPage(Xe)},e.renderPinStock=function(t,n){return t?e.renderView(Ge,{stock:t,closeLevelWhenRemoved:n}):null},e.renderBlockStock=function(t){return t?e.renderView(He,t):null},e.showStock=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,a,i,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.id,a=n.name,i=n.no,c=n.rawId,s=n.$market,new Date,e.cApp.showStock({id:r,rawId:c,name:a,code:i,market:s.name,symbol:s.name+i,day:void 0,stock:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.manageGroups=Object(f.a)(d.a.mark((function t(){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.buildCIDUserGroup(),r=n.renderItem,a=n.onItemClick,n.renderItem=function(e,t){return Object(se.e)(e,t,r)},n.onItemClick=function(e){return a(e)},t.next=6,n.call();case 6:if(!0!==t.sent){t.next=10;break}return t.next=10,e.cApp.store.miGroups.load();case 10:case"end":return t.stop()}}),t)}))),e.manageAccounts=Object(f.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.buildCIDUserAccount(),t.next=3,n.call();case 3:if(!0!==t.sent){t.next=7;break}return t.next=7,e.cApp.store.miAccounts.load();case 7:case"end":return t.stop()}}),t)}))),e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isMyAll",value:function(e){return this.cApp.store.isMyAll(e)}},{key:"addMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.store.addMyAll(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeMyAll",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.store.removeMyAll(t);case 2:(r=e.sent)?(r.stock=t,this.openVPage(We,r)):null===n||void 0===n||n();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleMyAll",value:function(e){this.isMyAll(e)?this.removeMyAll(e):this.addMyAll(e)}},{key:"isMyBlock",value:function(e){return this.cApp.store.isMyBlock(e)}},{key:"buildCIDUserGroup",value:function(){var e=this.uqs.BruceYuMi,t={ID:e.Group,fieldCustoms:{no:{hiden:!0},type:{hiden:!0,defaultValue:"0"}},t:this.t},n=new S.MidIXID(e,t,e.UserGroup,undefined);return n.listHeader="\u7ba1\u7406\u80a1\u7968\u5206\u7ec4",n.itemHeader="\u80a1\u7968\u5206\u7ec4",new S.CID(n)}},{key:"buildCIDUserAccount",value:function(){var e=this.uqs.BruceYuMi,t={ID:e.Account,fieldCustoms:{no:{hiden:!0}},t:this.t},n=new S.MidIXID(e,t,e.UserAccount,undefined);return n.listHeader="\u7ba1\u7406\u6301\u4ed3\u8d26\u53f7",n.itemHeader="\u6301\u4ed3\u8d26\u53f7",new S.CID(n)}},{key:"renderStockLink",value:function(e){return this.renderView(Ke,e)}}]),n}(o),Je=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,!1)).store=void 0,r.store=e,r.firstSize=50,r.pageSize=20,r}return Object(r.a)(n,[{key:"getPageId",value:function(e){return null===e||void 0===e?void 0:e.$order}},{key:"loadResults",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.searchTrackStock(Object(B.a)(Object(B.a)({},t),{},{smooth:t.smooth+1}),n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(s.PageItems),Qe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsxs)("div",{className:"ml-3",children:[" \u56de\u6eaf\u65e5\u671f\uff1a",e.controller.trackDay]})})))}},{key:"content",value:function(){var e=this.controller,t=e.showA,n=e.showSH,r=e.showSZ,a=e.showBJ,i=e.showAll,c=e.cGroup,o=(e.cIndustries,[["A\u80a1",t],["\u6caaA",n],["\u6df1A",r],["\u4eacA",a],["\u5168\u90e8",i]]);return Object(m.jsxs)("div",{className:"bg-light",children:[Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(s.SearchBox,{className:"mb-0",initKey:this.controller.trackDay.toString(),onSearch:this.controller.onSetTrackDay,placeholder:"yyyymmdd"})}),Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(s.SearchBox,{className:"mb-0",onSearch:this.controller.onSearch,placeholder:"\u80a1\u7968\u4ee3\u7801\uff0c\u540d\u79f0"})}),Object(m.jsx)("div",{className:"p-2 mb-2 d-flex flex-wrap bg-white border-top border-bottom",children:o.map((function(e){var t=Object(q.a)(e,2);return function(e,t){return Object(m.jsx)("button",{className:"btn btn-outline-info m-1",onClick:t,children:e},e)}(t[0],t[1])}))}),Object(m.jsx)("div",{className:"mb-3",children:this.renderMyAll()}),Object(m.jsx)("div",{className:"small text-muted px-3 mb-1",children:"\u5206\u7ec4"}),Object(m.jsx)("div",{className:" mb-3 px-1 pb-1 bg-white border-top border-bottom",children:c.renderGroups()}),Object(m.jsx)("div",{className:"small text-muted px-3 mt-2 mb-1",children:"\u884c\u4e1a"}),Object(m.jsx)("div",{className:" mb-3 px-1 pb-1 bg-white border-top border-bottom",children:c.renderIndustries()}),Object(m.jsx)("div",{className:"mb-3",children:this.renderMyBlock()})]})}},{key:"renderMyAll",value:function(){var e=this.controller,t=e.cApp,n=e.cGroup.showStocksAll,r=t.store,a=r.stocksMyAll,i=r.myAllCaption;return this.renderSpec(null===a||void 0===a?void 0:a.length,i,"home","text-primary",n)}},{key:"renderMyBlock",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller,n=t.cApp,r=t.cGroup.showStocksBlock,a=n.store,i=a.stocksMyBlock,c=a.myBlockCaption;return e.renderSpec(null===i||void 0===i?void 0:i.length,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{className:"mr-3",children:c}),Object(m.jsx)("small",{className:"text-muted",children:"\u9009\u80a1\u65f6\u4e0d\u5217\u51fa"})]}),"ban","text-black",r)})))}},{key:"renderSpec",value:function(e,t,n,r,a){return E.a.createElement(Object(F.a)((function(){var i=e>0&&Object(m.jsx)("small",{className:"align-self-center mx-3 text-muted",children:e}),c="align-self-center ml-3 "+r;return Object(m.jsx)("div",{className:"mt-2 bg-white cursor-pointer",onClick:a,children:Object(m.jsx)(s.LMR,{left:Object(m.jsx)(s.FA,{name:n,className:c,size:"lg",fixWidth:!0}),right:i,children:Object(m.jsx)("div",{className:"px-3 py-2",children:t})})})})))}},{key:"right",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=[{caption:"\u7ba1\u7406\u80a1\u7968\u5206\u7ec4",action:e.controller.cApp.cCommon.manageGroups,icon:"object-group"},{caption:"\u8df3\u5230\u4e0b\u4e00\u5468",action:e.controller.onNextTrackDay,icon:"calendar-plus-o"}];return Object(m.jsx)(s.DropdownActions,{actions:t,icon:"bars",className:"mr-2 text-white bg-transparent border-0"})})))}}]),n}(s.VPage),Ye="small border rounded py-1 px-2 mr-3 ",Ze=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).searchInGroup=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller,a=r.searchParam,i=r.smooth,a.key=n,a.smooth=n?0:i,t.next=5,e.controller.research();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderStock=function(t){var n=e.controller.cApp.cCommon.renderPinStock(t,1),r=t.$order;return Object(se.g)(r,t,e.onClickName,n)},e.onClickName=function(t){e.controller.cApp.openStock(t,e.controller.trackDay)},e}return Object(r.a)(n,[{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller,n=t.header,r=t.trackDay,a=n+" - \u65e5\u671f: ";return a+=void 0!==r?r.toString():"",Object(m.jsx)("span",{className:"",children:a})})))}},{key:"content",value:function(){var e=this.controller,t=e.pageStocks,n=e.onClickStock;return Object(m.jsxs)("div",{className:"pt-1 pb-3",children:[this.renderStars(),Object(m.jsx)(s.List,{items:t,item:{render:this.renderStock,onClick:n}})]})}},{key:"right",value:function(){var e=[{caption:"\u8df3\u5230\u4e0b\u4e00\u5468",action:this.controller.onNextTrackDayAndReload,icon:"calendar-plus-o"}],t=this.controller.searchParam.key;return Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)(s.SearchBox,{className:"mr-2 w-max-10c",onSearch:this.searchInGroup,initKey:t,placeholder:t?"\u641c\u7d22":this.controller.header+"\u4e2d\u641c\u7d22"}),Object(m.jsx)(s.DropdownActions,{actions:e,icon:"bars",className:"mr-2 text-white bg-transparent border-0"})]})}},{key:"renderStars",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){for(var t=e.controller.smooth,n=[],r=0;r<5;r++)n[r]=4-r;return Object(m.jsxs)("div",{className:"px-3 py-1 d-sm-flex d-block",children:[Object(m.jsx)("div",{className:"d-flex py-1",children:n.map((function(n){var r,a;return n===t?(a="star",r=Ye+" text-warning border-primary bg-white"):n<t?(r=Ye+" cursor-pointer text-muted ",a="star-o"):(r=Ye+" cursor-pointer text-warning bg-white",a="star"),Object(m.jsx)("div",{className:r,onClick:function(){return e.controller.changeSmooth(n)},children:0===n?"\u5168\u90e8":Object(m.jsxs)(m.Fragment,{children:[n,Object(m.jsx)(s.FA,{name:a})]})},n)}))}),Object(m.jsxs)("div",{className:"text-muted small py-1 ml-auto align-self-center",children:[Object(m.jsx)(s.FA,{name:"star-o"})," \u8fd1\u4e94\u5e74\u5206\u7ea2\u589e\u957f\u6301\u7eed\u5ea6"]})]})})))}},{key:"onPageScrollBottom",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.pageStocks.more();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(s.VPage),et={right:"-1.0rem",bottom:"-0.3rem"},tt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderGroup=function(e,t){var n,r,a=e.name,i=e.count;switch(e.type){default:case"group":n=Object(m.jsx)(s.FA,{name:"list-alt",className:"text-info align-self-center"});break;case"industry":n=Object(m.jsx)(s.FA,{name:"leaf",className:"text-danger align-self-center"})}var c=a.length;c>=9&&(r={fontSize:"50%"}),c>=8?r={fontSize:"60%"}:c>=7?r={fontSize:"70%"}:c>=6&&(r={fontSize:"80%"});var o=i>0&&Object(m.jsx)("small",{className:"text-muted position-absolute",style:et,children:i});return Object(m.jsxs)("div",{className:"d-block w-min-6c w-max-6c text-center py-1 m-1 border rounded bg-white",children:[Object(m.jsxs)("span",{className:"position-relative",children:[n," ",o]}),Object(m.jsx)("div",{className:"",style:r,children:a})]})},e}return Object(r.a)(n,[{key:"render",value:function(e){var t=this;return E.a.createElement(Object(F.a)((function(){return Object(m.jsx)(s.List,{items:e,item:{render:t.renderGroup,onClick:function(e){return t.onGroupClick(e)}},className:"d-flex flex-wrap bg-white p-1"})})))}},{key:"onGroupClick",value:function(e){this.controller.showMiGroup(e)}}]),n}(s.View),nt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"onGroupClick",value:function(e){this.controller.showRootIndustry(e)}}]),n}(tt),rt=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderRowRight=void 0,e.renderPageRight=void 0,e.onClickName=function(t){e.controller.onStockClick(t)},e.renderStock=function(t,n){var r,a,i=null===(r=(a=e).renderRowRight)||void 0===r?void 0:r.call(a,t),c=t.$order;return Object(se.g)(c,t,e.onClickName,i)},e}return Object(r.a)(n,[{key:"init",value:function(e){var t=e.renderRowRight,n=e.renderPageRight;this.renderRowRight=t,this.renderPageRight=n}},{key:"header",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t=e.controller.listCaption+" - "+e.controller.track.trackDay;return Object(m.jsx)(m.Fragment,{children:t})})))}},{key:"right",value:function(){var e;return null===(e=this.renderPageRight)||void 0===e?void 0:e.call(this)}},{key:"content",value:function(){var e=this;return E.a.createElement(Object(F.a)((function(){var t,n=e.controller,r=n.miGroup,a=n.stocks;if(r){var i=r.groups;i&&(t=e.renderVm(nt,i))}return Object(m.jsxs)("div",{children:[t,Object(m.jsx)(s.List,{items:a,item:{render:e.renderStock}})]})})))}}]),n}(s.VPage),at=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).miGroup=null,r.miAccount=null,r.holdingStock=void 0,r.stocks=void 0,r.track=void 0,r._listCaption=void 0,r.showMiGroup=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._listCaption=void 0,r.miGroup=t,"group"===r.miGroup.type&&(n=function(){return r.cApp.cCommon.buildCIDUserGroup().renderViewRight(r.miGroup)}),r.openStocksList(void 0,n),e.next=6,r.miGroup.loadItems();case 6:return e.next=8,r.loadItemsValue(r.miGroup.stocks);case 8:a=e.sent,r.setStocksList(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadItemsValue=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=[],t.forEach((function(e){n.push(e.rawId),a.push(Object(B.a)({},e))})),!(n.length>0)){e.next=9;break}return e.next=6,r.cApp.store.minet.q_stocksvalue(r.owner.trackDay,n);case 6:i=e.sent,0,a.forEach((function(e){var t=e.rawId,n=i.findIndex((function(e){return e.id===t}));if(n>=0){var r=i[n];e.earning=r.earning,e.divident=r.divident,e.price=r.price,e.roe=r.roe,e.volumn=r.volumn,e.dvRate=r.dvrate,e.ttm=r.ttm,e.miRate=r.mirate,e.miValue=r.mivalue,e.incValue=r.incvalue,e.inc1=r.inc1,e.inc2=r.inc2,e.inc3=r.inc3,e.inc4=r.inc4,e.preInc=r.preinc,e.smoothness=r.smoothness}else e.earning=void 0,e.divident=void 0,e.price=void 0,e.roe=void 0,e.volumn=void 0,e.dvRate=void 0,e.ttm=void 0,e.miRate=void 0,e.miValue=void 0,e.incValue=void 0,e.inc1=void 0,e.inc2=void 0,e.inc3=void 0,e.inc4=void 0,e.preInc=void 0,e.smoothness=void 0}));case 9:return e.abrupt("return",Object(D.p)(a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showRootIndustry=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.owner.newSub(n),e.next=3,a.showMiGroup(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showStocksAll=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cApp.store,r._listCaption=t.myAllCaption,r.miGroup=void 0,r.openStocksList(),e.next=6,r.loadItemsValue(t.stocksMyAll);case 6:n=e.sent,r.setStocksList(n);case 8:case"end":return e.stop()}}),e)}))),r.showStocksBlock=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cApp.store,n=r.cApp.cCommon.renderBlockStock,r._listCaption=t.myBlockCaption,r.miGroup=void 0,r.openStocksList(n),e.next=7,r.cApp.store.loadMyBlock();case 7:return e.next=9,r.loadItemsValue(t.stocksMyBlock);case 9:a=e.sent,r.setStocksList(a);case 11:case"end":return e.stop()}}),e)}))),r.onStockClick=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.owner.trackDay,r.cApp.openStock(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.track=e,Object(D.o)(Object(_.a)(r),{miGroup:D.p,miAccount:D.p,stocks:D.p,listCaption:D.h,showMiGroup:D.f,showStocksAll:D.f}),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCaption",get:function(){var e,t;return null!==(e=this._listCaption)&&void 0!==e?e:null===(t=this.miGroup)||void 0===t?void 0:t.name}},{key:"renderGroups",value:function(){var e=this.cApp.store.miGroups.groups;return this.renderView(tt,e)}},{key:"renderIndustries",value:function(){var e=this.cApp.store.industries.groups;return this.renderView(tt,e)}},{key:"openStocksList",value:function(e,t){var n=this;Object(D.r)((function(){n.stocks=void 0,n.openVPage(rt,{renderRowRight:e,renderPageRight:t})}))}},{key:"setStocksList",value:function(e){var t=this;Object(D.r)((function(){t.stocks=e.sort((function(e,t){var n=e.miRate,r=t.miRate;return void 0===n?void 0===r?0:1:void 0===r?-1:n<r?1:n>r?-1:0}));for(var n=t.stocks.length,r=0;r<n;r++)t.stocks[r].$order=r+1}))}}]),n}(u),it=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).cGroup=void 0,r.cIndustries=void 0,r.header=null,r.pageStocks=null,r.searchOrder="miRateDesc",r.searchParam=void 0,r.smooth=void 0,r.trackDay=20100108,r.tab=function(){return r.renderView(Qe)},r.load=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),r.onSetTrackDay=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,i,c,s,o,u,l,h,f,p,v,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(void 0===(n=parseInt(t))||isNaN(n)||n<20050100)&&(n=20050101),e.next=4,r.cApp.store.getNextTradedays(n);case 4:if(a=e.sent,!(Array.isArray(a)&&a.length>0)){e.next=29;break}if(n=a[0].day,i=Math.floor(n/1e4),c=Math.floor(n%1e4/100),s=Math.floor(n%100),o=new Date(i,c-1,s),u=o.getDay(),l=0,5===u||(l=6===u?6:5-u,o.setTime(o.valueOf()+864e5*l),i=o.getFullYear(),c=o.getMonth()+1,s=o.getDate()),!((h=1e4*i+100*c+s)>n)){e.next=29;break}f=1,p=a.length;case 18:if(!(f<p)){e.next=29;break}if(v=a[f],!((b=v.day)>h)){e.next=23;break}return e.abrupt("break",29);case 23:if((n=b)!==h){e.next=26;break}return e.abrupt("break",29);case 26:f++,e.next=18;break;case 29:if(r.trackDay!==n){e.next=31;break}return e.abrupt("return");case 31:r.trackDay=n,localStorage.setItem("_trackday",String(r.trackDay));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onNextTrackDay=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(t=r.trackDay)?t=20050101:t+=1,e.next=4,r.onSetTrackDay(t.toString());case 4:case"end":return e.stop()}}),e)}))),r.onNextTrackDayAndReload=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(t=r.trackDay)?t=20050101:t+=1,n=r.trackDay,e.next=5,r.onSetTrackDay(t.toString());case 5:if(r.trackDay===n){e.next=8;break}return e.next=8,r.reLoadPageStocks();case 8:case"end":return e.stop()}}),e)}))),r.onSearch=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u641c\u7d22",["sh","sz","bj"],t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showA=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("A\u80a1",["sh","sz","bj"]);case 2:case"end":return e.stop()}}),e)}))),r.showSH=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u6caa\u80a1",["sh"]);case 2:case"end":return e.stop()}}),e)}))),r.showSZ=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u6df1\u80a1",["sz"]);case 2:case"end":return e.stop()}}),e)}))),r.showBJ=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u4eac\u80a1",["bj"]);case 2:case"end":return e.stop()}}),e)}))),r.showAll=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.searchStock("\u5168\u90e8\u80a1\u7968",["sh","sz","bj"]);case 2:case"end":return e.stop()}}),e)}))),r.onClickStock=function(e){},Object(D.o)(Object(_.a)(r),{header:D.p,smooth:D.p,trackDay:D.p,loadSmooth:D.f,changeSmooth:D.f});var i=localStorage.getItem("_trackday");if(void 0!==i&&null!==i){var c=parseInt(i);c>=20050101&&c<4e7&&(r.trackDay=c)}return r.cGroup=r.newSub(at),r.cIndustries=r.newSub(at),r.loadSmooth(),r}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(Qe);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSmooth",value:function(){var e=localStorage.getItem("smooth");if(e)try{this.smooth=Number.parseInt(e)}catch(t){this.smooth=0}else this.smooth=0}},{key:"changeSmooth",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.smooth!==t){e.next=2;break}return e.abrupt("return");case 2:return this.smooth=t,localStorage.setItem("smooth",String(t)),this.searchParam.smooth=t,e.next=7,this.research();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"research",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageStocks.first(this.searchParam);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchStock",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.header=t,this.searchParam={day:this.trackDay,key:r,market:null===n||void 0===n?void 0:n.join("\n"),$orderSwitch:this.searchOrder,smooth:r?0:this.smooth},this.pageStocks=new Je(this.cApp.store),e.next=5,this.pageStocks.first(this.searchParam);case 5:this.openVPage(Ze);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reLoadPageStocks",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchParam.day=this.trackDay,e.next=3,this.pageStocks.first(this.searchParam);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o),ct=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).cBug=void 0,e.cMe=void 0,e.cUI=void 0,e.cHome=void 0,e.cFind=void 0,e.cCommon=void 0,e.store=void 0,e.cTrack=void 0,e.timer=void 0,e.tick=0,e.gapIndex=0,e.showStock=function(){var t=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.loadMyBlock();case 2:e.newC(Pe.CStockInfo).start(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openStock=function(t,n){var r=t.id,a=t.name,i=t.no,c=t.rawId,s=t.$market,o=n;if(void 0===o){var u=new Date;o=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate()}e.showStock({id:r,rawId:c,name:a,code:i,market:s.name,symbol:s.name+i,day:o,trackDay:n,stock:t})},e}return Object(r.a)(n,[{key:"internalStart",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setRes(x),t=this.uqs,C.setUI(t.BruceYuMi),this.store=new ae(this.uqs,this.user),e.next=5,this.store.load();case 5:this.cHome=this.newC(_e),this.cFind=this.newC(Ue),this.cMe=this.newC(M),this.cCommon=this.newC(ze),this.cTrack=this.newC(it),!0===this.isDev&&(this.cBug=this.newC(k),this.cUI=this.newC(I)),this.openVPage(g,void 0,this.dispose);case 12:case"end":return e.stop()}var t}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDispose",value:function(){clearInterval(this.timer),this.timer=void 0}}]),n}(l),st=function(){s.nav.setSettings(N);var e=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.start)(ct,N,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(s.NavView,{onLogined:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o="https://mi.jjol.cn/",u="http://localhost:6011/",l=n(5),h=n(6),d=n(19),f=n.n(d),p=n(10),v=n(7);var b=function(){function e(t,n,r){var s=this;Object(c.a)(this,e),this.hostUrl=void 0,this.apiToken=void 0,this.ui=void 0,this.timeout=void 0,this.startWait=function(){void 0!==s.ui&&s.ui.startWait()},this.endWait=function(e,t){void 0!==s.ui&&s.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===s.ui){e.next=3;break}return e.next=3,s.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=n,this.ui=r,this.timeout=!0===v.env.isDevelopment?5e5:2e4}return Object(s.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"get",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,o,u,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=l.length>1&&void 0!==l[1]?l[1]:void 0)){e.next=25;break}if(!((r=Object.keys(n)).length>0)){e.next=25;break}i="?",c=Object(p.a)(r),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=17;break}if(o=s.value,void 0!==n[o]){e.next=13;break}return e.abrupt("continue",15);case 13:t+=i+o+"="+n[o],i="&";case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),c.e(e.t0);case 22:return e.prev=22,c.f(),e.finish(22);case 25:return(u=this.buildOptions()).method="GET",e.next=29,this.innerFetch(t,u);case 29:return e.abrupt("return",e.sent);case 30:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="POST",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="PUT",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.buildOptions()).method="DELETE",r.body=JSON.stringify(n),e.next=5,this.innerFetch(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,n,r,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,c){var s,o,u,l,h,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(e){return{channel:s,url:o,options:n,resolve:r,reject:c,error:e}},s=this,this.startWait(),o=t,e.prev=4,console.log("%s %s",n.method,o),l=setTimeout((function(){return s.endWait(t,c)}),this.timeout),e.next=9,fetch(encodeURI(o),n);case 9:if(!1!==(h=e.sent).ok){e.next=15;break}throw clearTimeout(l),s.endWait(),console.log("call error %s",h.statusText),h.statusText;case 15:if(!((d=h.headers.get("content-type"))&&d.indexOf("json")>=0)){e.next=20;break}return e.abrupt("return",h.json().then(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(l),s.endWait(),!0!==t.ok){e.next=4;break}return e.abrupt("return",r(t.res));case 4:if(void 0!==t.error){e.next=9;break}return e.next=7,s.showError(u("not valid tonva json"));case 7:e.next=12;break;case 9:return e.next=11,s.showError(u(t.error));case 11:c(t.error);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.showError(u(t.message));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:return e.next=22,h.text();case 22:f=e.sent,clearTimeout(l),s.endWait(),r(f);case 26:e.next=36;break;case 28:if(e.prev=28,e.t0=e.catch(4),"string"!==typeof e.t0){e.next=34;break}if(!0!==e.t0.toLowerCase().startsWith("unauthorized")){e.next=34;break}return v.nav.logout(),e.abrupt("return");case 34:return e.next=36,this.showError(u(e.t0.message));case 36:case 37:case"end":return e.stop()}}),e,this,[[4,28]])})));return function(t,n,r,a){return e.apply(this,arguments)}}())},{key:"innerFetch",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.hostUrl+t,e.next=3,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(t,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetch(r,n,t,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"callFetch",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var c,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=this.buildOptions()).method=n,c.body=r,e.next=5,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(t,c,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){var e=v.nav.language,t=v.nav.culture,n=new Headers;n.append("Content-Type","application/json;charset=UTF-8");var r=e;return t&&(r+="-"+t),n.append("Accept-Language",r),this.apiToken&&n.append("Authorization",this.apiToken),{headers:n}}}]),e}(),m=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"startWait",value:function(){v.nav.startWait()}},{key:"endWait",value:function(){v.nav.endWait()}},{key:"showError",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.nav.endWait(),e.next=3,v.nav.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();var j={},y={},O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i,s){var o;return Object(c.a)(this,n),(o=t.call(this,r,s)).apiName=void 0,o.url=void 0,o.showWaiting=s,o.apiName=a,o.token=i,o.url=e,o}return Object(s.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=j,n=new m):t=y,void 0===(r=t[this.apiName])){e.next=4;break}return e.abrupt("return",r);case 4:return r=new b(this.url,this.token,n),e.abrupt("return",t[this.apiName]=r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(function(){function e(t,n){Object(c.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=n}return Object(s.a)(e,[{key:"call",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return i=e.sent,e.next=5,i.callFetch(t,n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,e.next=3,this.getHttpChannel();case 3:return r=e.sent,e.next=6,r.get(this.path+t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.post(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.put(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.delete(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),k=function(){function e(t,n,r,a,i){Object(c.a)(this,e),this.channel=void 0,this.channel=new O(t,n,r,a,i)}return Object(s.a)(e,[{key:"call",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={call:t,params:n},e.next=3,this.channel.post("sql/call",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={call:t,params:n},e.next=3,this.channel.post("sql/call",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=typeof n,e.next="undefined"===e.t0?3:5;break;case 3:return c=[],e.abrupt("break",7);case 5:return c=f.a.clone(n),e.abrupt("break",7);case 7:return c.push(r),c.push(i),s={call:t,params:c},e.next=12,this.channel.post("sql/call",s);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={proc:t,params:n},e.next=3,this.channel.post("sql/query",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),x=function(){function e(t){Object(c.a)(this,e),this.miApi=void 0,this.user=void 0;var n=o;document.baseURI.indexOf("localmiserver")>0&&(n=u),this.user=t,this.miApi=new k(n,"miscan/","miapi",t.token,!1)}return Object(s.a)(e,[{key:"userId",get:function(){return this.user.id}},{key:"process",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.process(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"q_marketpe",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.query("q_marketpe",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"t_toppredictavg$query",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_toppredictavg$query",[t]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"q_stocks$page",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.page("q_stocks$page",t,n,r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"q_stockallinfo",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.miApi.query("q_stockallinfo",[t,n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"q_stockallinfotrack",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.miApi.query("q_stockallinfo@track",[t,n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"t_tagstock$query",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.miApi.query("t_tagstock$query",[this.user.id,t,n]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"t_tag$all",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.query("t_tag$all",[this.user.id]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"t_tag$save",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_tag$save",[this.user.id,void 0,t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"t_tagstock$add",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_tagstock$add",[this.user.id,t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"t_tagstock$del",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_tagstock$del",[this.user.id,t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"t_stockwarning$all",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_stockwarning$all",[this.user.id]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"t_stockwarning$add",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_stockwarning$add",[this.user.id,t,n,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"t_usersettings$save",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("t_usersettings$save",[this.user.id,"config",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"t_usersettings$query",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.query("t_usersettings$query",[this.user.id,"config"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"q_getlasttradeday",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("q_getlasttradeday",[]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"q_getnexttradedays",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("q_tradedays",[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"q_searchstock",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i,c,s,o,u){var l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("tv_searchstock",[n,r,i,c,s,o,u,t]);case 2:if(l=e.sent,!Array.isArray(l)){e.next=7;break}return e.abrupt("return",{$page:l});case 7:return e.abrupt("return",{$page:[]});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,c,s,o){return e.apply(this,arguments)}}()},{key:"q_stocksvalue",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.miApi.call("tv_stocksvalue",[t,n.join("\n")]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13);function a(e,t){var n,a,i,c=e.name;switch(e.type){case"id":n="FieldItemId",a="id";break;case"char":n="FieldItemString",a="string",i="string";break;case"smallint":case"int":case"bigint":n="FieldItemInt",a="integer",i="updown";break;case"dec":case"float":case"double":n="FieldItemNum",a="number",i="number"}return{name:c,type:a,isKey:t,widget:i,label:Object(r.d)(c),$FieldItemType:n}}},,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"CLogin",(function(){return y}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(14),h=n(31),d=(n(9),n(0)),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLogout=void 0,e}return Object(s.a)(n,[{key:"init",value:function(e){this.onLogout=e}},{key:"header",value:function(){return!0!==this.isWebNav&&"\u5b89\u5168\u9000\u51fa"}},{key:"footer",value:function(){return Object(d.jsx)("div",{className:"mt-5 text-center justify-content-center",children:Object(d.jsx)("button",{className:"btn btn-outline-warning",onClick:l.nav.resetAll,children:"\u5347\u7ea7\u8f6f\u4ef6"})})}},{key:"back",get:function(){return"close"}},{key:"content",value:function(){return Object(d.jsxs)("div",{className:"m-5 border border-info bg-white rounded-3 p-5 text-center",children:[Object(d.jsx)("div",{children:"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"}),Object(d.jsx)("div",{className:"mt-5 text-center",children:Object(d.jsx)("button",{className:"btn btn-danger",onClick:this.onLogout,children:"\u5b89\u5168\u9000\u51fa"})})]})}}]),n}(h.b),p=n(125),v=[{name:"username",type:"string",required:!0,maxLength:100},{name:"password",type:"string",required:!0,maxLength:100},{name:"login",type:"submit"}],b=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onLogin=void 0,e.withBack=void 0,e.uiSchema={items:{username:{placeholder:"\u624b\u673a/\u90ae\u7bb1/\u7528\u6237\u540d",label:"\u767b\u5f55\u8d26\u53f7"},password:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},login:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u767b\u5f55"}}},e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,c,s,o,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.form.data,c=i.username,void 0!==(s=i.password)){t.next=5;break}return t.abrupt("return","something wrong, pwd is undefined");case 5:return t.next=7,e.onLogin(c,s);case 7:if(!0!==t.sent){t.next=10;break}return t.abrupt("return");case 10:return o=Object(p.a)(c),u=void 0!==o?o.caption:"\u7528\u6237\u540d",t.abrupt("return",u+"\u6216\u5bc6\u7801\u9519\uff01");case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("password"!==n){t.next=4;break}return t.next=3,e.onSubmit("login",r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"init",value:function(e){var t=e.onLogin,n=e.withBack;this.onLogin=t,this.withBack=n}},{key:"header",value:function(){return!0===this.withBack&&"\u767b\u5f55"}},{key:"content",value:function(){return Object(d.jsxs)("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center",children:[Object(d.jsx)("div",{className:"flex-fill"}),Object(d.jsxs)("div",{className:"w-20c",children:[Object(p.b)(),Object(d.jsx)("div",{className:"h-2c"}),Object(d.jsx)(l.Form,{schema:v,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsx)(l.Ax,{className:"btn btn-link",href:"/forget",children:"\u5fd8\u8bb0\u5bc6\u7801"}),Object(d.jsx)(l.Ax,{href:"/register",className:"btn btn-link",children:"\u6ce8\u518c\u8d26\u53f7"})]}),l.nav.privacyEntry()]}),Object(d.jsx)("div",{className:"flex-fill"}),Object(d.jsx)("div",{className:"flex-fill"})]})}}]),n}(h.b),m=n(21),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).schema=[{name:"orgPassword",type:"string",maxLength:60,required:!0},{name:"newPassword",type:"string",maxLength:60,required:!0},{name:"newPassword1",type:"string",maxLength:60,required:!0},{name:"submit",type:"submit"}],e.uiSchema={items:{orgPassword:{widget:"password",label:"\u539f\u5bc6\u7801",placeholder:"\u8f93\u5165\u539f\u6765\u7684\u5bc6\u7801"},newPassword:{widget:"password",label:"\u65b0\u5bc6\u7801",placeholder:"\u8f93\u5165\u65b0\u8bbe\u7684\u5bc6\u7801"},newPassword1:{widget:"password",label:"\u786e\u8ba4\u5bc6\u7801",placeholder:"\u518d\u6b21\u8f93\u5165\u65b0\u8bbe\u5bc6\u7801"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},e.onChange=void 0,e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,c,s,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.data,c=i.orgPassword,s=i.newPassword,o=i.newPassword1,s===o){t.next=4;break}return r.setError("newPassword1","\u65b0\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),t.abrupt("return");case 4:return t.next=6,e.onChange(c,s);case 6:if(!1!==t.sent){t.next=10;break}return r.setError("orgPassword","\u539f\u5bc6\u7801\u9519\u8bef"),t.abrupt("return");case 10:return l.nav.replace(Object(d.jsx)(l.Page,{header:"\u4fee\u6539\u5bc6\u7801",back:"close",children:Object(d.jsx)("div",{className:"m-3  text-success",children:"\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"})})),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"init",value:function(e){this.onChange=e}},{key:"header",value:function(){return"\u4fee\u6539\u5bc6\u7801"}},{key:"content",value:function(){return Object(d.jsx)(l.Form,{className:"m-3",schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,fieldLabelSize:2})}}]),n}(h.b),y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showLogin",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){var e=Object(i.a)(a.a.mark((function e(n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.n.login({user:n,pwd:r,guest:l.nav.guest});case 2:if(void 0!==(i=e.sent)){e.next=5;break}return e.abrupt("return",!1);case 5:return console.log("onLoginSubmit: user=%s pwd:%s",i.name,i.token),e.next=8,l.nav.userLogined(i,t);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.openVPage(b,{onLogin:r,withBack:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLogout",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(f,(function(){l.nav.logout(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVChangePassword",value:function(){return j}},{key:"showChangePassword",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getVChangePassword(),this.openVPage(t,function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new m.b("tv/",void 0),e.next=3,r.changePassword({orgPassword:t,newPassword:n});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(h.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));n(9);var r=n(14),a=n(13),i=n.p+"static/media/logo.2d27ead7.svg",c=n(0);function s(){return r.nav.loginTop(Object(c.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[Object(c.jsx)("img",{className:"App-logo h-3c position-absolute",src:i,alt:"img"}),Object(c.jsxs)("div",{className:"h3 flex-fill text-center",children:[Object(c.jsx)("span",{className:"text-primary mr-3",children:"\u540c"}),Object(c.jsx)("span",{className:"text-danger",children:"\u82b1"})]})]}))}var o=[{type:"mobile",caption:"\u624b\u673a\u53f7",regex:a.i},{type:"email",caption:"\u90ae\u7bb1",regex:a.e}];function u(e){return o.find((function(t){return!0===t.regex.test(e)}))}},,,function(e,t,n){"use strict";var r=n(26);n.d(t,"a",(function(){return r.a}));var a=n(96);n.d(t,"b",(function(){return a.a}));n(58),n(95)},function(e,t,n){"use strict";var r=n(130);n.o(r,"Ax")&&n.d(t,"Ax",(function(){return r.Ax})),n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"IconText")&&n.d(t,"IconText",(function(){return r.IconText})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"UserView")&&n.d(t,"UserView",(function(){return r.UserView})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"setRes")&&n.d(t,"setRes",(function(){return r.setRes})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start}));var a=n(131);n.o(a,"Ax")&&n.d(t,"Ax",(function(){return a.Ax})),n.o(a,"CAppBase")&&n.d(t,"CAppBase",(function(){return a.CAppBase})),n.o(a,"CBase")&&n.d(t,"CBase",(function(){return a.CBase})),n.o(a,"CSub")&&n.d(t,"CSub",(function(){return a.CSub})),n.o(a,"Controller")&&n.d(t,"Controller",(function(){return a.Controller})),n.o(a,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return a.DropdownActions})),n.o(a,"EasyTime")&&n.d(t,"EasyTime",(function(){return a.EasyTime})),n.o(a,"Edit")&&n.d(t,"Edit",(function(){return a.Edit})),n.o(a,"FA")&&n.d(t,"FA",(function(){return a.FA})),n.o(a,"Form")&&n.d(t,"Form",(function(){return a.Form})),n.o(a,"IconText")&&n.d(t,"IconText",(function(){return a.IconText})),n.o(a,"Image")&&n.d(t,"Image",(function(){return a.Image})),n.o(a,"LMR")&&n.d(t,"LMR",(function(){return a.LMR})),n.o(a,"List")&&n.d(t,"List",(function(){return a.List})),n.o(a,"PropGrid")&&n.d(t,"PropGrid",(function(){return a.PropGrid})),n.o(a,"SearchBox")&&n.d(t,"SearchBox",(function(){return a.SearchBox})),n.o(a,"UserView")&&n.d(t,"UserView",(function(){return a.UserView})),n.o(a,"VPage")&&n.d(t,"VPage",(function(){return a.VPage})),n.o(a,"View")&&n.d(t,"View",(function(){return a.View})),n.o(a,"setRes")&&n.d(t,"setRes",(function(){return a.setRes})),n.o(a,"start")&&n.d(t,"start",(function(){return a.start}));n(132);var i=n(133);n.o(i,"Ax")&&n.d(t,"Ax",(function(){return i.Ax})),n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"IconText")&&n.d(t,"IconText",(function(){return i.IconText})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"setRes")&&n.d(t,"setRes",(function(){return i.setRes})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start}))},function(e,t){},function(e,t){},function(e,t,n){"use strict";n(10)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(3),a=n(4),i=n(5),c=n(6),s=n(9),o=n(16),u=n.n(o),l=n(0),h=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).menu=void 0,a.button=void 0,a.handleDocumentClick=function(e){document.removeEventListener("click",a.handleDocumentClick),document.removeEventListener("touchstart",a.handleDocumentClick),!1!==a.state.dropdownOpen&&a.menu&&a.toggle()},a.toggle=function(){var e=a.state.dropdownOpen;e=!e,a.setState({dropdownOpen:e}),!0===e&&setTimeout((function(){document.addEventListener("click",a.handleDocumentClick),document.addEventListener("touchstart",a.handleDocumentClick)}),10)},a.state={dropdownOpen:!1},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.icon,r=t.content,a=t.actions,i=t.isRight,c=t.className,s=t.containerClass,o=t.itemIconClass,h=t.itemCaptionClass;void 0===i&&(i=!0);var d=a.some((function(e){return!!e&&void 0!==e.icon})),f=this.state.dropdownOpen,p=c||"cursor-pointer dropdown-toggle btn btn-sm";return Object(l.jsxs)("div",{className:u()("dropdown",s),children:[Object(l.jsxs)("button",{ref:function(t){return e.button=t},className:p,"data-toggle":"dropdown","aria-expanded":f,onClick:this.toggle,children:[null!==n&&Object(l.jsx)("i",{className:u()("fa fa-fw ","fa-"+(n||"ellipsis-v"))}),r&&Object(l.jsx)("span",{className:"ml-1",children:r})]}),Object(l.jsx)("div",{ref:function(t){return e.menu=t},className:u()({"dropdown-menu":!0,"dropdown-menu-right":i,show:f}),children:a.map((function(e,t){if(!e)return Object(l.jsx)("div",{className:"dropdown-divider"},t);var n,r=e.icon,a=e.caption,i=e.action,c=e.iconClass,s=e.captionClass;if(void 0===r&&void 0===a)return Object(l.jsx)("div",{className:"dropdown-divider"});if(!0===d&&(void 0!==r&&(r="fa-"+r),c||(c="text-info"),n=Object(l.jsx)("i",{className:u()("mr-2","fa",r,"fa-fw",c||o),"aria-hidden":!0})),void 0===i)return Object(l.jsxs)("h6",{className:"dropdown-header",children:[n," ",a]});return Object(l.jsxs)("a",{className:"dropdown-item",href:"#/",onClick:function(e){e.preventDefault(),i()},onTouchStart:function(e){i()},children:[n," ",Object(l.jsx)("span",{className:s||h,children:a})]},t)}))})]})}}]),n}(s.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n(4),i=n(5),c=n(6),s=n(9),o=n(37),u={md:function(e,t){return"".concat(e,"-").concat(t)},ymd:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},yesterday:"Yday",today:"Today",tomorrow:"Tmw",$zh:{md:function(e,t){return"".concat(e,"\u6708").concat(t,"\u65e5")},ymd:function(e,t,n){return"".concat(e,"\u5e74").concat(t,"\u6708").concat(n,"\u65e5")},yesterday:"\u6628\u5929",today:"\u4eca\u5929",tomorrow:"\u660e\u5929"},$en:{md:function(e,t){return"".concat(e,"-").concat(t)},ymd:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},yesterday:"Yday",today:"Today",tomorrow:"Tmw"}};function l(e){return u[e]}function h(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}var a,i,c,s,o,u,h=new Date,d=n;a=h.getTime()-d.getTime();var f=d.getHours(),p=d.getMinutes();i=h.getDate(),c=d.getDate(),s=d.getMonth()+1,o=d.getFullYear(),u=h.getFullYear();var v=!1,b=a<-864e5?o===u?(v=!0,l("md")(s,c)):(v=!0,l("ymd")(o,s,c)):a<864e5?c!==i?(v=!0,l(a<0?"tomorrow":"yesterday")):!0===t?(v=!0,""):l("today"):o===u?l("md")(s,c):l("ymd")(o,s,c),m=f+(p<10?":0":":")+p;return!0===v&&!0===r?b+" "+m:b}Object(o.f)(u,u);s.Component;var d=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props;return h(e.date,!0,e.always)}}]),n}(s.Component)},function(e,t,n){"use strict";var r=n(3),a=n(4),i=n(5),c=n(6),s=n(9),o=n(16),u=n.n(o),l=n(14),h=n(0);s.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(9),h=n(16),d=n.n(h),f=n(13),p=n(0),v=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).input=void 0,e.button=void 0,e.key=null,e.onChange=function(t){e.key=t.target.value,void 0!==e.key&&(e.key=e.key.trim(),""===e.key&&(e.key=void 0)),console.log("key = "+e.key),!0===e.props.allowEmptySearch||(e.button.disabled=void 0===e.key||0===e.key.length)},e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),null===e.key&&(e.key=e.props.initKey||""),!0===e.props.allowEmptySearch){t.next=7;break}if(e.key){t.next=5;break}return t.abrupt("return");case 5:e.input&&(e.input.disabled=!0),e.button&&(e.button.disabled=!0);case 7:return t.next=9,e.props.onSearch(e.key);case 9:e.input&&(e.input.disabled=!1),e.button&&(e.button.disabled=!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"clear",value:function(){this.input&&(this.input.value="")}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,i=r.inputClassName,c=r.onFocus,s=r.label,o=r.placeholder,u=r.buttonText,l=r.maxLength;switch(r.size){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return!0===f.f.isMobile&&(t="off"),Object(p.jsx)("form",{className:a,onSubmit:this.onSubmit,autoComplete:t,children:Object(p.jsxs)("div",{className:d()("input-group",e),children:[s&&Object(p.jsx)("div",{className:"input-group-addon align-self-center mr-2",children:s}),Object(p.jsx)("input",{ref:function(e){return n.input=e},onChange:this.onChange,type:"text",name:"key",onFocus:c,className:d()("form-control",i||"border-primary"),placeholder:o,defaultValue:this.props.initKey,maxLength:l}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsxs)("button",{ref:function(e){return n.button=e},className:"btn btn-primary",type:"submit",disabled:!0!==this.props.allowEmptySearch,children:[Object(p.jsx)("i",{className:"fa fa-search"}),Object(p.jsx)("i",{className:"fa"}),u]})})]})})}}]),n}(l.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(3),a=n(4),i=(n(9),n(16)),c=n.n(i),s=n(18),o=n(11),u=n(8),l=n(21),h=n(0),d=new(function(){function e(t){Object(r.a)(this,e),this.loader=void 0,this.onLoaded=void 0,this.map=Object(u.p)(new Map),void 0===t&&(t=function(e){return l.n.user(e)}),this.loader=t}return Object(a.a)(e,[{key:"use",value:function(e,t){e&&("object"===typeof e&&(e=e.id),e&&(this.onLoaded=t,e=Number(e),void 0===this.map.get(e)&&this.map.set(e,e)))}},{key:"getValue",value:function(e){var t=this;if(e){switch(typeof e){case"object":if(!(e=e.id))return}var n=this.map.get(e);if(n)switch(typeof n){default:return n;case"number":return n<0||(this.map.set(e,-e),this.loader(e).then((function(n){n||(n=null),t.map.set(e,n),t.onLoaded&&t.onLoaded(n)})).catch((function(e){console.error(e)}))),e}}}}]),e}())(void 0),f=(Object(o.a)((function(e){var t=e.className,n=e.style,r=e.id,a=e.altImage,i=e.noneImage,o=d.getValue(r);switch(typeof o){case"undefined":case"number":return Object(h.jsx)("div",{className:c()(t,"image-none"),style:n,children:i||Object(h.jsx)("i",{className:"fa fa-file-o"})})}var u=o.icon;return u?(!0===u.startsWith(":")&&(u=s.b.resUrl+u.substr(1)),Object(h.jsx)("img",{src:u,className:t,alt:"img",style:n,onError:function(e){e.currentTarget.src=a||"https://tv.jkchemical.com/imgs/0001.png"}})):Object(h.jsx)("div",{className:c()(t,"image-none"),style:n,children:Object(h.jsx)("i",{className:"fa fa-file-o"})})})),Object(o.a)((function(e){var t=e.id,n=e.user,r=e.render,a=e.onLoaded;if(null===n)return Object(h.jsx)(h.Fragment,{children:"null"});switch(typeof n){case"undefined":n=d.getValue(t);break;case"object":var i=n.id;p(i,a),n=d.getValue(i);break;case"number":p(n,a),n=d.getValue(n);break;case"string":p(Number(n),a),n=d.getValue(Number(n));break;default:n=void 0}switch(typeof n){case"undefined":case"number":return Object(h.jsx)(h.Fragment,{children:n})}return r(n)})));function p(e,t){e&&("object"===typeof e&&(e=e.id),d.use(e,t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),a=(n(9),n(16)),i=n.n(a),c=n(18),s=n(0),o=function(e){var t=e.href,n=e.children,a=e.className,o=e.onClick;if(!0===c.b.isWebNav){var u=e.aClassName;if(!t)return Object(s.jsx)("span",{className:"text-danger",children:"Error: href not defined in Ax"});return Object(s.jsx)("a",Object(r.a)(Object(r.a)({},e),{},{className:i()(a,u),onClick:function(e){var n;return e.preventDefault(),o?n=o(e):(c.b.navigate(t),n=!1),n},children:n}))}var l=e.naClassName;return o||(o=function(){return!1===c.b.openSysPage(t)&&c.b.navigate(t),!1}),Object(s.jsx)("span",{className:i()(a,"cursor-pointer",l),onClick:o,children:n})}},function(e,t,n){"use strict";n(9),n(11),n(0)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(10),c=n(2),s=n(3),o=n(4),u=n(13),l=function(){function e(t){var n=this;Object(s.a)(this,e),this.uq=void 0,this.modifyMax=void 0,this.cacheTimer=void 0,this.loadIds=function(){n.clearCacheTimer();var e=n.uq.tuids;for(var t in e){e[t].cacheIds()}},this.uq=t}return Object(o.a)(e,[{key:"cacheTuids",value:function(e){this.clearCacheTimer(),this.cacheTimer=u.f.setTimeout("TuidsCache.cacheTuids",this.loadIds,e)}},{key:"clearCacheTimer",value:function(){void 0!==this.cacheTimer&&(u.f.clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}},{key:"pullModify",value:function(e){if(void 0!==e){var t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));var n=this.modifyMax,r=n.max;if(!(t-n.seconds<3600)&&!(e<=r)){var a=[],i=this.uq.tuids;for(var c in i)a.push(c);0!==a.length&&(this.modifyMax.seconds=t,this.innerPullModify(a.join("\t")))}}}},{key:"innerPullModify",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,o,u,l,h,d,f,p,v,b,m,j,y,O,k,x,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.uq,r=n.uqApi,c=n.tuids,s=this.modifyMax.max,e.next=4,r.queueModify(s,30,t);case 4:o=e.sent,u={},l=0,h=Object(i.a)(o.queue),e.prev=8,h.s();case 10:if((d=h.n()).done){e.next=24;break}if(f=d.value,p=f.id,v=f.entity,b=f.key){e.next=15;break}return e.abrupt("continue",22);case 15:if(void 0!==(m=c[v])){e.next=18;break}return e.abrupt("continue",22);case 18:void 0===(j=u[v])&&(j=u[v]={tuid:m,ids:[]}),j.ids.push(b),p>l&&(l=p);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.t1=a.a.keys(u);case 33:if((e.t2=e.t1()).done){e.next=40;break}return y=e.t2.value,O=u[y],k=O.tuid,x=O.ids,e.next=38,k.modifyIds(x);case 38:e.next=33;break;case 40:g=Math.floor(Date.now()/1e3),this.modifyMax={max:l,seconds:g},this.uq.localModifyMax.set(this.modifyMax);case 43:case"end":return e.stop()}}),e,this,[[8,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},,function(e,t,n){"use strict";var r=n(145);n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"IconText")&&n.d(t,"IconText",(function(){return r.IconText})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"UserView")&&n.d(t,"UserView",(function(){return r.UserView})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav}));var a=n(146);n.o(a,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return a.DropdownActions})),n.o(a,"EasyTime")&&n.d(t,"EasyTime",(function(){return a.EasyTime})),n.o(a,"Edit")&&n.d(t,"Edit",(function(){return a.Edit})),n.o(a,"FA")&&n.d(t,"FA",(function(){return a.FA})),n.o(a,"Form")&&n.d(t,"Form",(function(){return a.Form})),n.o(a,"IconText")&&n.d(t,"IconText",(function(){return a.IconText})),n.o(a,"Image")&&n.d(t,"Image",(function(){return a.Image})),n.o(a,"LMR")&&n.d(t,"LMR",(function(){return a.LMR})),n.o(a,"List")&&n.d(t,"List",(function(){return a.List})),n.o(a,"NavView")&&n.d(t,"NavView",(function(){return a.NavView})),n.o(a,"Page")&&n.d(t,"Page",(function(){return a.Page})),n.o(a,"PropGrid")&&n.d(t,"PropGrid",(function(){return a.PropGrid})),n.o(a,"SearchBox")&&n.d(t,"SearchBox",(function(){return a.SearchBox})),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return a.TabCaptionComponent})),n.o(a,"UserView")&&n.d(t,"UserView",(function(){return a.UserView})),n.o(a,"nav")&&n.d(t,"nav",(function(){return a.nav}));var i=n(147);n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"IconText")&&n.d(t,"IconText",(function(){return i.IconText})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"NavView")&&n.d(t,"NavView",(function(){return i.NavView})),n.o(i,"Page")&&n.d(t,"Page",(function(){return i.Page})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return i.TabCaptionComponent})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"nav")&&n.d(t,"nav",(function(){return i.nav}));var c=n(148);n.o(c,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return c.DropdownActions})),n.o(c,"EasyTime")&&n.d(t,"EasyTime",(function(){return c.EasyTime})),n.o(c,"Edit")&&n.d(t,"Edit",(function(){return c.Edit})),n.o(c,"FA")&&n.d(t,"FA",(function(){return c.FA})),n.o(c,"Form")&&n.d(t,"Form",(function(){return c.Form})),n.o(c,"IconText")&&n.d(t,"IconText",(function(){return c.IconText})),n.o(c,"Image")&&n.d(t,"Image",(function(){return c.Image})),n.o(c,"LMR")&&n.d(t,"LMR",(function(){return c.LMR})),n.o(c,"List")&&n.d(t,"List",(function(){return c.List})),n.o(c,"NavView")&&n.d(t,"NavView",(function(){return c.NavView})),n.o(c,"Page")&&n.d(t,"Page",(function(){return c.Page})),n.o(c,"PropGrid")&&n.d(t,"PropGrid",(function(){return c.PropGrid})),n.o(c,"SearchBox")&&n.d(t,"SearchBox",(function(){return c.SearchBox})),n.o(c,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return c.TabCaptionComponent})),n.o(c,"UserView")&&n.d(t,"UserView",(function(){return c.UserView})),n.o(c,"nav")&&n.d(t,"nav",(function(){return c.nav}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,function(e,t){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return ce}));n(83);var r=n(12),a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(15),l=n(5),h=n(6),d=n(8),f=n(7),p=n(28),v=n(29),b=n(40),m=n(0),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"header",value:function(){return this.controller.editHeader}},{key:"content",value:function(){var e=this.controller,t=e.cFormView,n=e.item;return Object(m.jsx)("div",{className:"p-3",children:t.renderForm(n)})}}]),n}(f.VPage),y=n(11),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"header",value:function(){return this.controller.midID.itemHeader}},{key:"right",value:function(){return this.controller.renderViewRight()}},{key:"content",value:function(){var e=this,t=Object(y.a)((function(){var t=e.controller,n=t.item,r=t.midID.props;return Object(m.jsx)("div",{className:"py-3",children:Object(m.jsx)(f.PropGrid,{rows:r,values:n})})}));return Object(m.jsx)(t,{})}}]),n}(f.VPage),k=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("button",{className:"btn btn-sm btn-primary mr-2",onClick:function(){return e.controller.onItemEdit()},children:Object(m.jsx)(f.FA,{name:"pencil-square-o"})})}}]),n}(f.View),x={$zh:{new:"\u65b0\u5efa",edit:"\u4fee\u6539",list:"\u5217\u8868"},$en:{new:"New",edit:"Edit",list:"List"}},g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).item=null,r.midID=void 0,r.cFormView=void 0,r.cList=void 0,r.midIDList=void 0,r.valueChanged=void 0,r.renderListRight=void 0,r.renderListTop=void 0,r.renderListBottom=void 0,r.onSubmit=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveID(n.data);case 2:r.closePage();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.renderItem=function(e,t){var n=r.midID.ID;return n?n.render(e):Object(p.e)(e,t)},r.onItemClick=function(e){Object(d.r)((function(){r.item=e,r.onItemView()}))},r.onItemEdit=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.valueChanged=!1,e.next=3,r.midID.init();case 3:r.createFormView(),r.openVPage(j);case 5:case"end":return e.stop()}}),e)}))),r.onItemNew=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.cFormView.setNO(r.midID.ID);case 2:Object(d.r)((function(){r.item=void 0,r.openVPage(j)}));case 3:case"end":return e.stop()}}),e)}))),Object(d.o)(Object(u.a)(r),{item:d.p}),r.setRes(x),r.setRes(e.res),r.midID=e,r}return Object(o.a)(n,[{key:"beforeStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.midID.init();case 2:return this.createFormView(),this.midIDList=this.midID.createMidIDList(),this.midIDList.onRightClick=this.onItemNew,this.midIDList.renderItem=this.renderItem,this.midIDList.onItemClick=this.onItemClick,this.midIDList.renderRight=this.renderListRight,this.midIDList.renderTop=this.renderListTop,this.midIDList.renderBottom=this.renderListBottom,this.cList=this.createCList(),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.valueChanged=!1,e.next=3,this.cList.call();case 3:this.returnCall(this.valueChanged);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createFormView",value:function(){var e=this.midID,t=e.ID,n=e.IDUI.fieldCustoms,r=new b.d(t.ui,n,t.t);this.cFormView=new b.c(r),this.cFormView.onSubmit=this.onSubmit}},{key:"createCList",value:function(){return new v.a(this.midIDList)}},{key:"onItemView",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(O);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveID",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null===(n=this.item)||void 0===n?void 0:n.id,s=Object(r.a)(Object(r.a)({},t),{},{id:c}),e.next=4,this.midID.saveID(s);case 4:return(o=e.sent)&&(c=o),null===(a=this.midIDList)||void 0===a||a.update(c,s),Object(d.r)((function(){u.item?Object.assign(u.item,s):u.item=s})),this.valueChanged=!0,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"itemHeader",get:function(){var e;return null!==(e=this.midID.itemHeader)&&void 0!==e?e:this.midID.ID.ui.label}},{key:"editHeader",get:function(){return this.t(this.item?"edit":"new")+" "+this.itemHeader}},{key:"renderViewRight",value:function(e){return e&&(this.item=e),this.renderView(k)}}]),n}(f.Controller),w=n(10),I=n(41),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this,e)).ID=void 0,a.ID=r,a}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPageItems",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.ID({IDX:this.ID,id:void 0,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){t.id=e,this.listPageItems.update(t)}}]),n}(v.c),S=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,e,r)).IX=void 0,c.ix=void 0,c.IX=a,c.ix=i,c}return Object(o.a)(n,[{key:"loadPageItems",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.IX({IX:this.IX,IDX:[this.ID],ix:this.ix,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(C),N=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this,e)).IDUI=void 0,a.ID=void 0,a.listHeader=void 0,a.itemHeader=void 0,a._itemSchema=void 0,a._uiSchema=void 0,a._props=void 0,a.IDUI=r,a.ID=r.ID,a}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSchema();case 2:return e.next=4,this.buildItemSchema(this.IDUI);case 4:this._itemSchema=e.sent,this._uiSchema=this.buildUISchema(this.IDUI);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createMidIDList",value:function(){var e=new C(this.uq,this.ID);return e.header=this.listHeader,e}},{key:"buildUISchema",value:function(e){var t=e.ID,n={};this._uiSchema={items:n};var r=t.ui.fields;if(r){var a,i=Object(w.a)(this._itemSchema);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=c.name;Object.assign(c,r[s]),n[s]=c}}catch(o){i.e(o)}finally{i.f()}}return n.submit={label:"\u63d0\u4ea4",className:"btn btn-primary",widget:"button"},this._uiSchema}},{key:"loadSchema",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ID.loadSchema();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.ID({IDX:this.ID,id:t,page:void 0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveID",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={})[this.ID.name]=[t],e.next=4,this.uq.Acts(n);case 4:if(r=e.sent,a=r[this.ID.name]){e.next=8;break}return e.abrupt("return");case 8:return e.abrupt("return",a[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"uiSchema",get:function(){return this._uiSchema}},{key:"props",get:function(){return void 0!==this._props?this._props:this._props=this.buildGridProps(this.IDUI.ID)}}]),n}(I.Mid),A=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i,c){var o;return Object(s.a)(this,n),(o=t.call(this,e,r)).IX=void 0,o.ix=void 0,o.IXs=void 0,o.IX=a,o.ix=i,o.IXs=c,o}return Object(o.a)(n,[{key:"createMidIDList",value:function(){var e=new S(this.uq,this.ID,this.IX,this.ix);return e.header=this.listHeader,e}},{key:"saveID",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ID:this.ID,IX:this.IX,IXs:this.IXs,values:[{ix:this.ix,xi:t}]},e.next=3,this.uq.ActIX(n);case 3:if(r=e.sent,a=r[0]){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(N),_=n(36),D=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,e,void 0)).ID=void 0,i.IDX=void 0,i.ID=r,i.IDX=a,i}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.ID.loadSchema(),this.IDX.loadSchema()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPageItems",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.ID({IDX:this.ID,id:void 0,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(v.c),P={$zh:{day:"\u65e5",week:"\u5468",month:"\u6708",year:"\u5e74"},$en:{day:"Day",week:"Week",month:"Month",year:"Year"}},T=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"header",value:function(){return"Edit"}},{key:"content",value:function(){var e=this,t=this.controller.midIDX.props;return Object(m.jsx)("div",{className:"py-3",children:t.map((function(t,n){switch(t.type){default:return null;case"string":return e.renderStringProp(t);case"integer":case"number":return e.renderNumberProp(t)}}))})}},{key:"renderStringProp",value:function(e){return Object(m.jsx)("div",{className:"px-3 py-2 bg-white mb-1 cursor-pointer",children:JSON.stringify(e)},e.name)}},{key:"renderNumberProp",value:function(e){var t=this,n=Object(y.a)((function(){var n=e.name;return t.controller.spanValues?Object(m.jsx)("div",{className:"px-3 py-2 bg-white mb-1 cursor-pointer",onClick:function(){return t.openVPage(R,e)},children:Object(m.jsx)(f.LMR,{left:Object(m.jsx)("b",{children:e.label}),right:Object(m.jsx)(f.FA,{name:"pencil-square-o",className:"align-self-center"}),children:Object(m.jsx)("div",{className:"mr-5 text-right",children:t.controller.spanValues[n]})})},n):null}));return Object(m.jsx)(n,{})}}]),n}(f.VPage),R=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).prop=void 0,r.date=void 0,r.value=void 0,r.dateInput=void 0,r.timeInput=void 0,r.disabled=!0,r.onValueChange=function(e){var t=e.currentTarget.value.trim();r.disabled=0===t.length;var n=Number(t);!1===Number.isNaN(n)&&(r.value=n)},r.onSave=Object(c.a)(i.a.mark((function e(){var t,n,a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dateInput?(c=r.dateInput.valueAsDate,s=null===(n=r.dateInput)||void 0===n?void 0:n.valueAsNumber,o=null===(a=r.timeInput)||void 0===a?void 0:a.valueAsNumber,t=s+o+60*c.getTimezoneOffset()*1e3):t=Date.now(),e.next=3,r.controller.saveFieldValue(r.prop.name,t,r.value);case 3:r.closePage();case 4:case"end":return e.stop()}}),e)}))),Object(d.o)(Object(u.a)(r),{disabled:d.p}),r}return Object(o.a)(n,[{key:"init",value:function(e){this.prop=e,this.date=new Date}},{key:"header",value:function(){return this.prop.label}},{key:"right",value:function(){var e=this,t=Object(y.a)((function(){return Object(m.jsx)("button",{className:"btn btn-sm btn-success mr-2",disabled:e.disabled,onClick:e.onSave,children:e.t("submit")})}));return Object(m.jsx)(t,{})}},{key:"content",value:function(){var e,t=this,n=this.prop.time,r=this.date.getFullYear(),a=this.date.getMonth()+1,i=this.date.getDate(),c=this.date.getHours(),s=this.date.getMinutes(),o="".concat(r,"-").concat(Object(f.left0)(a,2),"-").concat(Object(f.left0)(i,2));return!0===n&&(e=Object(m.jsxs)("div",{className:"input-group mb-3",children:[Object(m.jsx)("span",{className:"w-8c input-group-text",children:this.t("date")}),Object(m.jsx)("input",{ref:function(e){return t.dateInput=e},type:"date",className:"form-control",defaultValue:o}),Object(m.jsx)("input",{ref:function(e){return t.timeInput=e},type:"time",className:"form-control",defaultValue:"".concat(Object(f.left0)(c,2),":").concat(Object(f.left0)(s,2))})]})),Object(m.jsxs)("div",{className:"p-3",children:[e,Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("span",{className:"w-8c input-group-text",children:this.t("value")}),Object(m.jsx)("input",{type:"number",className:"form-control",onChange:this.onValueChange})]})]})}}]),n}(f.VPage),E=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(e,t){var n=e.t,r=e.v,a=e.u,i=Object(m.jsx)("div",{className:"w-12c",children:Object(m.jsx)(f.EasyTime,{date:new Date(n)})}),c=Object(m.jsx)(f.UserView,{user:a,render:function(e){var t=e.name,n=e.nick;return Object(m.jsx)("small",{className:"text-muted",children:n||t})}});return Object(m.jsx)("div",{className:"px-3 py-2",children:Object(m.jsx)(f.LMR,{className:"w-100",left:i,right:c,children:r})})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(f.List,{items:this.controller.historyItems,item:{render:this.renderItem,key:function(e){return e.t}}})})}}]),n}(f.View),F=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"header",value:function(){return this.controller.field}},{key:"content",value:function(){return this.renderVm(E)}}]),n}(f.VPage),V=n(30),L=["week","month"],M={title:{display:!1},maintainAspectRatio:!1},B=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).currentIndex=0,Object(d.o)(Object(u.a)(r),{currentIndex:d.p}),r}return Object(o.a)(n,[{key:"header",value:function(){return"View"}},{key:"right",value:function(){var e=this;return Object(m.jsx)("button",{className:"btn btn-sm btn-primary mr-2",onClick:function(){return e.controller.onItemEdit()},children:Object(m.jsx)(f.FA,{name:"pencil-square-o"})})}},{key:"content",value:function(){var e=this,t=Object(y.a)((function(){var t=e.controller,n=t.spanValues,r=t.midIDX,a=t.timeSpan,i=t.prevTimeSpan,c=t.nextTimeSpan,s=t.dayValues;if(null===n)return null;var o=r.props,u={labels:a.labels,datasets:[{label:"",data:Object(d.s)(s),backgroundColor:"lightgreen",borderWidth:1}]},l=o[e.currentIndex],h=l.label,p=l.name,v=function(e,t){return Object(m.jsx)("div",{className:"p-3 "+(t?"cursor-pointer":"text-muted"),onClick:t,children:Object(m.jsx)(f.FA,{name:e})})},b=v("chevron-left",i),j=!0===a.canNext?v("chevron-right",c):v("square-o",void 0);return Object(m.jsxs)("div",{className:"py-3",children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:L.map((function(t){var n="col text-center p-2 cursor-pointer ",r={borderBottomWidth:"0.15rem",borderBottomStyle:"solid"};return a.type===t?(n+="text-primary font-weight-bold",r.borderBottomColor="blue"):(n+="text-muted",r.borderBottomColor="lightgray"),Object(m.jsx)("div",{className:n,style:r,onClick:function(){return e.tabClick(t)},children:e.t(t)},t)}))})}),Object(m.jsx)(f.LMR,{className:"text-center align-items-center",left:b,right:j,children:a.title}),Object(m.jsxs)("div",{className:"mt-3 mx-3 text-center cursor-pointer",onClick:function(){return e.onFieldHistory(p)},children:[Object(m.jsx)("h4",{className:"d-inline",children:h}),Object(m.jsxs)("span",{className:"text-info small",children:[" ",Object(m.jsx)(f.FA,{name:"angle-double-right"})," \u67e5\u770b\u660e\u7ec6"]})]}),Object(m.jsx)("div",{className:"p-3 h-12c",children:Object(m.jsx)(V.Bar,{data:u,width:100,height:50,options:M})}),Object(m.jsx)("div",{className:"d-flex flex-wrap p-1",children:o.map((function(t,r){var a=t,i=a.name,c=a.label,s=n[i],o=s?Object(m.jsx)("b",{className:"h3 mb-0",children:s}):Object(m.jsx)("small",{className:"text-muted",children:"0"}),u="m-1 w-8c h-8c d-flex flex-column align-items-center justify-content-center bg-white px-3 cursor-pointer border rounded ";return u+=r===e.currentIndex?" border-primary":" ",Object(m.jsxs)("div",{className:u,onClick:function(){return e.onFieldClick(t,r)},children:[Object(m.jsx)("div",{className:"my-3 h-4c d-flex align-items-center",children:o}),Object(m.jsx)("div",{className:"mb-3",children:c})]},r)}))})]})}));return Object(m.jsx)(t,{})}},{key:"tabClick",value:function(e){this.controller.setTimeSpan(e)}},{key:"onFieldClick",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,s,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.controller.midIDX,a=r.props,this.currentIndex!==n){e.next=8;break}return c=a[this.currentIndex],s=c.name,e.next=7,this.controller.showFieldHistory(s);case 7:return e.abrupt("return");case 8:Object(d.r)((function(){o.currentIndex=n;var e=a[o.currentIndex].name;o.controller.setCurrentField(e)}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onFieldHistory",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.showFieldHistory(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f.VPage),q=(f.Controller,I.Mid,function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).midIXList=void 0,r.setRes(e.res),r.midIXList=e,r}return Object(o.a)(n,[{key:"update",value:function(e){this.midIXList.update(e)}}]),n}(v.a)),U=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,e,void 0)).IX=void 0,c.ID=void 0,c.id=void 0,c.IX=r,c.ID=a,c.id=i,c}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.IX.loadSchema();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPageItems",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.IX({IX:this.IX,IDX:this.ID?[this.ID]:void 0,ix:this.id,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=this;Object(d.r)((function(){var n=t.listPageItems._items;if(n){var r=e.ix,a=e.xi;if(a<0){var i=n.findIndex((function(e){return e.xi===-a&&e.xi===a}));i>=0&&n.splice(i,1)}else{n.find((function(e){return e.xi===a&&e.xi===a}))||n.unshift({ix:r,xi:a})}}}))}}]),n}(v.c),H=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a,i,c){var o;return Object(s.a)(this,n),(o=t.call(this,e,c)).IX=void 0,o.ID=void 0,o.id=void 0,o.IX=r,o.ID=a,o.id=i,o}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(I.Mid),X=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).midIX=void 0,r.onItemEdit=function(){},r.onItemClick=function(e){},r.setRes(e.res),r.midIX=e,r}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.midIX,n=t.uq,r=t.IX,a=t.ID,c=t.id,(s=new U(n,r,a,c)).onRightClick=this.onItemEdit,s.renderItem=void 0,s.onItemClick=this.onItemClick,s.renderRight=void 0,o=new q(s),e.next=9,o.start();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f.Controller),W=n(51),G=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).cIXList=void 0,e.onListRightClick=Object(c.a)(i.a.mark((function t(){var n,r,a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.midIX,r=n.uq,a=n.ID,c=n.IX,s=n.id,(o=new W.MidIXSelectList(r,a,c,s)).renderItem=void 0,o.onSelectChange=e.onSelectChange,u=new W.CIXSelect(o),t.next=7,u.start();case 7:case"end":return t.stop()}}),t)}))),e.onSelectChange=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},c=e.midIX,s=c.IX,o=c.id,!1===r&&(o=-o),u={ix:o,id:n.id},a[s.name]=[u],t.next=7,e.midIX.uq.Acts(a);case 7:t.sent,e.cIXList.update(u);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.midIX,n=t.uq,r=t.IX,a=t.ID,c=t.id,(s=new U(n,r,a,c)).onRightClick=this.onListRightClick,s.renderItem=void 0,s.onItemClick=void 0,s.renderRight=void 0,this.cIXList=new q(s),e.next=9,this.cIXList.start();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(X),$=(I.Mid,f.Controller,f.VPage,f.VPage,I.Mid,function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).tagGroups=void 0,e}return Object(o.a)(n,[{key:"init",value:function(){var e=this.controller,t=e.midTag,n=e.itemTags.typeColl;this.tagGroups=[];var r,a=Object(w.a)(t.typeArr);try{for(a.s();!(r=a.n()).done;){var i,c=r.value,s=c.id,o=c.name,u=n[s],l=[],h={id:s,name:o,checks:l},d=Object(w.a)(c.sub);try{var f=function(){var e=i.value,t=e.id,n=void 0!==u&&u.sub.findIndex((function(e){return e.id===t}))>=0;l.push({tag:e,selected:n})};for(d.s();!(i=d.n()).done;)f()}catch(p){d.e(p)}finally{d.f()}this.tagGroups.push(h)}}catch(p){a.e(p)}finally{a.f()}}},{key:"header",value:function(){return"select"}},{key:"content",value:function(){var e=this,t=this.controller,n=t.midTag,r=t.itemTags.item;return Object(m.jsxs)("div",{className:"px-3",children:[Object(m.jsx)("div",{className:"my-3",children:n.ID.render(r)}),this.tagGroups.map((function(t){return e.renderType(t)}))]})}},{key:"renderType",value:function(e){var t=this,n=e.id,r=e.name,a=e.checks;return Object(m.jsxs)("div",{className:"my-3",children:[Object(m.jsx)("div",{children:Object(m.jsx)("b",{children:r})}),Object(m.jsx)("div",{className:"form-check form-check-inline mt-1",children:a.map((function(e){var n=e.tag,r=e.selected,a=n.id,i=n.name;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("label",{className:"form-check-label mr-3",children:[Object(m.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:function(e){return t.controller.onTagSelectChanged(n,e.currentTarget.checked)},defaultChecked:r}),i]},a)})}))})]},n)}}]),n}(f.VPage)),K=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var o;return Object(s.a)(this,n),(o=t.call(this)).cIDTagList=void 0,o.itemTags=void 0,o.midTag=void 0,o.onTagSelectChanged=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.cIDTagList.onTagSelectChanged(o.itemTags,t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o.setRes(a.res),o.cIDTagList=e,o.itemTags=r,o.midTag=a,o}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage($);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onItemClick",value:function(e){}},{key:"renderRight",value:function(){return null}}]),n}(f.Controller);function z(e){return Object(m.jsx)(m.Fragment,{children:e.map((function(e){var t=e.id,n=e.name;return Object(m.jsxs)("span",{className:"mr-3",children:[Object(m.jsx)("b",{children:n}),": ",J(e)]},t)}))})}function J(e){var t=Object(y.a)((function(){var t=e.sub;return Object(m.jsx)(m.Fragment,{children:t.map((function(e){var t=e.id,n=e.name;return Object(m.jsx)("span",{className:"mr-1",children:n},t)}))})}));return Object(m.jsx)(t,{})}v.a,v.d;var Q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"itemId",value:function(e){return e.item.id}},{key:"newItem",value:function(e,t){var n=t.item,a=t.typeArr,i=t.typeColl;return{item:Object(r.a)(Object(r.a)({},n),{},{id:e}),typeArr:a,typeColl:i}}},{key:"update",value:function(e){}}]),n}(p.b),Y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).tags=[],e.allTags=function(e){for(var t=document.getElementById("$all$tags$").getElementsByTagName("input"),n=0;n<t.length;n++){t[n].checked=e}},e}return Object(o.a)(n,[{key:"header",value:function(){return"tags"}},{key:"content",value:function(){var e=this,t=this.controller.midTag.typeArr,n=Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.controller.showID(e.tags)},children:"\u67e5\u770b"}),r=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{className:"btn btn-sm btn-outline-primary mr-3",onClick:function(){return e.allTags(!0)},children:"\u5168\u9009"}),Object(m.jsx)("button",{className:"btn btn-sm btn-outline-info",onClick:function(){return e.allTags(!1)},children:"\u5168\u6e05"})]});return Object(m.jsxs)("div",{className:"px-3",id:"$all$tags$",children:[t.map((function(t){return e.renderType(t)})),Object(m.jsx)("div",{className:"border-top py-3",children:Object(m.jsx)(f.LMR,{left:n,right:r})})]})}},{key:"renderType",value:function(e){var t=this,n=e.id,r=e.name,a=e.sub;return Object(m.jsxs)("div",{className:"my-3",children:[Object(m.jsx)("div",{children:Object(m.jsx)("b",{children:r})}),Object(m.jsx)("div",{className:"form-check form-check-inline mt-1",children:a.map((function(e){var n=e.id,r=e.name;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("label",{className:"form-check-label mr-3",children:[Object(m.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:function(n){return t.onTagSelectChanged(n,e)}}),r]},n)})}))})]},n)}},{key:"onTagSelectChanged",value:function(e,t){if(!0===e.currentTarget.checked)this.tags.push(t);else{var n=this.tags.findIndex((function(e){return e===t}));n>=0&&this.tags.splice(n,1)}}}]),n}(f.VPage),Z=(f.Controller,function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).midIDList=void 0,r.midIDList=e,r}return Object(o.a)(n,[{key:"beforeStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.midIDList.midTag.init();case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onItemClick",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.midIDList.midTag,r=new N(n.uq,{ID:n.ID}),e.next=4,r.init();case 4:new g(r).onItemClick(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderRight",value:function(){var e=this.midIDList,t=e.onRightClick,n=e.renderRight;return t?(null!==n&&void 0!==n?n:p.d)(t):null}},{key:"renderItem",value:function(e,t){var n=this.midIDList,r=n.midTag,a=n.renderItem,i=r.ID;return(null!==a&&void 0!==a?a:i.render)(e,t)}}]),n}(v.a)),ee=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r){var a;Object(s.a)(this,n);var i=e.uq,c=e.ID;return(a=t.call(this,i,c)).midTag=void 0,a.ids=void 0,a.ids=r,a}return Object(o.a)(n,[{key:"init",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.midTag.IX.loadSchema();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadPageItems",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.IXr({IX:this.midTag.IX,IDX:[this.ID],ix:this.ids,page:{start:t,size:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(C),te=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onRoleAdmin=Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.showRoleAdmin();case 1:case"end":return t.stop()}}),t)}))),e.onAccountant=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onManager=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.roleItems={$:{caption:"\u8bbe\u7f6e\u7528\u6237\u89d2\u8272",onClick:e.onRoleAdmin},accountant:{caption:"\u4f1a\u8ba1",onClick:e.onAccountant},manager:{caption:"\u7ecf\u7406",onClick:e.onManager}},e.renderRoleItem=function(t,n){var r=e.roleItems[t];if(!r)return null;var a=r.caption,i=r.onClick,c=Object(m.jsx)(f.FA,{name:"angle-right"});return Object(m.jsx)(f.LMR,{className:"px-3 py-2 cursor-pointer mt-1 bg-white",onClick:i,right:c,children:Object(m.jsx)("div",{children:a})},n)},e}return Object(o.a)(n,[{key:"header",value:function(){return this.t("backend")}},{key:"content",value:function(){var e=this,t=Object(y.a)((function(){var t=e.controller.roles;return Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:t.map(e.renderRoleItem)})})}));return Object(m.jsx)(t,{})}}]),n}(f.VPage),ne=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.newUser(r.data.userName);case 2:if(!(a=t.sent)){t.next=6;break}return r.setError("userName",a),t.abrupt("return");case 6:e.closePage();case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(c.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onClick(n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(o.a)(n,[{key:"header",value:function(){return"\u65b0\u589e\u89d2\u8272\u7528\u6237"}},{key:"content",value:function(){return Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(f.Form,{schema:[{name:"userName",required:!0,type:"string",maxLength:60},{name:"ok",type:"button"}],uiSchema:{items:{userName:{widget:"text",label:"\u7528\u6237\u8d26\u53f7",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u7684\u8d26\u53f7"},ok:{widget:"button",className:"btn btn-primary",label:"\u63d0\u4ea4"}}},onButtonClick:this.onClick,onEnter:this.onEnter})})}}]),n}(f.VPage),re=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){if(!t)return null;var r,a,i=t.user,c=t.roles,s=t.isDeleted,o=e.controller,u=o.roleCaptions,l=o.ixOfUsers,h=e.renderUser(i),d="bg-white border-top ";!0===n&&(d+="mb-1",h=Object(m.jsxs)(m.Fragment,{children:[h,Object(m.jsx)("small",{className:"ml-1 text-success",children:"[\u81ea\u5df1]"})]})),!0===s?(r=function(){return e.controller.restoreUser(t)},a="undo",h=Object(m.jsx)("del",{children:h})):(r=function(){return e.controller.deleteUser(t)},a="times");var p=Object(m.jsx)("div",{className:"p-3 cursor-pointer text-info",onClick:r,children:Object(m.jsx)(f.FA,{name:a})});return Object(m.jsx)(f.LMR,{className:d,left:Object(m.jsx)("div",{className:"p-3 w-12c",children:h}),right:p,children:Object(m.jsxs)("div",{className:"d-flex flex-wrap",children:[c.map((function(n,r){var a=u[r];return!0===s&&(a=Object(m.jsx)("del",{children:a})),Object(m.jsxs)("label",{className:"m-3",children:[Object(m.jsx)("input",{className:"mr-2",type:"checkbox",disabled:s,defaultChecked:n,onChange:function(n){return e.onRoleChange(n,r,t)}}),a]},r)})),null===l||void 0===l?void 0:l.map((function(t){return Object(m.jsxs)("button",{onClick:function(){return e.controller.ixUserBind(i,t)},className:"btn btn-sm btn-outline-info mx-3 my-2",children:[Object(m.jsx)("small",{children:"\u5173\u8054"})," ",t]},t)}))]})},i)},e}return Object(o.a)(n,[{key:"header",value:function(){return"\u8bbe\u7f6e\u7528\u6237\u89d2\u8272"}},{key:"content",value:function(){var e=this,t=this.controller.userRoles,n=Object(y.a)((function(t){return e.renderItem(t.userRole,t.isMe)})),r=Object(y.a)((function(){return Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)(n,{userRole:e,isMe:!1},e.user)}))})})),a=Object(y.a)((function(){return Object(m.jsx)(n,{userRole:e.controller.meRoles,isMe:!0})}));return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"mx-3 mt-3 mb-1 d-flex align-items-end",children:[Object(m.jsx)("div",{className:"mr-auto",children:"\u7528\u6237\u89d2\u8272"}),Object(m.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(){return e.openVPage(ne)},children:[Object(m.jsx)(f.FA,{name:"plus"})," \u589e\u52a0"]})]}),Object(m.jsx)(a,{}),Object(m.jsx)(r,{})]})}},{key:"onRoleChange",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.target).disabled=!0,e.next=4,this.controller.setUserRole(a.checked,n,r);case 4:a.disabled=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(f.VPage),ae=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var o;Object(s.a)(this,n),(o=t.call(this)).uq=void 0,o.uqApi=void 0,o.allRoles=void 0,o.roleCaptions=void 0,o.meRoles=null,o.userRoles=null,o.ixOfUsers=void 0,o.myRolesChanged=void 0,o.ixUserBind=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.uq.$.getIX(n),e.next=3,r.loadSchema();case 3:return a=r.schema.id2Name,c=o.uq.$.getID(a),s=new H(o.uq,r,c,t),u=new G(s),e.next=9,u.start();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Object(d.o)(Object(u.a)(o),{meRoles:d.p,userRoles:d.p}),o.uq=e;var l=e.$;if(o.uqApi=l.uqApi,o.allRoles=l.allRoles,!o.allRoles||0===o.allRoles.length)throw new Error("uq ".concat(l.name," allRoles not defined. No RoleAdmin needed."));return o.myRolesChanged=r,o.roleCaptions=a?o.allRoles.map((function(e){return a[e]||e})):o.allRoles,o}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.getAllRoleUsers();case 2:t=e.sent,Object(d.r)((function(){var e=t.shift().roles;e&&(n.ixOfUsers=e.split("|"));var r=n.allRoles.map((function(e){return"|".concat(e,"|")}));function a(e){return e?r.map((function(t){return e.indexOf(t)>=0})):r.map((function(e){return!1}))}n.userRoles=[];var i,c=n.user.id,s=Object(w.a)(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,u=o.user,l=o.roles,h=o;h.roles=a(l),u===c?n.meRoles=h:n.userRoles.push(h)}}catch(d){s.e(d)}finally{s.f()}})),this.openVPage(re);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserRole",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=r.roles,c=a.length,s="",o=0;o<c;o++)!0===(o===n?t:a[o])&&(s+="|"+this.allRoles[o]);return s+="|",e.next=7,this.uqApi.setUserRoles(r.user,s);case 7:a[n]=t,this.fireMyRolesChanged(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fireMyRolesChanged",value:function(e,t){if(this.myRolesChanged&&e===this.meRoles){var n=e.roles;t&&(n=t);for(var r=["$"],a=0;a<n.length;a++)!0===n[a]&&r.push(this.allRoles[a]);this.myRolesChanged(r)}}},{key:"buildRolesText",value:function(e){var t=this,n=e.roles.map((function(e,n){return!0===e?t.allRoles[n]:""})).join("|");return"|".concat(n,"|")}},{key:"newUser",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.centerApi.userFromKey(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return","\u8fd9\u4e2a\u7528\u6237\u540d\u6ca1\u6709\u6ce8\u518c");case 5:if(r=n.id,!0!==this.isMe(r)){e.next=10;break}this.meRoles?this.meRoles.isDeleted=!1:this.meRoles={user:r,roles:this.allRoles.map((function(e){return!1}))},e.next=23;break;case 10:if(!(c=this.userRoles.find((function(e){return e.user===r})))){e.next=20;break}if(!0!==c.isDeleted){e.next=17;break}c.isDeleted=!1,a=this.buildRolesText(c),e.next=18;break;case 17:return e.abrupt("return","\u8fd9\u4e2a\u7528\u6237\u5df2\u7ecf\u662f\u89d2\u8272\u7528\u6237\u4e86");case 18:e.next=23;break;case 20:c={user:r,roles:this.allRoles.map((function(e){return!1}))},this.userRoles.push(c),a="";case 23:return e.next=25,this.uqApi.setUserRoles(r,a);case 25:!0===this.isMe(r)&&this.fireMyRolesChanged(this.meRoles);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,t.isDeleted=!0,e.next=4,this.uqApi.deleteUserRoles(n);case 4:this.fireMyRolesChanged(t,this.allRoles.map((function(e){return!1})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restoreUser",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,t.isDeleted=!1,r=this.buildRolesText(t),e.next=5,this.uqApi.setUserRoles(n,r);case 5:this.fireMyRolesChanged(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f.Controller),ie={accountant:"\u4f1a\u8ba1",manager:"\u7ecf\u7406"},ce=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).uq=void 0,r.roles=null,r.myRolesChanged=function(e){r.roles=e,r.user.roles[r.uq.$.name]=e,f.nav.saveLocalUser()},r.uq=e,r}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.$.getRoles();case 2:this.roles=e.sent,this.roles||(this.roles=[]),this.openVPage(te);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showRoleAdmin",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.uq.$,(n=t.allRoles)&&0!==n.length){e.next=5;break}return alert("uq ".concat(t.name," has not defined roles")),e.abrupt("return");case 5:return(r=new ae(this.uq,this.myRolesChanged,ie)).setRes(this.getRes()),e.next=9,r.start();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f.Controller)},function(e,t,n){"use strict";n.d(t,"a",(function(){return le}));var r=n(1),a=n.n(r),i=n(2),c=n(10),s=n(3),o=n(4),u=n(5),l=n(6),h=n(9),d=n(8),f=n(16),p=n.n(f),v=n(15),b=n(24),m=n(23),j=n(20),y=n(19),O=n.n(y),k=function e(){Object(s.a)(this,e)},x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).func=void 0,r.func=e,r}return Object(o.a)(n,[{key:"check",value:function(e,t){var n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push.apply(e,Object(b.a)(n))}}}]),n}(k),g=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).res=void 0,r.res=e,r}return n}(k),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"check",value:function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(!1===isNaN(t))return;break;case"undefined":}e.push(this.res.required)}}]),n}(g),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,e)).minMsg=void 0,i.maxMsg=void 0,i.min=void 0,i.max=void 0,i.minMsg=O.a.template(e.min),i.maxMsg=O.a.template(e.max),i.min=r,i.max=a,i}return Object(o.a)(n,[{key:"check",value:function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0===isNaN(n)?e.push(this.res.number):this.checkMore(e,n)}}},{key:"checkMore",value:function(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))}}]),n}(g),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"checkMore",value:function(e,t){Object(m.a)(Object(j.a)(n.prototype),"checkMore",this).call(this,e,t),!1===Number.isInteger(t)&&e.push(this.res.integer)}}]),n}(I),S=n(11),N=n(0),A=function(){function e(t,n,r,a){var i=this;Object(s.a)(this,e),this.name=void 0,this.context=void 0,this.fieldProps=void 0,this.children=void 0,this._itemSchema=void 0,this._ui=void 0,this.defaultValue=void 0,this.rules=void 0,this.readOnly=void 0,this.disabled=!1,this.errors=[],this.contextErrors=[],this.visible=null,this.value=null,this.isChanging=void 0,this.onInputChange=function(e){i.changeValue(e.target.value,!0)},this.container=Object(S.a)((function(){if(!1===i.visible)return null;var e=i.context,t=e.form;if(!0===e.inNode)return i.render();var n=i.label;return!0===i.itemSchema.required&&!1!==t.props.requiredFlag&&null!==n&&(n=Object(N.jsxs)(N.Fragment,{children:[n,"\xa0",Object(N.jsx)("span",{className:"text-danger",children:"*"})]})),t.FieldContainer(n,i.renderBody())})),Object(d.o)(this,{errors:d.p,contextErrors:d.p,hasError:d.h,visible:d.p,value:d.p,disabled:d.p,isOk:d.h}),this.context=t;var c=n.name;if(this.name=c,this._itemSchema=n,this.fieldProps=r,this.children=a,this._ui=t.getUiItem(c),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{var o=this.ui,u=o.readOnly,l=o.disabled,h=o.visible;this.readOnly=!0===u,this.disabled=!0===l,this.visible=!(!1===h)}this.value=this.defaultValue=t.getValue(c)}return Object(o.a)(e,[{key:"hasError",get:function(){return this.errors.length+this.contextErrors.length>0}},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}},{key:"init",value:function(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new w(this.context.form.res)),this.buildRules(),void 0!==this.ui){var e=this.ui.rules;if(void 0!==e)if(!1!==Array.isArray(e)){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.rules.push(new x(r))}}catch(a){n.e(a)}finally{n.f()}}else this.rules.push(new x(e))}}},{key:"buildRules",value:function(){}},{key:"checkRules",value:function(){var e,t,n=[],r=Object(c.a)(this.rules);try{for(r.s();!(e=r.n()).done;){e.value.check(n,this.value)}}catch(a){r.e(a)}finally{r.f()}0===n.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),(t=this.errors).push.apply(t,n))}},{key:"isOk",get:function(){return 0===this.errors.length}},{key:"setError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.errors.push(e):(t=this.errors).push.apply(t,Object(b.a)(e)))}},{key:"setContextError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.contextErrors.push(e):(t=this.contextErrors).push.apply(t,Object(b.a)(e)))}},{key:"clearError",value:function(){this.errors.splice(0)}},{key:"clearContextError",value:function(){this.contextErrors.splice(0)}},{key:"parse",value:function(e){return e}},{key:"setElementValue",value:function(e){}},{key:"setDataValue",value:function(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))}},{key:"setValue",value:function(e){!0!==this.isChanging&&this.changeValue(e,!1)}},{key:"getValue",value:function(){return this.context.getValue(this.name)}},{key:"getReadOnly",value:function(){return this.readOnly}},{key:"getDisabled",value:function(){return this.disabled}},{key:"getVisible",value:function(){return this.visible}},{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"setVisible",value:function(e){this.visible=e}},{key:"changeValue",value:function(e,t){var n,r,a=this.value;void 0!==this.ui&&(n=this.ui.onChanging,r=this.ui.onChanged);var i=!0;void 0!==n&&(this.isChanging=!0,i=n(this.context,this.value,a),this.isChanging=!1),!0===i&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==r&&(this.isChanging=!0,r(this.context,this.value,a),this.isChanging=!1))}},{key:"className",get:function(){var e;return!1===this.context.inNode&&(e="form-control"),p()(e,this.context.form.FieldClass,this.ui&&this.ui.className)}},{key:"renderBody",value:function(){var e;if(!1===this.hasError&&this.ui){var t=this.ui,n=t.discription,r=t.discriptionClassName;void 0===r&&(r="small text-muted"),e=Object(N.jsx)("span",{className:r,children:n})}return Object(N.jsxs)(N.Fragment,{children:[this.render(),e]})}},{key:"label",get:function(){var e;if(void 0===this.ui)e=this.name;else{var t=this.ui.label;e=null===t?null:t||this.name}return e}},{key:"renderTemplet",value:function(){if(void 0!==this.children)return Object(N.jsx)(N.Fragment,{children:this.children});if(void 0!==this.ui){var e=this.ui.Templet;return"function"===typeof e?e(this.value):e}}},{key:"renderErrors",value:function(){var e=[].concat(Object(b.a)(this.errors),Object(b.a)(this.contextErrors));if(0===e.length)return null;var t=!0===this.context.inNode?"span":"div";return e.map((function(e){return h.createElement(t,{key:e,className:"text-danger d-inline-block my-2 ml-3"},Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]}))}))}}]),e}(),_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,c,o){var u;return Object(s.a)(this,n),(u=t.call(this,e,r,c,o)).inputType="text",u.input=void 0,u.hasFocus=!1,u.onKeyDown=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.internalOnKeyDown(t),13===t.keyCode){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(n=u.context.form.props.onEnter)){e.next=6;break}return e.abrupt("return");case 6:return u.changeValue(t.currentTarget.value,!0),u.input.blur(),e.next=10,n(u.name,u.context);case 10:void 0!==(r=e.sent)&&u.context.setError(u.name,r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.onBlur=function(e){Object(d.r)((function(){u.onInputChange(e),u.checkRules(),u.context.checkContextRules(),u.hasFocus=!1}))},u.onFocus=function(e){Object(d.r)((function(){u.clearError(),u.context.removeErrorWidget(Object(v.a)(u)),u.context.clearErrors(),u.hasFocus=!0}))},Object(d.o)(Object(v.a)(u),{hasFocus:d.p}),u}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setElementValue",value:function(e){null!==this.input&&(this.input.value=e)}},{key:"placeholder",get:function(){if(this.ui){var e=this.ui.placeholder;if(e)return e;var t=this.ui.label;if(t)return t}return this.name}},{key:"internalOnKeyDown",value:function(e){}},{key:"onChange",value:function(e){this.onInputChange(e)}},{key:"setReadOnly",value:function(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)}},{key:"setDisabled",value:function(e){null!==this.input&&(this.input.disabled=this.disabled=e)}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("input",{ref:function(t){return e.input=t},className:p()(this.className,n),type:this.inputType,defaultValue:this.value,onChange:function(t){return e.onChange(t)},placeholder:"string"===typeof this.placeholder?this.placeholder:void 0,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,maxLength:this.itemSchema.maxLength}),this.renderErrors()]})}}]),n}(A),D=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.onInputChange=function(t){e.setValue(t.currentTarget.value)},e.onBlur=function(t){e.onInputChange(t),e.checkRules(),e.context.checkContextRules()},e.onFocus=function(t){e.clearError(),e.context.removeErrorWidget(Object(v.a)(e)),e.context.clearErrors()},e}return Object(o.a)(n,[{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}},{key:"setElementValue",value:function(e){this.input.value=e}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("textarea",{ref:function(t){return e.input=t},onBlur:this.onBlur,onFocus:this.onFocus,className:p()(this.className,n),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange}),this.renderErrors()]})}}]),n}(A),P=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="password",e}return n}(_),T=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="url",e}return n}(_),R=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="email",e}return n}(_),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="number",e}return Object(o.a)(n,[{key:"itemSchema",get:function(){return this._itemSchema}},{key:"buildRules",value:function(){Object(m.a)(Object(j.a)(n.prototype),"buildRules",this).call(this);var e=this.context.form.res,t=this.itemSchema,r=t.min,a=t.max;this.rules.push("integer"===this.itemSchema.type?new C(e,r,a):new I(e,r,a))}},{key:"parse",value:function(e){switch(typeof e){default:case"undefined":return;case"number":return e;case"string":if(0===e.trim().length)return;return Number(e)}}}]),n}(_),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="number",e}return Object(o.a)(n,[{key:"isValidKey",value:function(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e}},{key:"internalOnKeyDown",value:function(e){var t=e.keyCode;window.event.returnValue=this.isValidKey(t)}}]),n}(E),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="date",e}return n}(_),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="datetime",e}return n}(_),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="time",e}return n}(_),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="month",e}return n}(_),q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.trueValue=void 0,e.falseValue=void 0,e.onInputChange=function(t){var n=!0===t.target.checked?e.trueValue:e.falseValue;e.setDataValue(n)},e.onClick=function(){e.context.clearErrors()},e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"init",value:function(){if(Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this),void 0!==this.ui){var e=this.ui,t=e.trueValue,r=e.falseValue;this.trueValue=void 0===t||t,this.falseValue=void 0!==r&&r}else this.trueValue=!0,this.falseValue=!1}},{key:"setElementValue",value:function(e){this.input.checked=e===this.trueValue}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=p()(this.className,"form-check-inline p-0"),n=Object(N.jsx)("input",{ref:function(t){return e.input=t},className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?Object(N.jsxs)("label",{className:t,children:[n," ",this.ui&&this.ui.label||this.name]}):Object(N.jsx)("div",{className:t,children:Object(N.jsx)("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center",children:n})})}}]),n}(A),U=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i){var c;return Object(s.a)(this,n),(c=t.call(this,e,r,a,i)).select=void 0,c.readOnly=!1,c.onInputChange=function(e){c.setDataValue(e.target.value)},Object(d.o)(Object(v.a)(c),{readOnly:d.p}),c}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setElementValue",value:function(e){this.select.value=e}},{key:"setReadOnly",value:function(e){this.select.disabled=this.readOnly=!e}},{key:"setDisabled",value:function(e){this.select.disabled=this.disabled=e}},{key:"render",value:function(){var e=this;if(!0===this.readOnly){var t=this.ui.list.find((function(t){return t.value===e.value})),n=void 0===t?"(???)":t.title;return Object(N.jsx)("span",{className:"form-control w-min-6c",children:n})}return Object(N.jsx)("select",{ref:function(t){return e.select=t},className:p()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange,children:this.ui.list.map((function(e,t){var n=e.title,r=e.value;return Object(N.jsx)("option",{className:undefined,value:r,children:n||r},t)}))})}}]),n}(A),H={height:"auto"},X=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputs={},e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setElementValue",value:function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}}},{key:"setReadOnly",value:function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e}},{key:"setDisabled",value:function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e}},{key:"render",value:function(){var e,t=this,n=this.ui,r=n.defaultValue,a=n.list;!0===this.context.isRow&&(e=this.context.rowKey);var i=p()(this.className,"py-0");return Object(N.jsx)("span",{className:i,style:H,children:a.map((function(n,a){var i=n.value,c=n.title,s=t.name;return void 0!==e&&(s+="-"+e),Object(N.jsxs)("label",{className:"form-radio-inline",children:[Object(N.jsx)("input",{ref:function(e){return t.inputs[a]=e},type:"radio",name:s,value:i,defaultChecked:(t.defaultValue||r)===i,onChange:t.onInputChange}),c||i]},a)}))})}}]),n}(A),W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="range",e.input=void 0,e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.ui,n=t.min,r=t.max,a=t.step;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("input",{ref:function(t){return e.input=t},className:p()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:r,min:n,step:a})})}}]),n}(A),G=Object(N.jsx)("small",{className:"text-muted",children:"[\u65e0]"}),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).onClick=Object(i.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(n=e.ui&&e.ui.pickId)){t.next=4;break}return alert("no pickId defined!"),t.abrupt("return");case 4:return t.next=6,n(e.context,e.name,e.value);case 6:r=t.sent,Object(d.r)((function(){e.setDataValue(r),e.clearError(),e.clearContextError(),e.checkRules()}));case 8:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"setValue",value:function(e){Object(m.a)(Object(j.a)(n.prototype),"setValue",this).call(this,e)}},{key:"render",value:function(){var e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);var n,r={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};if(void 0===this.value||null===this.value)n=e||G,r["text-muted"]=!0;else if(void 0===t){var a;if(null===this.value)a="null";else switch(typeof this.value){case"undefined":a=G;break;case"object":a=this.value.id;break;default:a=this.value}n=Object(N.jsx)(N.Fragment,{children:a})}else n="function"===typeof t?t(this.value):t;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:p()(r),onClick:this.onClick,children:n}),this.renderErrors()]})}}]),n}(A),K=function(e,t,n){return Object(N.jsxs)("span",{className:"text-danger",children:["!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!"]})},z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).onClick=Object(i.a)(a.a.mark((function t(){var n,r,i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(d.r)((function(){e.clearError(),e.clearContextError()})),n=e.itemSchema,r=n.name,"submit"!==n.type){t.next=6;break}return t.next=5,e.context.submit(r);case 5:return t.abrupt("return");case 6:if(void 0!==(i=e.context.form.props.onButtonClick)){t.next=10;break}return alert("button ".concat(r," clicked. you should define form onButtonClick")),t.abrupt("return");case 10:return t.next=12,i(r,e.context);case 12:if(void 0!==(c=t.sent)){t.next=15;break}return t.abrupt("return");case 15:Object(d.r)((function(){e.context.setError(r,c)}));case 16:case"end":return t.stop()}}),t)}))),e.observerRender=Object(S.a)((function(){var t,n,r,a=e.itemSchema,i=a.name,c=a.type;if(void 0!==e.ui){var s=e.ui.widget;if("button"!==s)return K(c,s,["button"]);t=e.ui.Templet,n=e.ui.className,r=e.ui.label}var o,u=e.context,l=u.form,h=u.hasError,d=e.context,f="submit"===c&&h||e.disabled;o=void 0!==e.children?e.children:"function"===typeof t?t():void 0!==t?t:r;var p=Object(N.jsx)("button",{className:n,type:"button",disabled:f,onClick:e.onClick,children:o||i});return!0===d.inNode?Object(N.jsxs)(N.Fragment,{children:[p,e.renderErrors()]}):Object(N.jsxs)("div",{className:l.ButtonClass,children:[Object(N.jsx)("div",{children:e.renderErrors()}),p]})})),e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"label",get:function(){return null}},{key:"render",value:function(){return h.createElement(this.observerRender)}}]),n}(A),J=function(){function e(t,n,r,a,i){var c=this;if(Object(s.a)(this,e),this.subContexts=void 0,this.form=void 0,this.uiSchema=void 0,this.initData=void 0,this.inNode=void 0,this.widgets={},this.rules=void 0,this.isRow=void 0,this.errors=[],this.errorWidgets=[],this.renderErrors=Object(S.a)((function(){var e=c.errors;return 0===e.length?null:Object(N.jsx)(N.Fragment,{children:e.map((function(e){return Object(N.jsxs)("span",{className:"text-danger inline-block my-1 ml-3",children:[Object(N.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]},e)}))})})),Object(d.o)(this,{errors:d.p,errorWidgets:d.p,hasError:d.h}),this.form=t,this.uiSchema=n,this.initData=r,this.inNode=a,this.isRow=i,void 0!==n){var o,u=n.rules;if(void 0!==u)this.rules=[],!1===Array.isArray(u)?this.rules.push(u):(o=this.rules).push.apply(o,Object(b.a)(u))}}return Object(o.a)(e,[{key:"getArrRowContexts",value:function(e){void 0===this.subContexts&&(this.subContexts={});var t=this.subContexts[e];return void 0===t&&(this.subContexts[e]=t={}),t}},{key:"arrName",get:function(){}},{key:"getValue",value:function(e){return this.initData[e]}},{key:"setValue",value:function(e,t){this.initData[e]=t;var n=this.widgets[e];void 0!==n&&n.setValue(t)}},{key:"getDisabled",value:function(e){var t=this.widgets[e];if(void 0!==t)return t.getDisabled()}},{key:"setDisabled",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setDisabled(t)}},{key:"getReadOnly",value:function(e){var t=this.widgets[e];void 0!==t&&t.getReadOnly()}},{key:"setReadOnly",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setReadOnly(t)}},{key:"getVisible",value:function(e){var t=this.widgets[e];void 0!==t&&t.getVisible()}},{key:"setVisible",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setVisible(t)}},{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkRules(),!0!==this.hasError){e.next=7;break}n="",r=Object(c.a)(this.errorWidgets);try{for(r.s();!(i=r.n()).done;)s=i.value,n+=s.name+":\n"+s.errors.join("\n")}catch(n){r.e(n)}finally{r.f()}return console.error(n),e.abrupt("return");case 7:if(void 0!==(o=this.form.props.onButtonClick)){e.next=11;break}return alert("button ".concat(t," clicked. you should define form onButtonClick")),e.abrupt("return");case 11:return e.next=13,o(t,this);case 13:if(void 0!==(u=e.sent)){e.next=16;break}return e.abrupt("return");case 16:this.setError(t,u);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkFieldRules",value:function(){for(var e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(var t in this.subContexts){var n=this.subContexts[t];for(var r in n)n[r].checkFieldRules()}}},{key:"checkContextRules",value:function(){if(this.clearErrors(),void 0!==this.rules){var e,t=Object(c.a)(this.rules);try{for(t.s();!(e=t.n()).done;){var n,r=(0,e.value)(this);if(void 0!==r)if(!0===Array.isArray(r))(n=this.errors).push.apply(n,Object(b.a)(r));else if("string"===typeof r)this.errors.push(r);else for(var a in r)this.setError(a,r[a])}}catch(l){t.e(l)}finally{t.f()}if(void 0!==this.subContexts)for(var i in this.subContexts){var s=this.subContexts[i];for(var o in s){var u=s[o];u.clearErrors(),u.checkContextRules()}}}}},{key:"setError",value:function(e,t){var n=this;Object(d.r)((function(){var r=n.widgets[e];void 0!==r&&(r.setContextError(t),n.addErrorWidget(r))}))}},{key:"clearContextErrors",value:function(){var e=this;Object(d.r)((function(){for(var t in e.widgets){var n=e.widgets[t];void 0!==n&&n.clearContextError()}}))}},{key:"clearWidgetsErrors",value:function(){var e=this;Object(d.r)((function(){for(var t in e.widgets){var n=e.widgets[t];void 0!==n&&n.clearError()}}))}},{key:"checkRules",value:function(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()}},{key:"addErrorWidget",value:function(e){this.errorWidgets.findIndex((function(t){return t===e}))<0&&this.errorWidgets.push(e)}},{key:"removeErrorWidget",value:function(e){var t=this.errorWidgets.findIndex((function(t){return t===e}));t>=0&&this.errorWidgets.splice(t,1)}},{key:"checkHasError",value:function(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)if(!0===t[n].hasError)return!0}return!1}},{key:"hasError",get:function(){return this.checkHasError()}},{key:"clearErrors",value:function(){var e=this;Object(d.r)((function(){e.errors.splice(0),e.errorWidgets.splice(0),e.clearContextErrors()}))}}]),e}(),Q=1,Y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i){var c,o;Object(s.a)(this,n);var u=e.uiSchema;if(void 0!==u){var l=u.items;void 0!==l&&(o=l[r.name])}return(c=t.call(this,e.form,o,a,i,!0)).parentContext=void 0,c.arrSchema=void 0,c.rowKey=void 0,c.data=void 0,c.parentContext=e,c.arrSchema=r,c.rowKey=Q++,c.data=a,c}return Object(o.a)(n,[{key:"getItemSchema",value:function(e){return this.arrSchema.itemSchemas[e]}},{key:"getUiItem",value:function(e){if(void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)return t[e]}}},{key:"arrName",get:function(){return this.arrSchema.name}},{key:"clearErrors",value:function(){Object(m.a)(Object(j.a)(n.prototype),"clearErrors",this).call(this),this.parentContext.clearErrors()}},{key:"parentData",get:function(){return this.parentContext.data}}]),n}(J),Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){return Object(s.a)(this,n),t.call(this,e,e.uiSchema,e.data,r,!1)}return Object(o.a)(n,[{key:"data",get:function(){return this.form.data}},{key:"getItemSchema",value:function(e){return this.form.itemSchemas[e]}},{key:"getUiItem",value:function(e){var t=this.form.uiSchema;if(void 0!==t){var n=t.items;if(void 0!==n)return n[e]}}}]),n}(J),ee=h.createContext({}),te=Object(S.a)((function(e){var t,n,r,a,i=e.parentContext,c=e.arrSchema,s=e.children,o=c.name,u=c.arr,l=i.initData[o],d=i.form,f=i.getArrRowContexts(o),v=i.getUiItem(o),b=v.onDeleted,m=v.onRestored,j=o,y=d.ArrContainer,O=d.RowContainer,k=d.RowSeperator,x=d.uiSchema;if(void 0!==x){var g=x.selectable,w=x.deletable,I=x.restorable;!0!==n&&(n=g),!0!==r&&(r=w),!0!==a&&(a=I)}if(void 0!==v){var C=v.widget,A=v.label,_=v.selectable,D=v.deletable,P=v.restorable,T=v.ArrContainer,R=v.RowContainer,E=v.RowSeperator;if(void 0!==_&&(n=_),void 0!==D&&(r=D),void 0!==P&&(a=P),void 0!==T&&(y=T),void 0!==R&&(O=R),void 0!==E&&(k=E),t=v.Templet,"arr"!==C)return K(c.type,C,["arr"]);j=A||j}var F=!0;return y(j,Object(N.jsx)(N.Fragment,{children:l.map((function(e,o){var d,v,j=void 0;if(!1===F?j=k:F=!1,void 0!==s)d=new Y(i,c,e,!0),v=Object(N.jsx)(N.Fragment,{children:s});else{var y=typeof t;"function"===y?(d=new Y(i,c,e,!0),v=h.createElement(Object(S.a)(t),e)):"object"===y?(d=new Y(i,c,e,!0),v=t):(d=new Y(i,c,e,!1),v=Object(N.jsx)(N.Fragment,{children:u.map((function(e,t){return Object(N.jsx)(h.Fragment,{children:oe(d,e,void 0)},e.name)}))}))}var x,g,w=d.rowKey;if(f[w]=d,!0===n){x=Object(N.jsx)("div",{className:"form-row-checkbox",children:Object(N.jsx)("input",{type:"checkbox",onClick:function(t){var n=t.target.checked;e.$isSelected=n;var r=e.$source;void 0!==r&&(r.$isSelected=n),d.clearErrors()},defaultChecked:e.$isSelected})})}var I=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===r){var C=I?"fa-undo":"fa-trash";g=Object(N.jsx)("div",{className:"form-row-edit text-info",onClick:function(){if(!0===a){e.$isDeleted=!I;var t=e.$source;void 0!==t&&(t.$isDeleted=!I),m&&m(e)}else{var n=l.indexOf(e);n>=0&&l.splice(n,1),b&&b(e)}d.clearErrors()},children:Object(N.jsx)("i",{className:p()("fa",C,"fa-fw")})})}var A=!0===n||!0===r?function(t){return Object(N.jsx)("fieldset",{disabled:I,children:Object(N.jsxs)("div",{className:p()("d-flex",{deleted:I,"row-selected":e.$isSelected}),children:[x,Object(N.jsx)("div",{className:!0===n&&!0===r?"form-row-content":"form-row-content-1",children:t}),g]})})}:function(e){return e};return Object(N.jsxs)(ee.Provider,{value:d,children:[j,O(A(Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(d.renderErrors,{}),v]})))]},w)}))}))})),ne=n(50),re=n(78),ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,c,o){var u;return Object(s.a)(this,n),(u=t.call(this,e,r,c,o)).input=void 0,u.imageSrc=null,u.onClick=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new re.a(void 0,u.itemSchema,u.ui,u.ui.label,u.value),e.next=3,t.start();case 3:return null!==(n=e.sent)&&(u.setValue(n),u.imageSrc=n),e.next=7,t.end();case 7:case"end":return e.stop()}}),e)}))),u.observerRender=Object(S.a)((function(){var e,t=["bg-white p-1 d-flex justify-content-center"];return u.readOnly||u.disabled||(t.push("cursor-pointer"),e=u.onClick),Object(N.jsx)("div",{className:p()(t),onClick:e,children:Object(N.jsx)(ne.a,{src:u.imageSrc,className:"w-4c h-4c"})})})),Object(d.o)(Object(v.a)(u),{imageSrc:d.p}),u}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"init",value:function(){Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this),this.imageSrc=this.value}},{key:"render",value:function(){return h.createElement(this.observerRender)}}]),n}(A),ie=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputs={},e}return Object(o.a)(n,[{key:"ui",get:function(){return this._ui}},{key:"setElementValue",value:function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}}},{key:"setReadOnly",value:function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e}},{key:"setDisabled",value:function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e}}]),n}(A),ce={dataTypes:["integer","number","string"],widget:_},se={id:{dataTypes:["id"],widget:$},text:ce,string:ce,textarea:{dataTypes:["string"],widget:D},password:{dataTypes:["string"],widget:P},date:{dataTypes:["date"],widget:V},datetime:{dataTypes:["date"],widget:L},time:{dataTypes:["date"],widget:M},month:{dataTypes:["date"],widget:B},select:{dataTypes:["integer","number","string","date","boolean"],widget:U},url:{dataTypes:["string"],widget:T},email:{dataTypes:["string"],widget:R},number:{dataTypes:["integer","number"],widget:E},updown:{dataTypes:["integer","number"],widget:F},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:q},image:{dataTypes:["string"],widget:ae},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:X},tagSingle:{dataTypes:["integer"],widget:function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.ui,n=t.valuesView,r=t.wrapClassName;if(void 0===n)return Object(N.jsx)(N.Fragment,{children:"valuesView must be defined"});!0===this.context.isRow&&(e=this.context.rowKey);var a=p()(this.className,"py-0"),i=this.name;void 0!==e&&(i+="-"+e);var c={className:a,inputName:i,wrapClassName:r,onInputChange:this.onInputChange};return n.renderRadios(this.defaultValue,c)}}]),n}(ie)},tagMulti:{dataTypes:["string"],widget:function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).defaultArr=void 0,e.onInputChange=function(t){var n=[];for(var r in e.inputs){var a=e.inputs[r];!0===a.checked&&n.push(a.value)}e.changeValue(n.join("|"),!0)},e}return Object(o.a)(n,[{key:"init",value:function(){Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this);var e=this.defaultValue;switch(typeof e){default:this.defaultArr=[];break;case"string":this.defaultArr=e.split("|").map((function(e){return Number(e)}))}}},{key:"render",value:function(){var e=this.ui,t=e.valuesView,n=e.wrapClassName;if(void 0===t)return Object(N.jsx)(N.Fragment,{children:"valuesView must be defined"});var r={className:p()(this.className,"py-0"),inputs:this.inputs,wrapClassName:n,onInputChange:this.onInputChange};return t.renderChecks(this.defaultValue,r)}}]),n}(ie)},range:{dataTypes:["integer"],widget:W},button:{dataTypes:["button","submit"],widget:z}};function oe(e,t,n,r){if(void 0===e)return null;if(void 0!==t){var a,i=t.name,c=t.type;switch(c){case"arr":var s=e.getItemSchema(i);return Object(N.jsx)(te,{parentContext:e,arrSchema:s,children:n})}var o=e.getUiItem(i);if(void 0===o)a=f(c);else{var u=o.widget;if(!0===o.hiden)return null;switch(u){default:if(void 0!==u){var l=se[u];if(!l)throw new Error("unknown widget ".concat(u));a=l.widget}void 0===a&&(a=f(c));break;case"custom":a=o.WidgetClass;break;case"group":return Object(N.jsx)("span",{children:"impletment group"})}}var h=e.widgets,d=h[i];return d||((d=new a(e,t,r,n)).init(),h[i]=d),Object(N.jsx)(d.container,{})}function f(e){switch(e){default:return _;case"id":return $;case"integer":return F;case"number":return E;case"string":return _;case"date":return V;case"boolean":return q;case"button":case"submit":return z}}}n(127);var ue=n(37),le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).schema=void 0,r.itemSchemas=void 0,r.uiSchema=void 0,r.res=void 0,r.formContext=void 0,r.disposer=void 0,r.data=void 0,r.Container=void 0,r.FieldContainer=void 0,r.FieldClass=void 0,r.ButtonClass=void 0,r.watch=function(){void 0!==r.props.formData&&r.calcSelectOrDelete()},r.DefaultContainer=function(e){return Object(N.jsx)("form",{className:p()(r.props.className),onSubmit:function(e){return e.preventDefault()},children:e})},r.DefaultFieldContainer=function(e,t){var n=r.props,a=n.fieldLabelSize,i=n.fieldLabelAlign;if(a>0){var c;if(null===e)a=0;else{var s;switch(i){case"right":s="text-sm-right";break;case"center":s="text-sm-center"}c=Object(N.jsx)("label",{className:p()("col-sm-"+a,"col-form-label",s),children:e})}var o="col-sm-"+(12-a);return Object(N.jsxs)("div",{className:"form-group row",children:[c,Object(N.jsx)("div",{className:o,children:t})]})}return Object(N.jsxs)("div",{className:"form-group",children:[null===e?null:Object(N.jsx)("label",{className:"col-form-label",children:e}),t]})},r.DefaultFieldClass=void 0,r.DefaultButtonClass="text-center py-2",r.DefaultRes=Object(ue.c)(ue.a),r.ArrContainer=function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:p()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1"),children:e}),t]})},r.RowContainer=function(e){var t=p()({"py-3":!0});return Object(N.jsx)("div",{className:t,children:e})},r.RowSeperator=Object(N.jsx)("div",{className:"border border-gray border-top"});var a=e.schema,i=e.uiSchema,o=e.Container,u=e.FieldContainer,l=e.FieldClass,h=e.ButtonClass,f=e.res;r.Container=o||r.DefaultContainer,r.FieldContainer=u||r.DefaultFieldContainer,r.FieldClass=void 0!==l&&""!==l&&null!==l?l:r.DefaultFieldClass,r.res=f||r.DefaultRes,r.ButtonClass=h||r.DefaultButtonClass,r.schema=a,r.itemSchemas={};var v,b=Object(c.a)(r.schema);try{for(b.s();!(v=b.n()).done;){var m=v.value;r.itemSchemas[m.name]=m}}catch(j){b.e(j)}finally{b.f()}return r.uiSchema=i,r.disposer=Object(d.g)(r.watch),r.data={},r}return Object(o.a)(n,[{key:"renderContent",value:function(){var e=this;this.initData(this.props.formData);var t,n=this.props.children;return void 0!==n?(this.formContext=new Z(this,!0),Object(N.jsx)(N.Fragment,{children:n})):(void 0!==this.uiSchema&&(t=this.uiSchema.Templet),void 0!==t?(this.formContext=new Z(this,!0),"function"===typeof t?t(this.data):t):(this.formContext||(this.formContext=new Z(this,!1)),Object(N.jsx)(N.Fragment,{children:this.schema.map((function(t,r){return Object(N.jsx)(h.Fragment,{children:oe(e.formContext,t,n)},r)}))})))}},{key:"initData",value:function(e){if(void 0===e&&(e={}),void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)for(var n in t){var r=t[n].defaultValue;void 0!==r&&void 0===e[n]&&(e[n]=r)}}var a,i=Object(c.a)(this.schema);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.initDataItem(s,this.data,e)}}catch(o){i.e(o)}finally{i.f()}}},{key:"initDataItem",value:function(e,t,n){var r=e.name,a=e.type;if("button"!==a)if("arr"===a){var i=e,s=i.arr;if(void 0!==s){var o,u=i.itemSchemas={},l=Object(c.a)(s);try{for(l.s();!(o=l.n()).done;){var h=o.value;u[h.name]=h}}catch(x){l.e(x)}finally{l.f()}var f=n[r];void 0===f?f=[]:!1===Array.isArray(f)&&(f=[f]);var p,v=[],b=Object(c.a)(f);try{for(b.s();!(p=b.n()).done;){var m,j=p.value,y={$source:j,$isSelected:j.$isSelected,$isDeleted:j.$isDeleted},O=Object(c.a)(s);try{for(O.s();!(m=O.n()).done;){var k=m.value;this.initDataItem(k,y,j)}}catch(x){O.e(x)}finally{O.f()}v.push(y)}}catch(x){b.e(x)}finally{b.f()}t[r]=Object(d.p)(v)}}else t[r]=n[r]}},{key:"calcSelectOrDelete",value:function(){var e,t=Object(c.a)(this.schema);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.arrItemOperated(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"arrItemOperated",value:function(e){var t=e.name;if("arr"===e.type&&void 0!==this.data){var n=this.data[t];if(void 0!==n){var r,a=e.arr,i=Object(c.a)(n);try{for(i.s();!(r=i.n()).done;){var s=r.value,o=s.$source;if(void 0!==o){var u=o.$isSelected,l=o.$isDeleted;s.$isSelected=u,s.$isDeleted=l;var h,d=Object(c.a)(a);try{for(d.s();!(h=d.n()).done;){var f=h.value;this.arrItemOperated(f)}}catch(p){d.e(p)}finally{d.f()}}}}catch(p){i.e(p)}finally{i.f()}}}}},{key:"componentDidMount",value:function(){var e=this.props.beforeShow;void 0!==e&&e(this.formContext)}},{key:"componentWillUnmount",value:function(){void 0!==this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.renderContent();return Object(N.jsxs)(ee.Provider,{value:this.formContext,children:[h.createElement(this.formContext.renderErrors),this.Container(e)]})}},{key:"buttonClick",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formContext.checkRules(),!0!==this.formContext.hasError){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(n=this.formContext.form.props.onButtonClick)){e.next=7;break}return alert("you should define form onButtonClick"),e.abrupt("return");case 7:return e.next=9,n(t,this.formContext);case 9:if(void 0!==(r=e.sent)){e.next=12;break}return e.abrupt("return");case 12:this.formContext.setError(t,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.Component);(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.children,r=this.context;if(void 0===r)return Object(N.jsx)("span",{className:"text-danger",children:"!only in Form!"});var a=r.getItemSchema(t),i=oe(r,a,n,this.props);return void 0===i?Object(N.jsxs)("span",{className:"text-danger",children:["!!",t," is not defined!!"]}):i}}]),n}(h.Component)).contextType=ee},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r,a=n(1),i=n.n(a),c=n(2),s=n(3),o=n(4),u=n(5),l=n(6),h=n(9),d=n(11),f=n(18),p=n(26),v=n(35),b=n(0),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.newValue=t.target.value;var n=e.value;e.isChanged=e.newValue!==n},e.onBlur=function(t){e.verifyValue()},e.onFocus=function(){e.error=void 0},e.page=Object(d.a)((function(t){var n=t.resolve,r=function(){if(e.verifyValue(),!e.error){var t=e.newValue;n(t)}},a=Object(b.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:r,children:"\u4fdd\u5b58"}),i=e.inputOptions(),c=i.type,s=i.max,o=i.min,u=i.step;return Object(b.jsx)(p.a,{header:e.label,right:a,children:Object(b.jsxs)("div",{className:"m-3",children:[Object(b.jsx)("input",{type:c,onChange:e.onChange,onKeyDown:function(e){13===e.keyCode&&r()},onBlur:e.onBlur,onFocus:e.onFocus,className:"form-control",defaultValue:e.value,min:o,max:s,step:u}),e.uiItem&&Object(b.jsx)("div",{className:"small muted m-2",children:e.uiItem.placeholder}),e.error&&Object(b.jsx)("div",{className:"text-danger",children:e.error})]})})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"inputOptions",value:function(){return{type:"text"}}}]),n}(v.a),j=n(78),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){var n=t.resolve,r=e.itemSchema.name,a=e.uiItem.list,i=Object(b.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:function(){e.verifyValue(),e.error||n(e.newValue)},children:"\u4fdd\u5b58"}),c=a?a.map((function(t,n){var a=t.title,i=t.value;return Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("label",{className:"px-3 py-2 cursor-pointer",children:[Object(b.jsx)("input",{name:r,type:"radio",value:i,onClick:function(){return e.onChange(i)},defaultChecked:i===e.value})," ",a||i," \xa0"]})},n)})):Object(b.jsx)(b.Fragment,{children:"no list defined"});return Object(b.jsx)(p.a,{header:"\u66f4\u6539"+e.label,right:i,children:Object(b.jsx)("div",{className:"m-3",children:Object(b.jsx)("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4",children:c})})})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"init",value:function(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),O=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){var n=t.resolve,r=e.uiItem.list,a=r?r.map((function(t,r){var a=t.title,i=t.value;return Object(b.jsx)("div",{className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:function(){e.onChange(i),n(e.newValue)},children:a||i},r)})):Object(b.jsx)(b.Fragment,{children:"no list defined"});return Object(b.jsx)(p.a,{header:"\u66f4\u6539"+e.label,children:Object(b.jsx)("div",{className:"my-3",children:a})})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){return Object(b.jsx)(p.a,{header:"\u66f4\u6539"+e.label,children:"ddd"})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(n,r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=t.uiItem.pickId)){e.next=4;break}return alert("IdItemEdit.pickId = undefined"),e.abrupt("return");case 4:return e.next=6,a(void 0,void 0,t.value);case 6:c=e.sent,t.onChange(c.id),n(c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"internalEnd",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),x=n(23),g=n(20),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputs={},e.inputType=void 0,e.page=Object(d.a)((function(t){var n=t.resolve,r=Object(b.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:function(){e.verifyValue(),e.error||n(e.newValue)},children:"\u4fdd\u5b58"});return Object(b.jsx)(p.a,{header:"\u66f4\u6539"+e.label,right:r,children:Object(b.jsx)("div",{className:"p-3",children:e.renderInputs()})})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"init",value:function(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e=this.uiItem.valuesView;return void 0===e?Object(x.a)(Object(g.a)(n.prototype),"renderContent",this).call(this):e.render(this.value)}}]),n}(v.a),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="radio",e.onInputChange=function(t){var n=t.currentTarget;if(!1!==n.checked){e.newValue=Number(n.value);var r=e.value;e.isChanged=e.newValue!==r}},e}return Object(o.a)(n,[{key:"renderInputs",value:function(){var e=this.uiItem.valuesView,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderRadios(this.value,t)}}]),n}(w),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="checkbox",e.onInputChange=function(t){var n=[];for(var r in e.inputs){var a=e.inputs[r];!0===a.checked&&n.push(a.value)}e.newValue=n.join("|");var i=e.value;e.isChanged=e.newValue!==i},e}return Object(o.a)(n,[{key:"renderInputs",value:function(){var e=this.uiItem.valuesView,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderChecks(this.value,t)}}]),n}(w),S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.newValue=t.target.value;var n=e.value;e.isChanged=e.newValue!==n},e.onBlur=function(t){e.verifyValue()},e.onFocus=function(){e.error=void 0},e.page=Object(d.a)((function(t){var n=t.resolve,r=Object(b.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:function(){if(e.verifyValue(),!e.error){var t=e.newValue;n(t)}},children:"\u4fdd\u5b58"});return Object(b.jsx)(p.a,{header:e.label,right:r,children:Object(b.jsxs)("div",{className:"m-3",children:[Object(b.jsx)("textarea",{onChange:e.onChange,onKeyDown:function(e){},onBlur:e.onBlur,onFocus:e.onFocus,className:"form-control",defaultValue:e.value,rows:6}),e.uiItem&&Object(b.jsx)("div",{className:"small muted m-2",children:e.uiItem.placeholder}),e.error&&Object(b.jsx)("div",{className:"text-danger",children:e.error})]})})})),e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.a),N=n(15),A=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.onChange=function(t){e.newValue=e.getValue(t.target.checked);var n=e.value;e.isChanged=e.newValue!==n,e.edit.onItemChanged(Object(N.a)(e),e.newValue)},e}return Object(o.a)(n,[{key:"uiItem",get:function(){return this._uiItem}},{key:"editInRow",get:function(){return!0}},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.input){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==this.uiItem){e.next=5;break}return e.abrupt("return",this.input.checked);case 5:return t=this.input.checked,e.abrupt("return",this.getValue(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"end",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e,t=this,n=this.uiItem.readOnly,r=!0===n;return!0!==n&&(e=this.onChange),Object(b.jsx)("input",{ref:function(e){return t.input=e},type:"checkbox",defaultChecked:this.value,disabled:r,onChange:e})}},{key:"getValue",value:function(e){var t=this.uiItem,n=t.trueValue,r=t.falseValue;return!0===e?null===n||void 0===n||n:null!==r&&void 0!==r&&r}}]),n}(v.a),_=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"inputOptions",value:function(){var e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"range",min:e,max:t,step:n}}}]),n}(m),D=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"inputOptions",value:function(){var e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"number",min:e,max:t,step:n}}}]),n}(m),P=Object(d.a)(r=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).defaultSepClassName="border-top edit-sep-light-gray",r.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",r.topBorder=void 0,r.bottomBorder=void 0,r.rowContainerClassName=void 0,r.sep=void 0,r.uiSchema=void 0,r.rowClick=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return alert("item has no edit"),e.abrupt("return");case 3:if(n=t.itemSchema,a=t.uiItem,c=t.value,!0!==t.editInRow){e.next=6;break}return e.abrupt("return");case 6:if(s=r.props,o=s.onItemChanged,u=s.onItemClick,!0!==s.stopEdit){e.next=9;break}return e.abrupt("return");case 9:if(!0!==(null===a||void 0===a?void 0:a.readOnly)){e.next=11;break}return e.abrupt("return");case 11:if(void 0===u){e.next=15;break}return e.next=14,u(n,a,c);case 14:return e.abrupt("return");case 15:if(void 0!==t){e.next=18;break}return alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);"),e.abrupt("return");case 18:return e.prev=18,e.next=21,t.start();case 21:if((l=e.sent)===c){e.next=30;break}if(r.props.data[n.name]=l,void 0!==o){e.next=28;break}alert("".concat(n.name," value changed, new: ").concat(l,", pre: ").concat(c)),e.next=30;break;case 28:return e.next=30,o(n,l,c);case 30:return e.next=32,t.end();case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(18),console.log("no value changed"),console.error(e.t0);case 38:case"end":return e.stop()}}),e,null,[[18,34]])})));return function(t){return e.apply(this,arguments)}}();var a=e.topBorderClassName,o=e.bottomBorderClassName,u=e.sepClassName,l=e.rowContainerClassName,h=e.uiSchema;return r.topBorder=Object(b.jsx)("div",{className:a||r.defaultSepClassName}),r.bottomBorder=Object(b.jsx)("div",{className:o||r.defaultSepClassName}),r.rowContainerClassName=l||r.defaultRowContainerClassName,r.sep=Object(b.jsx)("div",{className:u||r.defaultSepClassName}),r.uiSchema=h&&h.items||{},r}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.schema;return Object(b.jsxs)("div",{children:[this.topBorder,n.map((function(n,r){var a,s,o=t.props.stopEdit,u=n.name,l=void 0===t.uiSchema?void 0:t.uiSchema[u];void 0!==l&&(a=l.label||u,s=l.labelHide);var d=t.props.data[u],f=function(e,t,n,r,a){var i,c;if(void 0!==n)switch(n.widget){default:break;case"id":c=k;break;case"text":c=m;break;case"textarea":c=S;break;case"image":c=j.a;break;case"select":c=O;break;case"range":c=_;break;case"number":case"updown":c=D;break;case"checkbox":c=A;break;case"radio":i=new y(e,t,n,r,a);break;case"tagSingle":i=new I(e,t,n,r,a);break;case"tagMulti":i=new C(e,t,n,r,a)}if(void 0===i){if(void 0===c)switch(t.type){case"string":c=m;break;case"image":c=j.a;break;case"boolean":c=A;break;case"number":case"integer":c=_}if(void 0===c)return;i=new c(e,t,n,r,a)}return i.init(),i}(t,n,l,a,d),p=t.rowContainerClassName,v=f.editInRow;!1===v&&!0!==o&&(v=!1),!1===v&&(p+=" cursor-pointer");var x,g=!0===n.required&&Object(b.jsx)("span",{className:"text-danger",children:"*"}),w="flex-fill d-flex ";!0===s?x=void 0:(x=Object(b.jsxs)("div",{children:[a," ",g]}),w+="justify-content-end");var N=Object(b.jsxs)(h.Fragment,{children:[e,Object(b.jsxs)("div",{className:"d-flex align-items-center"+p,onClick:Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.rowClick(f);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:[x,Object(b.jsx)("div",{className:w,children:void 0===f?void 0:f.renderContent()}),!1===v&&Object(b.jsx)("div",{className:"w-2c text-right",children:Object(b.jsx)("i",{className:"fa fa-angle-right"})})]})]},r);return e=t.sep,N})),this.bottomBorder]})}},{key:"onItemChanged",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.itemSchema,a=t.uiItem,c=t.value,this.props.data[r.name]=n,s=this.props,o=s.onItemChanged,!0!==s.stopEdit){e.next=5;break}return e.abrupt("return");case 5:if(!0!==(null===a||void 0===a?void 0:a.readOnly)){e.next=7;break}return e.abrupt("return");case 7:if(void 0!==o){e.next=11;break}alert("".concat(r.name," value changed, new: ").concat(n,", pre: ").concat(c)),e.next=13;break;case 11:return e.next=13,o(r,n,c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(h.Component))||r},function(e,t,n){"use strict";n(1),n(2),n(27),n(13),n(22),n(10),n(182),n(14),n(75),n(183);n(3)},function(e,t,n){"use strict";var r=n(10),a=n(36),i=n(1),c=n.n(i),s=n(2),o=n(3),u=n(4),l=n(15),h=n(5),d=n(6),f=n(8),p=n(28),v=n(34),b=n(7),m=n(0),j=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){return"VIDX"}},{key:"content",value:function(){return Object(m.jsx)("div",{children:"IDX"})}}]),n}(b.VPage),y={$zh:{day:"\u65e5",week:"\u5468",month:"\u6708",year:"\u5e74"},$en:{day:"Day",week:"Week",month:"Month",year:"Year"}},O=n(11),k=n(30),x=["week","month"],g={title:{display:!1},maintainAspectRatio:!1},w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).currentIndex=0,Object(f.o)(Object(l.a)(r),{currentIndex:f.p}),r}return Object(u.a)(n,[{key:"header",value:function(){return"View"}},{key:"right",value:function(){var e=this;return Object(m.jsx)("button",{className:"btn btn-sm btn-primary mr-2",onClick:function(){return e.controller.onItemEdit()},children:Object(m.jsx)(b.FA,{name:"pencil-square-o"})})}},{key:"content",value:function(){var e=this,t=Object(O.a)((function(){var t=e.controller,n=t.spanValues,r=t.gridProps,a=t.timeSpan,i=t.prevTimeSpan,c=t.nextTimeSpan,s=t.dayValues;if(null===n)return null;var o={labels:a.labels,datasets:[{label:"",data:Object(f.s)(s),backgroundColor:"lightgreen",borderWidth:1}]},u=r[e.currentIndex],l=u.label,h=u.name,d=function(e,t){return Object(m.jsx)("div",{className:"p-3 "+(t?"cursor-pointer":"text-muted"),onClick:t,children:Object(m.jsx)(b.FA,{name:e})})},p=d("chevron-left",i),v=!0===a.canNext?d("chevron-right",c):d("square-o",void 0);return Object(m.jsxs)("div",{className:"py-3",children:[Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:x.map((function(t){var n="col text-center p-2 cursor-pointer ",r={borderBottomWidth:"0.15rem",borderBottomStyle:"solid"};return a.type===t?(n+="text-primary font-weight-bold",r.borderBottomColor="blue"):(n+="text-muted",r.borderBottomColor="lightgray"),Object(m.jsx)("div",{className:n,style:r,onClick:function(){return e.tabClick(t)},children:e.t(t)},t)}))})}),Object(m.jsx)(b.LMR,{className:"text-center align-items-center",left:p,right:v,children:a.title}),Object(m.jsxs)("div",{className:"mt-3 mx-3 text-center cursor-pointer",onClick:function(){return e.onFieldHistory(h)},children:[Object(m.jsx)("h4",{className:"d-inline",children:l}),Object(m.jsxs)("span",{className:"text-info small",children:[" ",Object(m.jsx)(b.FA,{name:"angle-double-right"})," \u67e5\u770b\u660e\u7ec6"]})]}),Object(m.jsx)("div",{className:"p-3 h-12c",children:Object(m.jsx)(k.Bar,{data:o,width:100,height:50,options:g})}),Object(m.jsx)("div",{className:"d-flex flex-wrap p-1",children:r.map((function(t,r){var a=t,i=a.name,c=a.label,s=n[i],o=s?Object(m.jsx)("b",{className:"h3 mb-0",children:s}):Object(m.jsx)("small",{className:"text-muted",children:"0"}),u="m-1 w-8c h-8c d-flex flex-column align-items-center justify-content-center bg-white px-3 cursor-pointer border rounded ";return u+=r===e.currentIndex?" border-primary":" ",Object(m.jsxs)("div",{className:u,onClick:function(){return e.onFieldClick(t,r)},children:[Object(m.jsx)("div",{className:"my-3 h-4c d-flex align-items-center",children:o}),Object(m.jsx)("div",{className:"mb-3",children:c})]},r)}))})]})}));return Object(m.jsx)(t,{})}},{key:"tabClick",value:function(e){this.controller.setTimeSpan(e)}},{key:"onFieldClick",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.controller.gridProps,this.currentIndex!==n){e.next=7;break}return a=r[this.currentIndex],i=a.name,e.next=6,this.controller.showFieldHistory(i);case 6:return e.abrupt("return");case 7:Object(f.r)((function(){s.currentIndex=n;var e=r[s.currentIndex].name;s.controller.setCurrentField(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onFieldHistory",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.showFieldHistory(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b.VPage),I=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){return"Edit"}},{key:"content",value:function(){var e=this,t=this.controller.gridProps;return Object(m.jsx)("div",{className:"py-3",children:t.map((function(t,n){switch(t.type){default:return null;case"string":return e.renderStringProp(t);case"integer":case"number":return e.renderNumberProp(t)}}))})}},{key:"renderStringProp",value:function(e){return Object(m.jsx)("div",{className:"px-3 py-2 bg-white mb-1 cursor-pointer",children:JSON.stringify(e)},e.name)}},{key:"renderNumberProp",value:function(e){var t=this,n=Object(O.a)((function(){var n=e.name;return t.controller.spanValues?Object(m.jsx)("div",{className:"px-3 py-2 bg-white mb-1 cursor-pointer",onClick:function(){return t.openVPage(C,e)},children:Object(m.jsx)(b.LMR,{left:Object(m.jsx)("b",{children:e.label}),right:Object(m.jsx)(b.FA,{name:"pencil-square-o",className:"align-self-center"}),children:Object(m.jsx)("div",{className:"mr-5 text-right",children:t.controller.spanValues[n]})})},n):null}));return Object(m.jsx)(n,{})}}]),n}(b.VPage),C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).prop=void 0,r.date=void 0,r.value=void 0,r.dateInput=void 0,r.timeInput=void 0,r.disabled=!0,r.onValueChange=function(e){var t=e.currentTarget.value.trim();r.disabled=0===t.length;var n=Number(t);!1===Number.isNaN(n)&&(r.value=n)},r.onSave=Object(s.a)(c.a.mark((function e(){var t,n,a,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dateInput?(i=r.dateInput.valueAsDate,s=null===(n=r.dateInput)||void 0===n?void 0:n.valueAsNumber,o=null===(a=r.timeInput)||void 0===a?void 0:a.valueAsNumber,t=s+o+60*i.getTimezoneOffset()*1e3):t=Date.now(),e.next=3,r.controller.saveFieldValue(r.prop.name,t,r.value);case 3:r.closePage();case 4:case"end":return e.stop()}}),e)}))),Object(f.o)(Object(l.a)(r),{disabled:f.p}),r}return Object(u.a)(n,[{key:"init",value:function(e){this.prop=e,this.date=new Date}},{key:"header",value:function(){return this.prop.label}},{key:"right",value:function(){var e=this,t=Object(O.a)((function(){return Object(m.jsx)("button",{className:"btn btn-sm btn-success mr-2",disabled:e.disabled,onClick:e.onSave,children:e.t("submit")})}));return Object(m.jsx)(t,{})}},{key:"content",value:function(){var e,t=this,n=this.prop.time,r=this.date.getFullYear(),a=this.date.getMonth()+1,i=this.date.getDate(),c=this.date.getHours(),s=this.date.getMinutes(),o="".concat(r,"-").concat(Object(b.left0)(a,2),"-").concat(Object(b.left0)(i,2));return!0===n&&(e=Object(m.jsxs)("div",{className:"input-group mb-3",children:[Object(m.jsx)("span",{className:"w-8c input-group-text",children:this.t("date")}),Object(m.jsx)("input",{ref:function(e){return t.dateInput=e},type:"date",className:"form-control",defaultValue:o}),Object(m.jsx)("input",{ref:function(e){return t.timeInput=e},type:"time",className:"form-control",defaultValue:"".concat(Object(b.left0)(c,2),":").concat(Object(b.left0)(s,2))})]})),Object(m.jsxs)("div",{className:"p-3",children:[e,Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("span",{className:"w-8c input-group-text",children:this.t("value")}),Object(m.jsx)("input",{type:"number",className:"form-control",onChange:this.onValueChange})]})]})}}]),n}(b.VPage);v.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return C}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(14),h=n(37),d=n(31),f=n(69),p=n(21),v=n(0),b=(d.b,d.b,function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(e){return Object(v.jsx)(l.Page,{header:"ERROR",children:Object(v.jsxs)("div",{className:"m-3",children:[Object(v.jsx)("div",{className:"p-3 d-flex justify-content-center align-items-center",children:Object(v.jsx)("button",{className:"btn btn-danger",onClick:l.nav.resetAll,children:"\u91cd\u542f\u7f51\u9875"})}),Object(v.jsx)("div",{children:"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"}),e.errors.map((function(e,t){return Object(v.jsx)("div",{children:e},t)}))]})})},e}return Object(s.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{errors:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.b)),m=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(e){var t=e.error;return Object(v.jsx)(l.Page,{header:"App start error!",children:Object(v.jsx)("pre",{children:"string"===typeof t?t:t.message})})},e}return Object(s.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{error:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.b),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;if(Object(c.a)(this,n),(r=t.call(this)).appConfig=void 0,r._uqs=void 0,r.uqsUser="",r.appConfig=e||l.nav.navSettings,r.appConfig){var a=r.appConfig,i=a.app,s=a.uqs;if(void 0===i&&void 0===s)throw new Error("app or uqs must be defined in AppConfig")}return r}return Object(s.a)(n,[{key:"uqs",get:function(){return this._uqs}},{key:"internalT",value:function(e){return Object(h.g)(e)}},{key:"setRes",value:function(e){Object(h.e)(e)}},{key:"afterBuiltUQs",value:function(e){}},{key:"initUQs",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.appConfig){e.next=2;break}return e.abrupt("return");case 2:if((t=l.nav.user)!==this.uqsUser){e.next=5;break}return e.abrupt("return");case 5:return this.uqsUser=t,Object(p.h)(),e.next=9,f.UQsMan.build(this.appConfig);case 9:return n=e.sent,this._uqs=f.UQsMan._uqs,this.afterBuiltUQs(this._uqs),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.onNavRoutes(),e.next=4,this.initUQs();case 4:if(void 0===(t=e.sent)){e.next=8;break}return this.openVPage(b,t),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(0),this.openVPage(m,e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.nav.resolveRoute(),l.nav.onChangeLogin=function(e){return t.onChangeLogin(e)},this.onChangeLogin(this.user);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.e.userFromId(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"on",value:function(){return l.nav.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"onNavRoutes",value:function(){}},{key:"getUqRoles",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.nav.user){e.next=3;break}return e.abrupt("return",null);case 3:if(n=l.nav.user.roles,r=t.toLowerCase(),n&&(i=n[r]),!i){e.next=8;break}return e.abrupt("return",i);case 8:return e.next=10,f.UQsMan.getUqUserRoles(r);case 10:return(i=e.sent)||(i=null),l.nav.setUqRoles(r,i),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isAdmin",value:function(e){return this.isRole(e,"$")}},{key:"isRole",value:function(e,t){return!!e&&(t=t.toLowerCase(),e.indexOf(t)>=0)}},{key:"onChangeLogin",value:function(e){}}]),n}(d.a);function y(e,t,n){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&((i=n.htmlTitle)&&(document.title=i),c=document.getElementsByTagName("html"),(s=c[0])&&(null===s||void 0===s?void 0:s.getAttribute("data-version"))),o=new t(n),e.next=4,o.start(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(23),x=n(20),g=n(19),w=n.n(g),I=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this))._uqs=void 0,r._cApp=void 0,r._cApp=e,r._uqs=null===e||void 0===e?void 0:e.uqs,r}return Object(s.a)(n,[{key:"uqs",get:function(){return this._uqs}},{key:"cApp",get:function(){return this._cApp}},{key:"getUqRoles",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=this._cApp)||void 0===n?void 0:n.getUqRoles(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"internalT",value:function(e){var t=Object(k.a)(Object(x.a)(n.prototype),"internalT",this).call(this,e);return void 0!==t?t:this._cApp.internalT(e)}},{key:"newC",value:function(e,t){var n=new e(this.cApp);return n.init(t),n}},{key:"newSub",value:function(e,t){var n=new e(this);return n.init(t),n}},{key:"getWebNav",value:function(){var e,t=null===(e=this._cApp)||void 0===e?void 0:e.getWebNav();if(void 0!==t){var n=w.a.clone(t);return w.a.merge(n,this.webNav),n}}}]),n}(d.a),C=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e.cApp))._owner=void 0,r._owner=e,r}return Object(s.a)(n,[{key:"internalT",value:function(e){var t=Object(k.a)(Object(x.a)(n.prototype),"internalT",this).call(this,e);return void 0!==t?t:this._owner.internalT(e)}},{key:"owner",get:function(){return this._owner}},{key:"getWebNav",value:function(){var e,t=null===(e=this._cApp)||void 0===e?void 0:e.getWebNav();if(void 0!==t){for(var n=[],r=this.owner;void 0!==r;r=null===(a=r)||void 0===a?void 0:a.owner){var a;n.push(r.webNav)}for(var i=w.a.clone(t);;){var c=n.pop();if(void 0===c)break;w.a.merge(i,c)}return w.a.merge(i,this.webNav),i}}}]),n}(I)},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r,a,i,c=n(3),s=n(4),o=n(5),u=n(6),l=n(9),h=n(16),d=n.n(h),f=n(11),p=n(19),v=n.n(p),b=n(8),m=n(0),j=function(){function e(t){Object(c.a)(this,e),this.list=void 0,this.render=void 0,this.list=t,Object(b.o)(this,{loading:b.h})}return Object(s.a)(e,[{key:"isPaged",get:function(){var e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)}},{key:"items",get:function(){var e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0}},{key:"loading",get:function(){var e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;var t=e;return void 0!==t.items&&t.loading}},{key:"selectedItems",get:function(){}},{key:"dispose",value:function(){}},{key:"renderContent",value:function(e,t){var n=this.list.props.item.render;return void 0===n?Object(m.jsx)("div",{className:"px-3 py-2",children:JSON.stringify(e)}):n(e,t)}}]),e}(),y=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).render=function(t,n){var r=e.list.props.item,a=r.className,i=r.key,c=r.onClick;return Object(m.jsx)("li",{className:d()("va-row-clickable",a),onClick:function(){return c&&c(t)},children:e.renderContent(t,n)},void 0===i?n:i(t))},e}return n}(j),O=n(44),k=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).render=function(t,n){var r=e.list.props.item,a=r.className,i=r.key;if("string"===typeof t){var c=d()("va-list-gap","px-3","pt-1");return Object(m.jsx)("li",{className:c,children:t},Object(O.a)())}return Object(m.jsx)("li",{className:d()(a),children:e.renderContent(t,n)},void 0===i?n:i(t))},e}return n}(j),x=n(10),g=n(24),w=n(15),I=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e))._items=null,r.inputItems={},r.buildItems=function(){var e,t=r.list.props,n=t.items,a=t.isItemSelected,i=t.selectedItems,c=t.compare;if(void 0!==n)if(null!==n)if(e=!0===Array.isArray(n)?n:n.items,a){var s=e.map((function(e){return{selected:a(e),item:e,labelId:Object(O.a)()}}));r._items=s}else{var o;o=void 0===c?function(e,t){return e===t}:c;var u=e.map((function(e){return{selected:void 0!==i&&void 0!==i.find((function(t){return o(e,t)})),item:e,labelId:Object(O.a)()}}));r._items=u}else r._items=null;else r._items=void 0},r.render=function(e,t){var n=r.list.props.item.key;return l.createElement(r.row,{item:e,index:t,key:void 0===n?t:n(e)})},r.row=Object(f.a)((function(e){var t=e.item,n=e.index,a=r.list.props.item.className,i=t.labelId,c=t.selected,s=t.item;return Object(m.jsx)("li",{className:d()(a),children:Object(m.jsxs)("div",{className:"d-flex align-items-center px-3",children:[Object(m.jsx)("input",{ref:function(e){e&&(r.inputItems[i]=e)},className:"",type:"checkbox",value:"",id:i,defaultChecked:c,onChange:function(e){r.onSelect(t,e.target.checked)}}),Object(m.jsx)("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:i,children:r.renderContent(s,n)})]})})})),Object(b.o)(Object(w.a)(r),{_items:b.p}),r.buildItems(),r.listenArraySplice(),r}return Object(s.a)(n,[{key:"listenArraySplice",value:function(){var e,t=this,n=this.list.props.items;void 0!==n&&(null!==n&&(e=!0===Array.isArray(n)?n:n.items,!0===Object(b.l)(n)&&Object(b.q)(e,(function(e){if("splice"===e.type){var n,r=e.index,a=e.removedCount,i=e.added,c=i&&i.map((function(e){return{selected:!1,item:e,labelId:Object(O.a)()}}));(n=t._items).splice.apply(n,[r,a].concat(Object(g.a)(c))),t.buildItems()}}),!0)))}},{key:"items",get:function(){return this._items}},{key:"checkAll",value:function(e){for(var t in this.inputItems)this.inputItems[t].checked=e;var n,r=Object(x.a)(this._items);try{for(r.s();!(n=r.n()).done;){n.value.selected=e}}catch(a){r.e(a)}finally{r.f()}}},{key:"selectAll",value:function(){this.checkAll(!0),this.list.props.item.onSelect(void 0,!0,this.anySelected)}},{key:"unselectAll",value:function(){this.checkAll(!1),this.list.props.item.onSelect(void 0,!1,this.anySelected)}},{key:"anySelected",get:function(){return this._items.some((function(e){return e.selected}))}},{key:"onSelect",value:function(e,t){e.selected=t,this.list.props.item.onSelect(e.item,t,this.anySelected)}},{key:"selectedItems",get:function(){return this._items.filter((function(e){return!0===e.selected})).map((function(e){return e.item}))}}]),n}(j),C=(n(221),n(59)),S=n(37),N=Object(f.a)((i=a=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).listBase=void 0,r.selectable=void 0,r._$scroll=function(e){console.log("############### items scroll to "+e)},r.buildBase(),r}return Object(s.a)(n,[{key:"buildBase",value:function(){var e=this.props.item,t=e.onClick;void 0!==e.onSelect?this.selectable=this.listBase=new I(this):this.listBase=void 0!==t?new y(this):new k(this)}},{key:"componentDidUpdate",value:function(e,t){!1===v.a.isEqual(this.props.item,e.item)&&(this.buildBase(),this.forceUpdate())}},{key:"componentWillUnmount",value:function(){this.listBase.dispose()}},{key:"selectAll",value:function(){this.selectable&&this.selectable.selectAll()}},{key:"unselectAll",value:function(){this.selectable&&this.selectable.unselectAll()}},{key:"selectedItems",get:function(){return this.listBase.selectedItems}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.header,i=t.footer,c=t.before,s=t.loading,o=t.none,u=t.onFocus;void 0===c&&(c="-"),void 0===s&&(s=function(){return Object(m.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})}),void 0===o&&(o=n.res.none);var l,h,f,p=this.listBase,v=p.items,b=p.loading;function j(e,t){if(e)switch(typeof e){default:case"string":return Object(m.jsx)("li",{className:"va-list-"+t,children:e});case"function":return Object(m.jsx)("li",{className:"va-list-"+t,children:e()});case"object":return Object(m.jsx)("li",{children:e})}}return l=null===v?j(c,"before"):void 0===v?j(s,"loading"):0===v.length?j(o,"none"):v.map((function(t,n){return e.listBase.render(t,n)})),!0===b&&v&&(h=j(s,"loading")),void 0!==u&&(f=-1),Object(m.jsxs)("ul",{className:d()("va-list",r),onFocus:u,tabIndex:f,children:[j(a,"header"),l,h,j(i,"footer")]})}}]),n}(l.Component),a.res=Object(C.a)(S.b),r=i))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r,a=n(10),i=n(3),c=n(4),s=n(5),o=n(6),u=n(9),l=n(16),h=n.n(l),d=n(0),f=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"setValues",value:function(e){}}]),e}(),p=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(e){return Object(d.jsx)("div",{className:"",children:Object(d.jsx)("div",{className:"w-100",children:Object(d.jsx)("div",{style:{borderTop:"1px solid #f0f0f0"}})})},"_b_"+e)}}]),n}(f),v=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this)).param=void 0,r.param=e,r}return Object(c.a)(n,[{key:"render",value:function(e){var t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}var n=h()(t);return Object(d.jsx)("div",{className:n},"_g_"+e)}}]),n}(f),b="justify-content-start",m="justify-content-center",j="justify-content-end",y=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this)).gridProps=void 0,a._prop=void 0,a.content=void 0,a.col=void 0,a.gridProps=e,a._prop=r,a.col=!0===e.labelFixLeft?"col":"col-sm",a}return Object(c.a)(n,[{key:"prop",get:function(){return this._prop}},{key:"render",value:function(e){var t=this.prop,n=t.onClick,r=t.bk,a=h()({"cursor-pointer":void 0!==n,"bg-white":void 0===r,row:!0});return Object(d.jsxs)("div",{className:a,onClick:n,children:[this.renderLabel(),this.renderProp()]},e)}},{key:"renderLabel",value:function(){var e=this.prop.label;return void 0===e?null:Object(d.jsx)("label",{className:this.col+"-3 col-form-label",children:e})}},{key:"renderProp",value:function(){var e,t,n=this.prop.label;switch(this.gridProps.alignValue){case"left":e=b;break;case"center":e=m;break;case"right":e=j}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}var r=this.col+(void 0===n?"-12":"-9"),a=h()(e,t,r,"d-flex");return Object(d.jsx)("div",{className:a,children:this.renderPropBody()})}},{key:"renderPropBody",value:function(){return Object(d.jsx)("div",{className:"form-control-plaintext",children:this.renderPropContent()})}},{key:"renderPropContent",value:function(){return this.content}}]),n}(f),O=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"prop",get:function(){return this._prop}},{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}}]),n}(y),k=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"prop",get:function(){return this._prop}},{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}}]),n}(y),x=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"prop",get:function(){return this._prop}},{key:"setValues",value:function(e){if(void 0===e)this.content=void 0;else{var t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}}},{key:"renderPropBody",value:function(){var e=this.prop,t=e.list,n=e.row,r="string"===typeof t?this.content:t;return void 0===r?Object(d.jsx)("div",{}):Object(d.jsx)("div",{className:"w-100",children:r.map((function(e,t){return Object(d.jsxs)(u.Fragment,{children:[0===t?null:Object(d.jsx)("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),u.createElement(n,e)]},t)}))})}}]),n}(y),g=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"prop",get:function(){return this._prop}},{key:"renderPropBody",value:function(){return this.prop.component}},{key:"renderProp",value:function(){var e,t,n,r=this.prop,a=r.label,i=r.full;switch(this.gridProps.alignValue){case"left":e=b;break;case"center":e=m;break;case"right":e=j}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==i?this.col+(void 0===a?"-12":"-9"):"w-100";var c=h()(e,t,n,"d-flex");return Object(d.jsx)("div",{className:c,children:this.renderPropBody()})}}]),n}(y),w=function(){function e(t,n){Object(i.a)(this,e),this.gridProps=void 0,this.props=void 0,this.rows=void 0,this.gridProps=t,this.props=n,this.buildRows()}return Object(c.a)(e,[{key:"buildRows",value:function(){this.rows=[];var e,t=!0,n=Object(a.a)(this.props);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("string"===typeof r)this.rows.push(new v(r)),t=!0;else{t||this.rows.push(new p);var i=void 0;switch(r.type){default:continue;case"string":i=new O(this.gridProps,r);break;case"number":i=new k(this.gridProps,r);break;case"list":i=new x(this.gridProps,r);break;case"component":i=new g(this.gridProps,r)}this.rows.push(i),t=!1}}}catch(c){n.e(c)}finally{n.f()}}},{key:"setValues",value:function(e){var t,n=Object(a.a)(this.rows);try{for(n.s();!(t=n.n()).done;){t.value.setValues(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"render",value:function(){return this.rows.map((function(e,t){return e.render(String(t))}))}}]),e}(),I=n(11),C=Object(I.a)(r=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.rows,r=e.values,a=new w(this.props,n);a.setValues(r);var i=h()("container-fluid",t);return Object(d.jsx)("div",{className:i,children:a.render()})}}]),n}(u.Component))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r,a,i,c,s,o,u,l,h,d,f,p,v=n(10),b=n(1),m=n.n(b),j=n(24),y=n(2),O=n(42),k=n(3),x=n(4),g=n(15),w=n(5),I=n(6),C=n(32),S=(n(167),n(8)),N=n(112),A=n(17),_=n(106),D=n(111),P=n(46),T=n(113),R=n(9),E=n(7),F=n(11),V=n(30),L=n.n(V),M=n(0),B=function(e){Object(w.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(F.a)((function(){var t=e.controller.baseItem,n=t.name,r=t.code,a=t.day,i=n+" "+r;void 0!==a&&(i+=" - "+a);var c=Object(M.jsx)("div",{children:i});return Object(M.jsx)(E.Page,{header:c,headerClassName:"bg-primary",children:R.createElement(e.pageContent)})})),e.pageContent=Object(F.a)((function(){return Object(M.jsx)(M.Fragment,{children:R.createElement(e.bonus)})})),e.bonus=Object(F.a)((function(){var t=e.controller,n=t.bonus,r=t.dividentOrg;if(r.length>0){var a=Object(M.jsxs)("div",{className:"px-3",children:[Object(M.jsx)("div",{className:"px-3 c8",children:"\u62a5\u671f"}),Object(M.jsx)("div",{className:"px-3 c6 text-right",children:"\u5206\u7ea2"}),Object(M.jsx)("div",{className:"px-3 c6 text-right",children:"\u9664\u6743\u65e5\u671f"})]});return Object(M.jsxs)(M.Fragment,{children:[e.chartBonus(),Object(M.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u5206\u7ea2"}),Object(M.jsx)(E.List,{header:a,loading:"...",items:r.slice().reverse(),item:{render:function(e){return Object(M.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(M.jsx)("div",{className:"px-3 c8",children:"".concat(e.year).concat(e.season)}),Object(M.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",e.divident.toFixed(3)]}),Object(M.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",e.day]})]})}}})]})}var i=Object(M.jsxs)("div",{className:"px-3",children:[Object(M.jsx)("div",{className:"px-3 c8",children:"\u65e5\u671f"}),Object(M.jsx)("div",{className:"px-3 c6 text-right",children:"\u5206\u7ea2"})]});return Object(M.jsxs)(M.Fragment,{children:[e.chartBonus(),Object(M.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u5206\u7ea2"}),Object(M.jsx)(E.List,{header:i,loading:"...",items:n,item:{render:function(e){return Object(M.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(M.jsx)("div",{className:"px-3 c8",children:e.day}),Object(M.jsxs)("div",{className:"px-3 c6 text-right",children:[" ",e.bonus.toFixed(3)]})]})}}})]})})),e.chartBonus=function(){var t=e.controller,n=t.predictBonusData,r=t.dividents;if(void 0!==r){var a=r.length;if(a<=0)return Object(M.jsx)(M.Fragment,{});for(var i=[],c=[],s=[],o=0;o<a;++o){var u=r[o];i.push(u.year),c.push(A.a.numberToPrecision(u.divident)),s.push(A.a.numberToPrecision(u.d3))}var l={labels:i,datasets:[{label:"\u6bcf\u5e74\u5206\u7ea2",data:c,borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1},{label:"3\u5e74\u5747\u503c",data:s,borderColor:"magenta",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:3,pointRadius:5,fill:!1}]};if(c.length>=3){var h=new P.a(c);if(!isNaN(h.slope)&&!isNaN(h.intercept)){for(var d=[],f=0;f<a;++f)d.push(Number.parseFloat(h.predict(f).toPrecision(4)));l.datasets.push({label:"\u7ebf\u6027 R2:"+A.a.numberToString(h.r2,4),data:d,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}}return Object(M.jsx)(L.a,{data:l,type:"line"})}var p=n.length;if(p<=0)return Object(M.jsx)(M.Fragment,{});for(var v=[],b=[],m=0;m<p;++m){var j=n[m];void 0!==j.bonus&&(v.push(j.year),b.push(j.bonus))}var y={labels:v,datasets:[{label:"\u5206\u7ea2\u539f\u503c",data:b.map((function(e){return A.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};if(b.length>=3){var O=new P.a(b);if(!isNaN(O.slope)&&!isNaN(O.intercept)){for(var k=[],x=0;x<p;++x)k.push(Number.parseFloat(O.predict(x).toPrecision(4)));y.datasets.push({label:"\u7ebf\u6027 R2:"+A.a.numberToString(O.r2,4),data:k,borderColor:"blue",backgroundColor:"pink",borderWidth:1,fill:!1})}}return Object(M.jsx)(L.a,{data:y,type:"line"})},e}return Object(x.a)(n,[{key:"open",value:function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(E.VPage),q=function(e){Object(w.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(F.a)((function(){var t=e.controller.baseItem,n=t.name,r=t.code,a=t.day,i=n+" "+r;void 0!==a&&(i+=" - "+a);var c=Object(M.jsx)("div",{children:i});return Object(M.jsx)(E.Page,{header:c,headerClassName:"bg-primary",children:R.createElement(e.pageContent)})})),e.pageContent=Object(F.a)((function(){return Object(M.jsx)(M.Fragment,{children:R.createElement(e.seasonEarning)})})),e.seasonEarning=Object(F.a)((function(){var t=e.controller.seasonData,n=Object(M.jsxs)("div",{className:"px-3",children:[Object(M.jsx)("div",{className:"px-3 c8",children:"\u5e74\u6708"}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:"\u80a1\u672c"}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:"\u8425\u4e1a\u6536\u5165"}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:"\u8425\u4e1a\u5229\u6da6"}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:"\u51c0\u5229\u6da6"})]});return Object(M.jsxs)(M.Fragment,{children:[e.predictChartFullInfo(),Object(M.jsx)("div",{className:"px-3 py-1",children:"\u5386\u5e74\u5229\u6da6\u8868"}),Object(M.jsx)(E.List,{header:n,loading:"...",items:t,item:{render:function(e){var t=e.season,n=e.revenue,r=e.profit,a=e.netprofit,i=e.shares,c=A.a.SeasonnoToYearMonth(t);return Object(M.jsxs)("div",{className:"px-3 py-2 d-flex flex-wrap",children:[Object(M.jsx)("div",{className:"px-3 c8",children:c.toString()}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:A.a.numberToFixString(i,0)}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:A.a.numberToFixString(n,0)}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:A.a.numberToFixString(r,0)}),Object(M.jsx)("div",{className:"px-3 c8 text-right",children:A.a.numberToFixString(a,0)})]})}}})]})})),e.predictChartFullInfo=function(){var t=e.controller.predictSeasonDataFull,n=t.length;if(n<=0)return Object(M.jsx)(M.Fragment,{});for(var r=[],a=[],i=[],c=[],s=[],o=n-1;o>=0;--o){var u=t[o];if(void 0!==u.netprofit){var l=A.a.SeasonnoToYearMonth(u.season);r.push(l),o<n-1&&a.push(l),i.push(u.netprofit),c.push(u.profit),s.push(u.revenue)}}var h=function(e){for(var t=e.length,n=[],r=e[0],a=1;a<t;++a){var i=e[a],c=i-r,s=(i+r)/2;s>1e-4?n.push(100*c/s):n.push(void 0),r=i}return n},d=h(i),f=h(c),p=h(s),v={labels:a,datasets:[{label:"\u51c0\u5229\u6da6",data:d.map((function(e){return A.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};v.datasets.push({label:"\u8425\u4e1a\u5229\u6da6",data:f.map((function(e){return A.a.numberToPrecision(e)})),borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1}),v.datasets.push({label:"\u8425\u4e1a\u6536\u5165",data:p.map((function(e){return A.a.numberToPrecision(e)})),borderColor:"blue",backgroundColor:"skyBlue",borderWidth:1,fill:!1});var b={labels:r,datasets:[{label:"\u51c0\u5229\u6da6",data:i.map((function(e){return A.a.numberToPrecision(e)})),borderColor:"black",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};b.datasets.push({label:"\u8425\u4e1a\u5229\u6da6",data:c,borderColor:"red",backgroundColor:"pink",borderWidth:1,fill:!1});var m={labels:r,datasets:[{label:"\u8425\u4e1a\u6536\u5165",data:s,borderColor:"blue",backgroundColor:"skyBlue",pointStyle:"crossRot",borderWidth:1,pointRadius:5,fill:!1}]};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(L.a,{data:m,type:"line"}),Object(M.jsx)(L.a,{data:v,type:"line"}),Object(M.jsx)(L.a,{data:b,type:"line"})]})},e}return Object(x.a)(n,[{key:"open",value:function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(E.VPage),U=(r=function(e){Object(w.a)(n,e);var t=Object(I.a)(n);function n(e){var r;return Object(k.a)(this,n),(r=t.call(this,e)).stock=void 0,Object(O.a)(r,"baseItem",a,Object(g.a)(r)),Object(O.a)(r,"loaded",i,Object(g.a)(r)),Object(O.a)(r,"price",c,Object(g.a)(r)),Object(O.a)(r,"seasonData",s,Object(g.a)(r)),Object(O.a)(r,"predictSeasonData",o,Object(g.a)(r)),Object(O.a)(r,"predictSeasonDataFull",u,Object(g.a)(r)),Object(O.a)(r,"predictData",l,Object(g.a)(r)),Object(O.a)(r,"predictBonusData",h,Object(g.a)(r)),Object(O.a)(r,"ypredict",d,Object(g.a)(r)),Object(O.a)(r,"mirates",f,Object(g.a)(r)),Object(O.a)(r,"mivalues",p,Object(g.a)(r)),r._capitalearning=S.p.array([],{deep:!0}),r._bonus=S.p.array([],{deep:!0}),r._divideInfo=S.p.array([],{deep:!0}),r._sharesArr=[],r._divident=S.p.array([],{deep:!0}),r.miNet=void 0,r.initLoad=function(){r.load()},r.load=Object(y.a)(m.a.mark((function e(){var t,n,a,i,c,s,o,u,l,h,d,f,p,v,b,y,O,k,x,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.baseItem){e.next=2;break}return e.abrupt("return");case 2:if(t=r.baseItem,n=t.rawId,a=t.day,void 0===(i=t.trackDay)){e.next=9;break}return e.next=6,Promise.all([r.miNet.q_stockallinfotrack(n,i)]);case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,Promise.all([r.miNet.q_stockallinfo(n,a)]);case 11:c=e.sent;case 12:s=c[0],Array.isArray(s[0])&&(u=s[1],Array.isArray(u)&&(r.price=u[0]),r._bonus.clear(),r._divideInfo.clear(),r._capitalearning.clear(),l=s[3],Array.isArray(l)&&((h=r._divideInfo).push.apply(h,Object(j.a)(l)),f=l.filter((function(e){return e.\u6d3e\u606f>0})).map((function(e){return{day:e.day,bonus:e.\u6d3e\u606f,shares:e.shares}})),(d=r._bonus).push.apply(d,Object(j.a)(f))),r._sharesArr=s[5],r.mivalues.splice(0),p=s[7],v=[],p.length>0&&void 0!==(b=p[0].volume)&&(p.forEach((function(e){var t=e.season,n=e.mivalue,r=e.volume;if(void 0!==n&&null!==r){var a=n*r/b;v.unshift({season:t,mivalue:a})}})),(y=r.mivalues).push.apply(y,v)),v.length,O=s[6],k=[],x=1,O.length>0&&(g=O[0],x=g.exright),O.forEach((function(e){var t=e.day,n=e.mirate,r=e.price*e.exright/x;k.unshift({day:t,mirate:n,price:r})})),r.mirates.splice(0),(o=r.mirates).push.apply(o,k),r.loadTTMEarning(s[2]),r.LoadDivident(s[8]),r.LoadBonusData()),r.loaded=!0;case 15:case"end":return e.stop()}}),e)}))),r.openMetaView=function(){},r.showBonus=function(){r.openVPage(B)},r.showProfit=function(){r.openVPage(q)},Object(S.o)(Object(g.a)(r)),r.miNet=new T.a(r.user),r}return Object(x.a)(n,[{key:"capitalearning",get:function(){if(!1!==this.loaded)return this._capitalearning}},{key:"bonus",get:function(){if(!1!==this.loaded)return this._bonus}},{key:"divideInfo",get:function(){if(!1!==this.loaded)return this._divideInfo}},{key:"dividentOrg",get:function(){if(!1!==this.loaded)return this._divident}},{key:"dividents",get:function(){if(!1!==this.loaded&&!(this._divident.length<=0)){var e,t=this.baseItem,n=t.day,r=t.trackDay,a=r;void 0===a&&(a=n),e=Math.floor(a/1e4)-1,Math.floor(a%1e4/100)<4&&e--;var i,c=this.getLastTotalShares(),s={},o=[],u=void 0,l=0,h=Object(v.a)(this._divident);try{for(h.s();!(i=h.n()).done;){var d=i.value,f=d.year,p=d.divident,b=d.day;d.season;(void 0===u||f<u)&&(u=f),f>l&&(l=f);var m=void 0;if(!((m=void 0===b?c:this.getTotalShares(b))<=0||void 0===m||null===m||p<=0)){var j=s[f];s[f]=void 0===j?{bonus:p*m}:{bonus:j.bonus+p*m}}}}catch(w){h.e(w)}finally{h.f()}l>e&&void 0===r&&(e=l);for(var y=function(e){for(var t=0,n=e;n>e-3;--n){var r=s[n];void 0!==r&&(t+=r.bonus)}return 0!==t?t/3:void 0},O=u;O<=e;O++){var k=s[O],x=void 0!==k?k.bonus/c:void 0,g=void 0;O>=u+2&&void 0!==(g=y(O))&&(g/=c),o.push({year:O,divident:x,d3:g})}return o}}},{key:"getTotalShares",value:function(e){for(var t=void 0,n=0;n<this._sharesArr.length;++n){var r=this._sharesArr[n];if(t=r.shares,e>=r.day)break}return t}},{key:"getLastTotalShares",value:function(){var e=void 0;this._sharesArr.length>0&&(e=this._sharesArr[0].shares);return e}},{key:"loadTTMEarning",value:function(e){var t,n,r,a;this.seasonData.splice(0);var i={},c=e.length;if(!(c<=0)){var s,o=e[c-1].seasonno,u=e[0],l=u.shares,h=u.seasonno,d=[],f=Object(v.a)(e);try{for(f.s();!(s=f.n()).done;){var p=s.value,b=p.seasonno,m={season:b,c:p.capital*p.shares/l,corg:p.capital,shares:p.shares,revenue:p.revenue,profit:p.profit,netprofit:p.netprofit};i[b]=m;var j=A.a.GetSeasonnoYearMonth(b);if(12===j.month){var y={year:j.year,capital:p.capital,earning:p.netprofit/p.shares};d.push(y)}}}catch(F){f.e(F)}finally{f.f()}(t=this._capitalearning).push.apply(t,d);for(var O=0,k=[],x=o;x<=h;++x,++O){var g=i[x];void 0!==g&&k.unshift(g)}(n=this.seasonData).push.apply(n,k);var w=h-19;if(this.predictData=void 0,this.predictSeasonData.splice(0),this.predictSeasonDataFull.splice(0),!(w<o)){w+=3,this.ypredict.splice(0);for(var I=[],C=w;C<=h;C+=4){var S=i[C];if(void 0===S)break;this.predictSeasonData.splice(0,0,S),I.push(S.netprofit/l)}(r=this.ypredict).push.apply(r,I);for(var N=[],_=h;_>=o;_-=4){var T=i[_];if(void 0===T)break;N.push(T)}if((a=this.predictSeasonDataFull).push.apply(a,N),5===this.ypredict.length){var R=new D.a(this.ypredict),E=new P.a(this.ypredict);this.predictData={e:this.ypredict[4],b:R.B,r2:R.r2,epre:R.predict(4),l:E.slopeR,lr2:E.r2,lpre:E.predict(4)}}else this.predictSeasonData.splice(0)}}}},{key:"LoadDivident",value:function(e){var t;this._divident.clear();var n,r=[],a=Object(v.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=i.year,s=i.season,o=i.divident,u=i.dday;r.push({year:c,season:s,divident:o,day:u})}}catch(l){a.e(l)}finally{a.f()}(t=this._divident).push.apply(t,r)}},{key:"LoadBonusData",value:function(){var e;if(this.predictBonusData.splice(0),!(void 0===this._sharesArr||this._sharesArr.length<=0)){var t,n=this.baseItem.trackDay;if(void 0===n){var r=new Date;t=A.a.SeasonnoFromYearMonth(r.getFullYear(),r.getMonth()+1)-2}else t=A.a.SeasonnoFromYearMonth(Math.floor(n/1e4),Math.floor(n%1e4/100));var a,i=-1,c={},s={},o=Object(v.a)(this._bonus);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=u.day,h=u.bonus,d=u.shares;if(!(d<=0||h<=0)&&!(l<19950101)){var f=A.a.SeasonnoFromDayForBonus(l);c[f]={bonus:h,shares:d},(i<0||f<i)&&(i=f),f>t&&(t=f)}}}catch(S){o.e(S)}finally{o.f()}for(var p=function(e){for(var t=0,n=e-3;n<e;++n){var r=c[n];void 0!==r&&(t+=r.bonus*r.shares)}return t},b=i;b<=t;++b){var m=c[b],j=0;if(void 0===m){var y=A.a.SeasonnoToBeginEnd(b).end;m={bonus:0,shares:this.getTotalShares(y)}}else j=m.bonus*m.shares;j+=p(b),j/=m.shares,s[b]={bonus:j,bs:m.bonus,shares:m.shares}}var O=s[t];if(void 0!==O){var k=O.shares;if(!(void 0===k||k<=0)){for(var x=[],g=t;g>=t-16;g-=4){var w=s[g];if(void 0===w)break;var I=0;w.bonus>0&&w.shares>0&&(I=w.bonus*w.shares/k);var C=A.a.GetSeasonnoYearMonth(g);x.unshift({year:C.year,bonus:I})}(e=this.predictBonusData).push.apply(e,x)}}}}},{key:"internalStart",value:function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.baseItem=t,this.stock=t.stock,this.initLoad(),this.openVPage(_.a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(N.b),a=Object(C.a)(r.prototype,"baseItem",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(C.a)(r.prototype,"loaded",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(C.a)(r.prototype,"price",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(C.a)(r.prototype,"seasonData",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(C.a)(r.prototype,"predictSeasonData",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=Object(C.a)(r.prototype,"predictSeasonDataFull",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(C.a)(r.prototype,"predictData",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(C.a)(r.prototype,"predictBonusData",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(C.a)(r.prototype,"ypredict",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=Object(C.a)(r.prototype,"mirates",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=Object(C.a)(r.prototype,"mivalues",[S.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(C.a)(r.prototype,"capitalearning",[S.h],Object.getOwnPropertyDescriptor(r.prototype,"capitalearning"),r.prototype),Object(C.a)(r.prototype,"bonus",[S.h],Object.getOwnPropertyDescriptor(r.prototype,"bonus"),r.prototype),Object(C.a)(r.prototype,"divideInfo",[S.h],Object.getOwnPropertyDescriptor(r.prototype,"divideInfo"),r.prototype),Object(C.a)(r.prototype,"dividentOrg",[S.h],Object.getOwnPropertyDescriptor(r.prototype,"dividentOrg"),r.prototype),Object(C.a)(r.prototype,"dividents",[S.h],Object.getOwnPropertyDescriptor(r.prototype,"dividents"),r.prototype),r)},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(5),u=n(6),l=n(7),h=n(28),d=n(34),f=n(0),p=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"header",value:function(){return this.controller.field}},{key:"content",value:function(){return this.renderVm(v)}}]),n}(l.VPage),v=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(e,t){var n=e.t,r=e.v,a=e.u,i=Object(f.jsx)("div",{className:"w-12c",children:Object(f.jsx)(l.EasyTime,{date:new Date(n)})}),c=Object(f.jsx)(l.UserView,{user:a,render:function(e){var t=e.name,n=e.nick;return Object(f.jsx)("small",{className:"text-muted",children:n||t})}});return Object(f.jsx)("div",{className:"px-3 py-2",children:Object(f.jsx)(l.LMR,{className:"w-100",left:i,right:c,children:r})})},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(l.List,{items:this.controller.historyItems,item:{render:this.renderItem,key:function(e){return e.t}}})})}}]),n}(l.View);d.a,l.PageItems},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(4),o=n(15),u=n(5),l=n(6),h=n(9),d=n(8),f=n(14),p=n(21),v=n(0);h.Component,n(124)},function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return E}));var r=n(10),a=n(15),i=n(1),c=n.n(i),s=n(2),o=n(3),u=n(4),l=n(23),h=n(20),d=n(5),f=n(6),p=n(19),v=n.n(p),b=n(33),m=n(38),j=n(24),y=n(8),O=function(){function e(t){Object(o.a)(this,e),this.queue=[],this.cache=y.p.map({},{deep:!1}),this.localArr=void 0,this.waitingIds=[],this.tuidInner=void 0,this.tuidInner=t,this.initLocalArr()}return Object(u.a)(e,[{key:"initLocalArr",value:function(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")}},{key:"useId",value:function(e,t){if(e)if("number"===typeof e)if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex((function(t){return t===e}))>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){var n=this.queue.shift();if(n===e)return void this.queue.push(n);if(!0===this.cache.has(n))this.cache.delete(n);else{var r=this.waitingIds.findIndex((function(e){return e===n}));this.waitingIds.splice(r,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e);else console.error("id cache "+e+" is not number")}},{key:"moveToHead",value:function(e){var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1),this.queue.push(e)}},{key:"getValue",value:function(e){return this.cache.get(e)}},{key:"remove",value:function(e){this.cache.delete(e);var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1),this.localArr.removeItem(e)}},{key:"valueFromId",value:function(e){var t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)}},{key:"resetCache",value:function(e){this.remove(e),this.useId(e)}},{key:"cacheValue",value:function(e){if(void 0===e)return!1;var t=this.getIdFromObj(e);return void 0!==t&&(this.cache.set(t,e),!0)}},{key:"getIdFromObj",value:function(e){return this.tuidInner.getIdFromObj(e)}},{key:"cacheIds",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadIds();case 2:t=e.sent,this.cacheIdValues(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheIdValues",value:function(e){if(void 0!==e){var t,n=this.unpackTuidIds(e),a=Object(r.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;!1!==this.cacheValue(i)&&this.cacheTuidFieldValues(i)}}catch(c){a.e(c)}finally{a.f()}}}},{key:"modifyIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTuidIdsOrLocal(t);case 2:if(n=e.sent,0!==(r=n.filter((function(e){var t=e.indexOf("\t");t<0&&(t=e.length);var n=Number(e.substr(0,t));return void 0!==a.localArr.getItem(n)}))).length){e.next=6;break}return e.abrupt("return");case 6:this.cacheIdValues(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadIds",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.waitingIds.length){e.next=2;break}return e.abrupt("return");case 2:return t=Object(j.a)(this.waitingIds),this.waitingIds=[],e.next=6,this.loadTuidIdsOrLocal(t);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unpackTuidIds",value:function(e){return this.tuidInner.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.tuidInner.cacheTuidFieldValues(e)}},{key:"assureObj",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.cache.get(t),e.t0=typeof n,e.next="object"===e.t0?4:"number"===e.t0?5:7;break;case 4:return e.abrupt("return",n);case 5:return this.cache.set(t,t),e.abrupt("break",7);case 7:return e.next=9,this.loadTuidIdsOrLocal([t]);case 9:r=e.sent,this.cacheIdValues(r);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTuidIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidInner.loadTuidIds(void 0,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTuidIdsOrLocal",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,i,s,o,u,l,h,d,f,p,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],i=Object(r.a)(t);try{for(i.s();!(s=i.n()).done;)o=s.value,(u=this.localArr.getItem(o))?n.push(u):a.push(o)}catch(c){i.e(c)}finally{i.f()}if(0!==(l=a.length)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,this.loadTuidIds(a);case 9:h=e.sent,d=function(e){var t=h[e];if(!t)return"continue";var r=t.indexOf("\t");r<0&&(r=t.length);var i=Number(t.substr(0,r));v.a.remove(a,(function(e){return e===i})),n.push(t),b.localArr.setItem(i,t)},f=0;case 12:if(!(f<l)){e.next=19;break}if("continue"!==d(f)){e.next=16;break}return e.abrupt("continue",16);case 16:f++,e.next=12;break;case 19:for(l=a.length,p=0;p<l;p++)this.localArr.setItem(a[p],"");return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var a;return Object(o.a)(this,n),(a=t.call(this,e)).div=void 0,a.divName=void 0,a.div=r,a.divName=r.name,a.localArr=e.cache.arr(e.name+".ids."+a.divName),a}return Object(u.a)(n,[{key:"initLocalArr",value:function(){}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"unpackTuidIds",value:function(e){return this.div.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.div.cacheTuidFieldValues(e)}},{key:"loadTuidIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidInner.loadTuidIds(this.divName,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(O),x=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).noCache=void 0,e.typeName="tuid",e.idName=void 0,e.cached=void 0,e.unique=void 0,e.isImport=!1,e}return Object(u.a)(n,[{key:"setSchema",value:function(e){Object(l.a)(Object(h.a)(n.prototype),"setSchema",this).call(this,e);var t=e.id;this.idName=t}},{key:"buildTuidBox",value:function(){return new F(this)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"stopCache",value:function(){this.noCache=!0}},{key:"cacheIds",value:function(){}},{key:"modifyIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"idValue",value:function(e){var t=typeof e;switch(t){default:throw new Error("unknown id type: "+t);case"undefined":return;case"object":return e.id;case"number":return e}}},{key:"equ",value:function(e,t){return void 0!==e&&null!==e&&(void 0!==t&&null!==t&&x.idValue(e)===x.idValue(t))}}]),n}(b.a)),g=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var c;return Object(o.a)(this,n),(c=t.call(this,e,r,i)).divs=void 0,c.cacheFields=void 0,c.idCache=void 0,c.localArr=void 0,c.idCache=new O(Object(a.a)(c)),c.localArr=c.cache.arr(c.name+".whole"),!0===e.newVersion&&c.localArr.removeAll(),c}return Object(u.a)(n,[{key:"setSchema",value:function(e){Object(l.a)(Object(h.a)(n.prototype),"setSchema",this).call(this,e);var t=e.arrs;if(void 0!==t){this.divs={};var a,i=Object(r.a)(t);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=c.name,o=new V(this.uq,this,s);this.divs[s]=o,o.setSchema(c),o.buildFieldsTuid()}}catch(u){i.e(u)}finally{i.f()}}}},{key:"useId",value:function(e,t){!0!==this.noCache&&e&&this.idCache.useId(e,t)}},{key:"boxId",value:function(e){if(e){if("object"===typeof e)return e;this.useId(e);var t=this.uq.createBoxId;return t?t(this,e):{id:e}}}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"resetCache",value:function(e){"object"===typeof e&&(e=e.id),this.idCache.resetCache(e)}},{key:"assureBox",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return"object"===typeof t&&(t=t.id),e.next=5,this.idCache.assureObj(t);case 5:return e.abrupt("return",this.idCache.getValue(t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){if(this.idCache.cacheIds(),void 0!==this.divs)for(var e in this.divs)this.divs[e].cacheIds()}},{key:"modifyIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.modifyIds(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuids",value:function(e){this.uq.cacheTuids(e)}},{key:"hasDiv",get:function(){return void 0!==this.divs}},{key:"div",value:function(e){return this.divs&&this.divs[e]}},{key:"loadTuidIds",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new C(this,{divName:t,ids:n},!1).request();case 2:return(r=e.sent).length>0&&(this.cached=!0),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadMain",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===typeof t&&(t=t.id),e.next=3,this.idCache.assureObj(t);case 3:return e.abrupt("return",this.idCache.valueFromId(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,i,s,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t){e.next=2;break}return e.abrupt("return");case 2:"object"===typeof t&&(t=t.id),void 0,e.next=8;break;case 8:return e.next=10,new I(this,t).request();case 10:n=e.sent;case 12:if(void 0!==n){e.next=14;break}return e.abrupt("return");case 14:a=Object(r.a)(this.schema.fields),e.prev=15,a.s();case 17:if((i=a.n()).done){e.next=29;break}if(s=i.value,void 0!==(o=s.tuid)){e.next=22;break}return e.abrupt("continue",27);case 22:if(void 0!==(u=this.uq.getTuid(o))){e.next=25;break}return e.abrupt("continue",27);case 25:l=s.name,n[l]=u.boxId(n[l]);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(15),a.e(e.t0);case 34:return e.prev=34,a.f(),e.finish(34);case 37:return this.idCache.cacheValue(n),this.cacheTuidFieldValues(n),e.abrupt("return",n);case 40:case"end":return e.stop()}}),e,this,[[15,31,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema,n=t.fields,a=t.arrs;if(this.cacheFieldsInValue(e,n),void 0!==a){var i,c=Object(r.a)(a);try{for(c.s();!(i=c.n()).done;){var s=i.value,o=s.name,u=s.fields,l=e[o];if(void 0!==l){var h,d=this.div(o),f=Object(r.a)(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;d.cacheValue(p),this.cacheFieldsInValue(p,u)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){c.e(v)}finally{c.f()}}}},{key:"buildFieldsTuid",value:function(){Object(l.a)(Object(h.a)(n.prototype),"buildFieldsTuid",this).call(this);var e=this.schema,t=e.mainFields,r=e.$create,a=e.$update,i=e.stampOnMain;this.cacheFields=t||this.fields,!0===i&&(!0===r&&this.cacheFields.push({name:"$create",type:"timestamp",_tuid:void 0}),!0===a&&this.cacheFields.push({name:"$update",type:"timestamp",_tuid:void 0})),this.uq.buildFieldTuid(this.cacheFields)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}},{key:"save",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new S(this,{id:t,props:n}).request();case 2:return r=e.sent,void 0!==t&&(this.idCache.remove(t),this.localArr.removeItem(t)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveProp",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new D(this,{id:t,prop:n,value:r}).request();case 2:return this.idCache.remove(t),e.next=5,this.idCache.assureObj(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new A(this,{}).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchArr(void 0,t,n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,a,i){var s,o,u,l,h,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={arr:void 0,owner:t,key:n,pageStart:a,pageSize:i},e.next=3,new N(this,s).request();case 3:o=e.sent,u=this.schema.fields,l=Object(r.a)(o);try{for(l.s();!(h=l.n()).done;)d=h.value,this.cacheFieldsInValue(d,u)}catch(c){l.e(c)}finally{l.f()}return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r&&0!==r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new _(this,{arr:t,owner:n,id:r}).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new P(this,{arr:t,owner:n,id:r,props:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new T(this,{arr:t,owner:n,id:r,order:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"no",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new R(this,void 0).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x),w=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"entity",get:function(){return this._entity}}]),n}(m.b),I=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(u.a)(n,[{key:"path",get:function(){return"tuid/".concat(this.entity.name,"/").concat(this.params)}}]),n}(w),C=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){var e=this.params.divName;return"tuidids/".concat(this.entity.name,"/").concat(void 0!==e?e:"$")}},{key:"buildParams",value:function(){return this.params.ids}},{key:"xresult",value:function(e){return e.split("\n")}}]),n}(w),S=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"tuid/".concat(this.entity.name)}},{key:"buildParams",value:function(){var e=this.entity.schema,t=e.fields,n=e.arrs,a=this.params,i=a.id,c=a.props,s={$id:i};if(this.transParams(s,c,t),void 0!==n){var o,u=Object(r.a)(n);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=l.name,d=[],f=l.fields,p=c[h];if(void 0!==p){var v,b=Object(r.a)(p);try{for(b.s();!(v=b.n()).done;){var m=v.value,j={};this.transParams(j,m,f),d.push(j)}}catch(y){b.e(y)}finally{b.f()}}s[h]=d}}catch(y){u.e(y)}finally{u.f()}}return s}},{key:"transParams",value:function(e,t,n){if(void 0!==t){var a,i=Object(r.a)(n);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=c.name,o=c.tuid,u=c.type,l=t[s];if(void 0!==o)"object"===typeof l&&null!==l&&(l=l.id);else switch(u){case"date":l=this.entity.buildDateParam(l);break;case"datetime":l=this.entity.buildDateTimeParam(l)}e[s]=l}}catch(h){i.e(h)}finally{i.f()}}}}]),n}(w),N=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"tuids/".concat(this.entity.name)}}]),n}(w),A=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(u.a)(n,[{key:"path",get:function(){return"tuid-all/".concat(this.entity.name)}}]),n}(w),_=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(u.a)(n,[{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner,r=e.id;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/").concat(r)}}]),n}(w),D=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"tuid-prop/".concat(this.entity.name,"/")}}]),n}(w),P=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}},{key:"buildParams",value:function(){var e=this.params,t=e.id,n=e.props,r=v.a.clone(n);return r.$id=t,r}}]),n}(w),T=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr-pos/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}},{key:"buildParams",value:function(){var e=this.params;return{bid:e.id,$order:e.order}}}]),n}(w),R=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"tuid-no/".concat(this.entity.name,"/")}},{key:"buildParams",value:function(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}}]),n}(w),E=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,a,i){var c;return Object(o.a)(this,n),(c=t.call(this,e,r,a)).tuidLocal=void 0,c.from=void 0,c.isImport=!0,c.from=i,c}return Object(u.a)(n,[{key:"setFrom",value:function(e){this.tuidLocal=e}},{key:"useId",value:function(e){this.tuidLocal.useId(e)}},{key:"boxId",value:function(e){return this.tuidLocal.boxId(e)}},{key:"valueFromId",value:function(e){return this.tuidLocal.valueFromId(e)}},{key:"resetCache",value:function(e){this.tuidLocal.resetCache(e)}},{key:"assureBox",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.assureBox(t);case 2:return e.abrupt("return",this.tuidLocal.valueFromId(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDiv",get:function(){var e;return null===(e=this.tuidLocal)||void 0===e?void 0:e.hasDiv}},{key:"div",value:function(e){var t;return null===(t=this.tuidLocal)||void 0===t?void 0:t.div(e)}},{key:"loadMain",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadMain(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.load(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.save(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveProp",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.saveProp(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.all();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.search(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.searchArr(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadArr(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.saveArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.posArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"no",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.no();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x),F=function(){function e(t){Object(o.a)(this,e),this.tuid=void 0,this.ownerField=void 0,this.tuid=t}return Object(u.a)(e,[{key:"boxId",value:function(e){return this.tuid.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.tuid.getIdFromObj(e)}},{key:"useId",value:function(e){return this.tuid.useId(e)}},{key:"showInfo",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("showInfo not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),V=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var c;return Object(o.a)(this,n),(c=t.call(this,e,i,0)).typeName="div",c.cacheFields=void 0,c.tuid=void 0,c.idName=void 0,c.idCache=void 0,c.tuid=r,c.idName="id",c.idCache=new k(r,Object(a.a)(c)),c}return Object(u.a)(n,[{key:"owner",get:function(){return this.tuid}},{key:"buildFieldsTuid",value:function(){Object(l.a)(Object(h.a)(n.prototype),"buildFieldsTuid",this).call(this);var e=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=e)}},{key:"buildTuidDivBox",value:function(e){return new L(this.tuid,this,e)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"cacheValue",value:function(e){this.idCache.cacheValue(e)}},{key:"useId",value:function(e,t){!0!==this.noCache&&this.idCache.useId(e,t)}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"assureBox",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.assureObj(t);case 2:return e.abrupt("return",this.idCache.getValue(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.cacheIds();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema.fields;this.cacheFieldsInValue(e,t)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}}]),n}(g),L=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,a){var i;return Object(o.a)(this,n),(i=t.call(this,e)).ownerField=void 0,i.div=void 0,i.div=r,i.ownerField=a,i}return Object(u.a)(n,[{key:"boxId",value:function(e){return this.div.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"useId",value:function(e){return this.div.useId(e)}}]),n}(F)},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(12),c=n(2),s=n(3),o=n(4),u=n(5),l=n(6),h=n(52),d=n(108);n(34).a},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(12),c=n(2),s=n(3),o=n(4),u=n(5),l=n(6),h=n(52),d=n(107);n(34).a},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildTsUqFolder}));var D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),fs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),fs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__),_tool__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13),_buildUQ__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(184),_fieldItem__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(114),_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(22);function buildTsUqFolder(e,t,n){var r=t+"/"+n;!1===fs__WEBPACK_IMPORTED_MODULE_2___default.a.existsSync(r)&&fs__WEBPACK_IMPORTED_MODULE_2___default.a.mkdirSync(r);var a=Object(_tools__WEBPACK_IMPORTED_MODULE_6__.a)();a+=Object(_buildUQ__WEBPACK_IMPORTED_MODULE_4__.a)(e,n),Object(_tools__WEBPACK_IMPORTED_MODULE_6__.e)("".concat(r,"/").concat(n,".ts"),a),saveTsIndexAndRender(r,e,n)}function saveTsIndexAndRender(e,t,n){for(var r="",a="",i=t.idArr,c=t.idxArr,s=t.ixArr,o=0,u=[].concat(Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(i),Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(c),Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(s));o<u.length;o++){var l=u[o],h=Object(_tool__WEBPACK_IMPORTED_MODULE_3__.d)(l.name);r+="\nimport * as ".concat(h," from './").concat(h,".ui';"),a+="\n\tObject.assign(uq.".concat(h,", ").concat(h,");");var d='import { Res, setRes, TFunc, UI } from "tonva-react";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { FieldItem, FieldItemNumber, FieldItemString, FieldItemId } from "tonva-react";\nimport { '.concat(h,' } from "./').concat(n,'";\n\n/*--fields--*/\nconst fields = {\n};\n/*==fields==*/\n\nconst fieldArr: FieldItem[] = [\n];\n\nexport const ui: UI = {\n\tlabel: "').concat(h,'",\n\tfieldArr,\n\tfields,\n};\n\nconst resRaw: Res<any> = {\n\t$zh: {\n\t},\n\t$en: {\n\t}\n};\nconst res: any = {};\nsetRes(res, resRaw);\n\nexport const t:TFunc = (str:string|JSX.Element): string|JSX.Element => {\n\treturn res[str as string] ?? str;\n}\n\nexport function render(item: ').concat(h,"):JSX.Element {\n\treturn <>{JSON.stringify(item)}</>;\n};\n"),f="".concat(e,"/").concat(h,".ui.tsx");Object(_tools__WEBPACK_IMPORTED_MODULE_6__.i)(f,d);var p=buildFields(l),v=buildFieldArr(l);replaceTsFileFields(f,p);var b="import { FieldItem, ",m=' } from "tonva-react";';replaceTsFileString(f,{begin:b,end:m,content:'import { FieldItem, FieldItemInt, FieldItemNum, FieldItemString, FieldItemId } from "tonva-react";'}),replaceTsFileString(f,{begin:"\nconst fieldArr: FieldItem[] = [\n",end:"\n];\n",content:v})}var j="import { UqExt as Uq } from './".concat(n,"';").concat(r,"\n\nexport function setUI(uq: Uq) {").concat(a,"\n}\nexport * from './").concat(n,"';\n");Object(_tools__WEBPACK_IMPORTED_MODULE_6__.e)("".concat(e,"/index.ts"),j)}function buildFields(e){switch(e.typeName){case"id":return buildIDFields(e);case"idx":return buildIDXFields(e);case"ix":return buildIXFields(e)}}function buildIDFields(e){var t,n={},r=e.schema,a=r.keys,i=r.fields,c=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(i);try{var s=function(){var e=t.value,r=e.name,i=(null===a||void 0===a?void 0:a.findIndex((function(e){return e.name===r})))>=0;n[r]=Object(_fieldItem__WEBPACK_IMPORTED_MODULE_5__.a)(e,i)};for(c.s();!(t=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return n}function buildIDXFields(e){var t,n={},r=e.schema,a=r.keys,i=r.fields,c=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(i);try{var s=function(){var e=t.value,r=e.name,i=(null===a||void 0===a?void 0:a.findIndex((function(e){return e.name===r})))>=0;n[r]=Object(_fieldItem__WEBPACK_IMPORTED_MODULE_5__.a)(e,i)};for(c.s();!(t=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return n}function buildIXFields(e){var t,n={},r=e.schema,a=r.keys,i=r.fields,c=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(i);try{var s=function(){var e=t.value,r=e.name,i=(null===a||void 0===a?void 0:a.findIndex((function(e){return e.name===r})))>=0;n[r]=Object(_fieldItem__WEBPACK_IMPORTED_MODULE_5__.a)(e,i)};for(c.s();!(t=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return n}function buildFieldArr(e){var t="\nconst fieldArr: FieldItem[] = [\n\t";switch(e.typeName){case"id":t+=buildIDFieldArr(e);break;case"idx":t+=buildIDXFieldArr(e);break;case"ix":t+=buildIXFieldArr(e)}return t+"\n];\n"}function buildIDFieldArr(e){var t,n=e.schema,r="",a=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(n.fields);try{for(a.s();!(t=a.n()).done;){var i=t.value.name;"id"!==i&&(r+="fields.".concat(i,", "))}}catch(c){a.e(c)}finally{a.f()}return r}function buildIDXFieldArr(e){var t,n=e.schema,r="",a=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(n.fields);try{for(a.s();!(t=a.n()).done;){var i=t.value.name;"id"!==i&&(r+="fields.".concat(i,", "))}}catch(c){a.e(c)}finally{a.f()}return r}function buildIXFieldArr(e){var t,n=e.schema,r="",a=Object(D_Web_mifen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(n.fields);try{for(a.s();!(t=a.n()).done;){var i=t.value.name;"ix"!==i&&("id"!==i&&(r+="fields.".concat(i,", ")))}}catch(c){a.e(c)}finally{a.f()}return r}function replaceTsFileFields(e,t){var n=fs__WEBPACK_IMPORTED_MODULE_2___default.a.readFileSync(e).toString(),r="\n/*--fields--*/",a=n.indexOf(r);if(a>0){var i=n.indexOf("\n/*==fields==*/\n",a+r.length);if(i>0){var c=n.indexOf("{",a+r.length),s=n.lastIndexOf("}",i),o=buildFieldsFromOldText(t,n.substring(c,s+1));n=n.substring(0,a)+r+"\nconst fields = {"+o+"\n};"+n.substring(i),fs__WEBPACK_IMPORTED_MODULE_2___default.a.writeFileSync(e,n)}}}var fieldItemReplaceProps=["label","placeholder","widget","type"];function buildFieldsFromOldText(e,t){var n="";for(var r in e){var a=e[r];setFieldOldProp(a,t),n+=buildFieldText(a)}return n}function setFieldOldProp(field,text){var fieldStart=field.name+":",start=text.indexOf("\t"+fieldStart);if(start<0&&(start=text.indexOf("\n"+fieldStart)),start<0&&(start=text.indexOf(" "+fieldStart)),!(start<0)){++start;var end=text.indexOf("}",start+fieldStart.length);if(!(end<0)){var fieldText=text.substring(start+fieldStart.length,end+1),obj=eval("("+fieldText+")");fieldItemReplaceProps.forEach((function(e){var t=obj[e];t&&"type"!==e&&(field[e]=t)}))}}}function buildFieldText(e){var t=e.$FieldItemType;delete e.$FieldItemType;var n="\n\t"+e.name+": ",r=JSON.stringify(e,null,"\t\t");return(n+=r=r.replace("}","\t}"))+" as "+t+","}function replaceTsFileString(e,t){var n=fs__WEBPACK_IMPORTED_MODULE_2___default.a.readFileSync(e).toString(),r=t.begin,a=t.end,i=t.content,c=n.indexOf(r);if(!(c<0)){var s=n.indexOf(a,c+r.length-1);s<0||(n=n.substring(0,c)+i+n.substr(s+a.length),fs__WEBPACK_IMPORTED_MODULE_2___default.a.writeFileSync(e,n))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(10),a=n(13),i=n(22);function c(e,t){var n="\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { IDXValue, Uq",r="\n\n";function i(e,t,a){if(0!==e.length){var i=r.length;e.forEach((function(e){return r+=a(e)})),r.length-i>0&&(n+=", Uq"+t)}}return r+="\n//===============================",r+="\n//======= UQ ".concat(e.name," ========"),r+="\n//===============================",r+="\n",e.enumArr.forEach((function(e){return r+=s(e,y)})),e.tuidArr.forEach((function(e){return r+=s(e,b)})),e.actionArr.forEach((function(e){return r+=s(e,j)})),e.sheetArr.forEach((function(e){return r+=s(e,g)})),e.queryArr.forEach((function(e){return r+=s(e,k)})),e.bookArr.forEach((function(e){return r+=s(e,I)})),e.mapArr.forEach((function(e){return r+=s(e,S)})),e.historyArr.forEach((function(e){return r+=s(e,A)})),e.pendingArr.forEach((function(e){return r+=s(e,D)})),e.tagArr.forEach((function(e){return r+=s(e,F)})),e.idArr.forEach((function(e){return r+=s(e,V)})),e.idxArr.forEach((function(e){return r+=s(e,L)})),e.idxArr.forEach((function(e){return r+=s(e,M)})),e.ixArr.forEach((function(e){return r+=s(e,B)})),r+=function(e){var t="\nexport interface ParamActs {";return e.idArr.forEach((function(e){var n=e.sName;t+="\n\t".concat(Object(a.c)(n),"?: ").concat(Object(a.d)(n),"[];")})),e.idxArr.forEach((function(e){var n=e.sName;t+="\n\t".concat(Object(a.c)(n),"?: ActParam").concat(Object(a.d)(n),"[];")})),e.ixArr.forEach((function(e){var n=e.sName;t+="\n\t".concat(Object(a.c)(n),"?: ").concat(Object(a.d)(n),"[];")})),t+="\n}\n"}(e),r+="\n\nexport interface UqExt extends Uq {\n\tActs(param:ParamActs): Promise<any>;\n",i(e.tuidArr,"Tuid",(function(e){return o(e,v)})),i(e.actionArr,"Action",(function(e){return o(e,m)})),i(e.sheetArr,"Sheet",(function(e){return o(e,x)})),i(e.bookArr,"Book",(function(e){return o(e,w)})),i(e.queryArr,"Query",(function(e){return o(e,O)})),i(e.mapArr,"Map",(function(e){return o(e,C)})),i(e.historyArr,"History",(function(e){return o(e,N)})),i(e.pendingArr,"Pending",(function(e){return o(e,_)})),i(e.tagArr,"Tag",(function(e){return o(e,P)})),i(e.idArr,"ID",(function(e){return o(e,T)})),i(e.idxArr,"IDX",(function(e){return o(e,R)})),i(e.ixArr,"IX",(function(e){return o(e,E)})),(n+=' } from "tonva-react";')+(r+="\n}\n")}function s(e,t){if(e.name.indexOf("$")>0)return"";var n=t(e);return n?"\n"+n+"\n":""}function o(e,t){if(e.name.indexOf("$")>0)return"";var n=t(e);return n?"\n"+n:""}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return"";var a,i="",c=Object(r.a)(e);try{for(c.s();!(a=c.n()).done;){var s=a.value;i+=d(s,t,n)}}catch(o){c.e(o)}finally{c.f()}return i}var l={char:"string",text:"string",id:"number",textid:"string",int:"number",bigint:"number",smallint:"number",tinyint:"number",dec:"number",float:"number",double:"number"},h=["id","master","row","no","$create","$update","$owner"];function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.name,a=e.type,i=l[a];i||(i="any");var c=!0===t&&h.indexOf(r)>=0?"?":"";return"\n".concat("\t".repeat(n)).concat(r).concat(c,": ").concat(i,";")}function f(e){if(!e)return"";var t,n="\n",i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;n+="\t".concat(Object(a.c)(c.name),": {"),n+=u(c.fields,!1,2),n+="\n\t}[];\n"}}catch(s){i.e(s)}finally{i.f()}return n}function p(e,t){if(t){var n=e.sName;n=Object(a.d)(n);var i,c="",s=Object(r.a)(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,l=Object(a.d)(o.name);c+="interface Return".concat(n).concat(l," {"),c+=u(o.fields),c+="\n}\n"}}catch(v){s.e(v)}finally{s.f()}c+="interface Result".concat(n," {\n");var h,d=Object(r.a)(t);try{for(d.s();!(h=d.n()).done;){var f=h.value,p=Object(a.d)(f.name);c+="\t".concat(f.name,": Return").concat(n).concat(p,"[];\n")}}catch(v){d.e(v)}finally{d.f()}return c+="}"}}function v(e){return"\t".concat(Object(i.b)(e.sName),": UqTuid<Tuid").concat(Object(a.d)(e.sName),">;")}function b(e){var t="export interface Tuid".concat(Object(a.d)(e.sName)," {");return t+=u(e.fields),t+="\n}"}function m(e){return"\t".concat(Object(i.b)(e.sName),": UqAction<Param").concat(Object(a.d)(e.sName),", Result").concat(Object(a.d)(e.sName),">;")}function j(e){var t="export interface Param".concat(Object(a.d)(e.sName)," {");return t+=u(e.fields),t+=f(e.arrFields),t+="\n}\n",t+=p(e,e.returns)}function y(e){var t=e.schema;if(t){var n=t.values,r="export enum ".concat(Object(a.d)(e.sName)," {"),i=!0;for(var c in n){!1===i?r+=",":i=!1;var s=n[c];r+="\n\t"+c+" = ",r+="string"===typeof s?'"'+s+'"':s}return r+"\n}"}}function O(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqQuery<Param").concat(Object(a.d)(t),", Result").concat(Object(a.d)(t),">;")}function k(e){var t="export interface Param".concat(Object(a.d)(e.sName)," {");return t+=u(e.fields),t+="\n}\n",t+=p(e,e.returns)}function x(e){var t=e.sName,n=e.verify,r=Object(a.d)(t),c=n?"Verify".concat(r):"any";return"\t".concat(Object(i.b)(t),": UqSheet<Sheet").concat(r,", ").concat(c,">;")}function g(e){var t=e.sName,n=e.fields,i=e.arrFields,c=e.verify,s="export interface Sheet".concat(Object(a.d)(t)," {");if(s+=u(n),s+=f(i),s+="}",c){var o=c.returns;s+="\nexport interface Verify".concat(Object(a.d)(t)," {");var l,h=Object(r.a)(o);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=d.name,v=d.fields;s+="\n\t"+p+": {",s+=u(v,!1,2),s+="\n\t}[];"}}catch(b){h.e(b)}finally{h.f()}s+="\n}"}return s}function w(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqBook<Param").concat(Object(a.d)(t),", Result").concat(Object(a.d)(t),">;")}function I(e){var t=e.sName,n=e.fields,r=e.returns,i="export interface Param".concat(Object(a.d)(t)," {");return i+=u(n),i+="\n}\n",i+=p(e,r)}function C(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqMap;")}function S(e){return""}function N(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqHistory<Param").concat(Object(a.d)(t),", Result").concat(Object(a.d)(t),">;")}function A(e){var t=e.sName,n=e.fields,r=e.returns,i="export interface Param".concat(Object(a.d)(t)," {");return i+=u(n),i+="\n}\n",i+=p(e,r)}function _(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqPending<any, any>;")}function D(e){return""}function P(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqTag;")}function T(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqID<any>;")}function R(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqIDX<any>;")}function E(e){var t=e.sName;return"\t".concat(Object(i.b)(t),": UqIX<any>;")}function F(e){}function V(e){var t,n=e.sName,i=e.fields,c=e.schema.keys,s=[],o=[],l=Object(r.a)(i);try{var h=function(){var e=t.value,n=e.name;if("id"===n)return"continue";c.find((function(e){return e.name===n}))?s.push(e):o.push(e)};for(l.s();!(t=l.n()).done;)h()}catch(f){l.e(f)}finally{l.f()}var d="export interface ".concat(Object(a.d)(n)," {");return d+="\n\tid?: number;",d+=u(s,!0),d+=u(o,!0),d+="\n}"}function L(e){var t,n=e.sName,i=e.fields,c=e.schema.exFields,s="export interface ".concat(Object(a.d)(n)," {"),o=Object(r.a)(i);try{for(o.s();!(t=o.n()).done;){var u=t.value,h=u.name,d=u.type,f=l[d];f||(f="any"),s+="\n".concat("\t".repeat(1)).concat(h),"id"!==h&&(s+="?"),s+=": ".concat(f,";")}}catch(k){o.e(k)}finally{o.f()}s+="\n\t$act?: number;";var p=!1,v=!1;if(c){var b,m=Object(r.a)(c);try{for(m.s();!(b=m.n()).done;){var j=b.value,y=j.track,O=j.memo;!0===y&&(p=!0),!0===O&&(v=!0)}}catch(k){m.e(k)}finally{m.f()}}return!0===p&&(s+="\n\t$track?: number;"),!0===v&&(s+="\n\t$memo?: string;"),s+="\n}"}function M(e){var t,n=e.sName,i=e.fields,c=e.schema.exFields,s="export interface ActParam".concat(Object(a.d)(n)," {"),o=Object(r.a)(i);try{for(o.s();!(t=o.n()).done;){var u=t.value,h=u.name,d=u.type,f=l[d];f||(f="any"),s+="\n".concat("\t".repeat(1)).concat(h),"id"!==h&&(s+="?"),s+=": ".concat(f,"|IDXValue;")}}catch(k){o.e(k)}finally{o.f()}s+="\n\t$act?: number;";var p=!1,v=!1;if(c){var b,m=Object(r.a)(c);try{for(m.s();!(b=m.n()).done;){var j=b.value,y=j.track,O=j.memo;!0===y&&(p=!0),!0===O&&(v=!0)}}catch(k){m.e(k)}finally{m.f()}}return!0===p&&(s+="\n\t$track?: number;"),!0===v&&(s+="\n\t$memo?: string;"),s+="\n}"}function B(e){var t=e.sName,n=e.fields,r="export interface ".concat(Object(a.d)(t)," {");return r+=u(n),r+="\n}"}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},name:{name:"name",type:"string",isKey:!0,widget:"string",label:"Name"},currency:{name:"currency",type:"string",isKey:!1,widget:"string",label:"Currency"}},i=[a.name,a.currency],c={label:"Market",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},holding:{name:"holding",type:"id",isKey:!0,label:"Holding"},tick:{name:"tick",isKey:!0,label:"Tick"},price:{name:"price",type:"integer",isKey:!1,widget:"updown",label:"Price"},quantity:{name:"quantity",type:"integer",isKey:!1,widget:"updown",label:"Quantity"},amount:{name:"amount",type:"integer",isKey:!1,widget:"updown",label:"Amount"}},i=[a.holding,a.tick,a.price,a.quantity,a.amount],c={label:"Transaction",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u})),n.d(t,"ui",(function(){return l}));var r=n(7),a=n(0),i={id:{name:"id",type:"id",isKey:!1,label:"Id"},no:{name:"no",type:"string",isKey:!0,widget:"string",label:"No"},name:{name:"name",type:"string",isKey:!1,widget:"string",label:"Name"}},c=[i.no,i.name],s={};Object(r.setRes)(s,{$zh:{Group:"\u80a1\u7968\u7ec4",No:"\u7f16\u53f7",Name:"\u7ec4\u540d"},$en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){var t=e.name;return Object(a.jsx)(a.Fragment,{children:o(t)})}var l={label:o("Group"),fieldArr:c,fields:i}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return c})),n.d(t,"ui",(function(){return s})),n.d(t,"resRaw",(function(){return o})),n.d(t,"t",(function(){return l})),n.d(t,"render",(function(){return h}));var r=n(7),a=n(0),i={id:{name:"id",type:"id",isKey:!1,label:"Id"},no:{name:"no",type:"string",isKey:!0,widget:"string",label:"No"},name:{name:"name",type:"string",isKey:!1,widget:"string",label:"Name"},portion:{name:"portion",type:"integer",isKey:!1,widget:"updown",label:"Portion"}},c=[i.no,i.name,i.portion],s={label:"Account",fieldArr:c,fields:i},o={$zh:{No:"\u7f16\u53f7",Name:"\u540d\u79f0",Portion:"\u4efd\u6570"},$en:{}},u={};Object(r.setRes)(u,o);var l=function(e){var t;return null!==(t=u[e])&&void 0!==t?t:e};function h(e){var t=e.name;return Object(a.jsx)(a.Fragment,{children:l(t)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={id:{name:"id",type:"id",isKey:!1,label:"Id"},account:{name:"account",type:"id",isKey:!0,label:"Account"},stock:{name:"stock",type:"id",isKey:!0,label:"Stock"},everBought:{name:"everBought",isKey:!1,label:"EverBought"}},c={label:"Holding",fieldArr:[i.account,i.stock,i.everBought],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},market:{name:"market",type:"id",isKey:!0,label:"Market"},no:{name:"no",type:"string",isKey:!0,widget:"string",label:"Code"},name:{name:"name",type:"string",isKey:!1,widget:"string",label:"Name"},rawId:{name:"rawId",type:"id",isKey:!1,label:"RawId"},uno:{name:"uno",type:"string",isKey:!1,widget:"string",label:"Uno"}},i=[a.market,a.no,a.name,a.rawId],c={label:"Stock",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){var t=e.name,n=e.no;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{children:t})," ",Object(r.jsx)("span",{children:n})]})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={id:{name:"id",type:"id",isKey:!1,label:"Id"},no:{name:"no",type:"string",isKey:!0,widget:"string",label:"No"},caption:{name:"caption",type:"string",isKey:!1,widget:"string",label:"Caption"},content:{name:"content",isKey:!1,label:"Content"}},c={label:"Blog",fieldArr:[i.no,i.caption,i.content],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={id:{name:"id",type:"id",isKey:!1,label:"Id"},name:{name:"name",type:"string",isKey:!0,widget:"string",label:"Name"}},c={label:"Industry",fieldArr:[i.name],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},earning:{name:"earning",type:"number",isKey:!1,widget:"updown",label:"Earning"},divident:{name:"divident",type:"number",isKey:!1,widget:"updown",label:"Divident"},price:{name:"price",type:"number",isKey:!1,widget:"updown",label:"Price"},pvolumn:{name:"pvolumn",type:"number",isKey:!1,widget:"updown",label:"Pvolumn"},roe:{name:"roe",type:"number",isKey:!1,widget:"updown",label:"Roe"},volumn:{name:"volumn",type:"number",isKey:!1,widget:"updown",label:"Volumn"},date:{name:"date",isKey:!1,label:"Date"},dvRate:{name:"dvRate",type:"number",isKey:!1,widget:"updown",label:"DvRate"},ttm:{name:"ttm",type:"number",isKey:!1,widget:"updown",label:"Ttm"},miRate:{name:"miRate",type:"number",isKey:!1,widget:"updown",label:"MiRate"},miValue:{name:"miValue",type:"number",isKey:!1,widget:"updown",label:"MiValue"},incValue:{name:"incValue",type:"number",isKey:!1,widget:"number",label:"IncValue"},inc1:{name:"inc1",type:"number",isKey:!1,widget:"updown",label:"Inc1"},inc2:{name:"inc2",type:"number",isKey:!1,widget:"updown",label:"Inc2"},inc3:{name:"inc3",type:"number",isKey:!1,widget:"updown",label:"Inc3"},inc4:{name:"inc4",type:"number",isKey:!1,widget:"updown",label:"Inc4"},preInc:{name:"preInc",type:"number",isKey:!1,widget:"updown",label:"PreInc"},smoothness:{name:"smoothness",isKey:!1,widget:"updown",label:"Smoothness"},gMiRate:{name:"gMiRate",type:"number",isKey:!1,widget:"number",label:"GMiRate"},gMiValue:{name:"gMiValue",type:"number",isKey:!1,widget:"number",label:"GMiValue"},gIncValue:{name:"gIncValue",type:"number",isKey:!1,widget:"number",label:"GIncValue"},gInc1:{name:"gInc1",type:"number",isKey:!1,widget:"number",label:"GInc1"},gInc2:{name:"gInc2",type:"number",isKey:!1,widget:"number",label:"GInc2"},gInc3:{name:"gInc3",type:"number",isKey:!1,widget:"number",label:"GInc3"},gInc4:{name:"gInc4",type:"number",isKey:!1,widget:"number",label:"GInc4"},gPreInc:{name:"gPreInc",type:"number",isKey:!1,widget:"number",label:"GPreInc"},gSmoothness:{name:"gSmoothness",isKey:!1,label:"GSmoothness"},rMiRate:{name:"rMiRate",type:"number",isKey:!1,widget:"number",label:"RMiRate"},rMiValue:{name:"rMiValue",type:"number",isKey:!1,widget:"number",label:"RMiValue"},rIncValue:{name:"rIncValue",type:"number",isKey:!1,widget:"number",label:"RIncValue"},rInc1:{name:"rInc1",type:"number",isKey:!1,widget:"number",label:"RInc1"},rInc2:{name:"rInc2",type:"number",isKey:!1,widget:"number",label:"RInc2"},rInc3:{name:"rInc3",type:"number",isKey:!1,widget:"number",label:"RInc3"},rInc4:{name:"rInc4",type:"number",isKey:!1,widget:"number",label:"RInc4"},rPreInc:{name:"rPreInc",type:"number",isKey:!1,widget:"number",label:"RPreInc"},rSmoothness:{name:"rSmoothness",isKey:!1,label:"RSmoothness"}},i=[a.miValue,a.incValue,a.earning,a.divident,a.price,a.pvolumn,a.roe,a.inc1,a.inc2,a.inc3,a.inc4,a.preInc,a.volumn,a.smoothness,a.date,a.miRate,a.dvRate,a.ttm],c={label:"StockValue",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},miValue:{name:"miValue",type:"number",isKey:!1,widget:"number",label:"MiValue"},market:{name:"market",type:"number",isKey:!1,widget:"updown",label:"Market"},count:{name:"count",type:"integer",isKey:!1,widget:"updown",label:"Count"},cash:{name:"cash",type:"number",isKey:!1,widget:"updown",label:"Cash"}},i=[a.miValue,a.market,a.count,a.cash],c={label:"AccountValue",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={id:{name:"id",type:"id",isKey:!1,label:"Id"},quantity:{name:"quantity",type:"integer",isKey:!1,widget:"updown",label:"Quantity"},cost:{name:"cost",type:"number",isKey:!1,widget:"number",label:"Cost"}},i=[a.quantity,a.cost],c={label:"Portfolio",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"}},c={label:"UserBlockStock",fieldArr:[i.xi],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"},sort:{name:"sort",type:"integer",isKey:!1,widget:"updown",label:"Sort"}},i=[a.sort],c={label:"UserAccount",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return a})),n.d(t,"ui",(function(){return i})),n.d(t,"res",(function(){return c})),n.d(t,"render",(function(){return s}));var r=n(0),a=[],i={label:"UserGroup",fieldArr:a,fields:{ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"}}},c={zh:{},en:{}};function s(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"}},c={label:"UserAllStock",fieldArr:[i.xi],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"}},c={label:"AccountHolding",fieldArr:[i.xi],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"fieldArr",(function(){return i})),n.d(t,"ui",(function(){return c})),n.d(t,"res",(function(){return s})),n.d(t,"render",(function(){return o}));var r=n(0),a={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"},order:{name:"order",type:"integer",isKey:!1,widget:"updown",label:"Order"}},i=[a.order],c={label:"GroupStock",fieldArr:i,fields:a},s={zh:{},en:{}};function o(e){return Object(r.jsx)(r.Fragment,{children:JSON.stringify(e)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"ui",(function(){return c})),n.d(t,"t",(function(){return o})),n.d(t,"render",(function(){return u}));var r=n(7),a=n(0),i={ix:{name:"ix",type:"id",isKey:!1,label:"Ix"},xi:{name:"xi",type:"id",isKey:!1,label:"Xi"}},c={label:"IXIndustry",fieldArr:[i.xi],fields:i},s={};Object(r.setRes)(s,{zh:{},en:{}});var o=function(e){var t;return null!==(t=s[e])&&void 0!==t?t:e};function u(e){return Object(a.jsx)(a.Fragment,{children:JSON.stringify(e)})}},,function(e,t,n){"use strict";n(166);var r=n(176);n.d(t,"CStockInfo",(function(){return r.a}));n(106),n(17)},,,,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),i=n(90),c=n.n(i),s=(n(211),n(212),function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,320)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))}),o=n(112),u=n(0);c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(o.a,{})}),document.getElementById("root")),s()}],[[319,2,3]]]);
//# sourceMappingURL=main.c836b9e3.chunk.js.map